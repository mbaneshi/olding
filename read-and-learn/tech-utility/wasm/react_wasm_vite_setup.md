To create a new React project using **Vite** with **TypeScript**, and add **WebAssembly (Wasm)** for experimentation, follow the steps below:

### 1. **Set Up a New React Project with Vite and TypeScript**
Vite is a fast build tool optimized for modern web development. Setting up a new React project with TypeScript can be done quickly using the Vite CLI.

#### Step-by-Step Guide:

1. **Install Vite** and initialize a new project:
   ```bash
   npm create vite@latest
   ```

2. **Follow the CLI prompts**:
   - Project name: `react-wasm-vite`
   - Select framework: `React`
   - Select variant: `TypeScript`

   After completion, it will generate a new Vite + React + TypeScript project structure.

3. **Move into your project directory**:
   ```bash
   cd react-wasm-vite
   ```

4. **Install the dependencies**:
   ```bash
   npm install
   ```

5. **Start the development server**:
   ```bash
   npm run dev
   ```

   Your basic **Vite + React + TypeScript** app is now up and running.

---

### 2. **Add WebAssembly (Wasm) to the React Project**
Now, let's integrate WebAssembly into the project. You can create a small WebAssembly module using Rust, compile it, and then use it in the React project.

#### 2.1 **Install Rust and wasm-pack**

You’ll need **Rust** and **wasm-pack** to compile Rust code into WebAssembly.

1. **Install Rust**:
   If you don’t already have Rust installed, you can install it using the following command:
   ```bash
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
   ```

2. **Install wasm-pack**:
   After setting up Rust, install `wasm-pack` to help with compiling Rust code to WebAssembly:
   ```bash
   cargo install wasm-pack
   ```

---

#### 2.2 **Create a Simple WebAssembly (Wasm) Module in Rust**

1. **Create a new directory** for your Wasm module:
   ```bash
   mkdir wasm-module
   cd wasm-module
   ```

2. **Initialize a new Rust library**:
   ```bash
   cargo new --lib wasm_example
   cd wasm_example
   ```

3. **Edit `Cargo.toml`** to configure it for Wasm:
   Open the `Cargo.toml` file and make sure it includes the following lines:
   ```toml
   [lib]
   crate-type = ["cdylib"]

   [dependencies]
   wasm-bindgen = "0.2"
   ```

4. **Write a simple Rust function** that will be compiled to WebAssembly:
   Open `src/lib.rs` and replace its contents with:
   ```rust
   use wasm_bindgen::prelude::*;

   #[wasm_bindgen]
   pub fn greet(name: &str) -> String {
       format!("Hello, {}! Greetings from WebAssembly!", name)
   }
   ```

5. **Build the Wasm module**:
   From the `wasm-example` directory, run:
   ```bash
   wasm-pack build --target web
   ```

   This command will generate a `pkg/` folder with the WebAssembly binary and the JavaScript bindings necessary to use it in your React project.

---

### 3. **Use WebAssembly in Your React + Vite Project**

Now that you have the Wasm module compiled, let's integrate it into your **Vite + React** project.

1. **Copy the WebAssembly module**:
   Copy the contents of the `pkg/` folder generated by `wasm-pack build` into your Vite project’s `src/wasm/` directory. You can create the directory as needed:
   ```bash
   mkdir -p src/wasm
   cp -r ../wasm-module/wasm_example/pkg/* src/wasm/
   ```

2. **Import and use the Wasm module** in your React component:
   Now you can import and use the WebAssembly module in a React component.

   **src/App.tsx**:
   ```tsx
   import React, { useEffect, useState } from 'react';
   import init, { greet } from './wasm/wasm_example';

   function App() {
     const [message, setMessage] = useState('');

     useEffect(() => {
       const loadWasm = async () => {
         await init(); // Initializes the Wasm module
         const greeting = greet("React + Wasm");
         setMessage(greeting);
       };
       loadWasm();
     }, []);

     return (
       <div className="App">
         <h1>WebAssembly in Vite + React</h1>
         <p>{message}</p>
       </div>
     );
   }

   export default App;
   ```

3. **Re-run the Vite development server**:
   Restart the Vite server to make sure everything is working:
   ```bash
   npm run dev
   ```

4. **Verify the output**:
   You should now see "Hello, React + Wasm! Greetings from WebAssembly!" displayed in the browser.

---

### Final Project Structure:

```plaintext
react-wasm-vite/
├── node_modules/
├── public/
├── src/
│   ├── wasm/                # Contains the Wasm module files from Rust
│   │   ├── wasm_example_bg.wasm
│   │   ├── wasm_example.js
│   ├── App.tsx              # Main React component
│   ├── main.tsx             # React entry point
│   └── index.css
├── package.json
├── tsconfig.json
└── vite.config.ts
```

---

```bash
nvim react_wasm_vite_setup.md
```

**Timestamp**: 2024-10-21  
**Description**: Guide to setting up a React project with Vite, TypeScript, and adding a WebAssembly (Wasm) module using Rust.  
**Lines**: 93  
**Characters**: 4,283
