"use strict";(()=>{var wy=Object.create;var Ki=Object.defineProperty,_y=Object.defineProperties,vy=Object.getOwnPropertyDescriptor,xy=Object.getOwnPropertyDescriptors,Ay=Object.getOwnPropertyNames,$i=Object.getOwnPropertySymbols,dl=Object.getPrototypeOf,Js=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,Oy=Reflect.get;var kn=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")},Rn=Math.pow,Zs=(t,e,r)=>e in t?Ki(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h=(t,e)=>{for(var r in e||(e={}))Js.call(e,r)&&Zs(t,r,e[r]);if($i)for(var r of $i(e))fl.call(e,r)&&Zs(t,r,e[r]);return t},S=(t,e)=>_y(t,xy(e));var jn=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Nn=t=>typeof t=="symbol"?t:t+"",_e=(t,e)=>{var r={};for(var n in t)Js.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&$i)for(var n of $i(t))e.indexOf(n)<0&&fl.call(t,n)&&(r[n]=t[n]);return r};var k=(t,e)=>()=>(t&&(e=t(t=0)),e);var Q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mt=(t,e)=>{for(var r in e)Ki(t,r,{get:e[r],enumerable:!0})},Py=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ay(e))!Js.call(t,i)&&i!==r&&Ki(t,i,{get:()=>e[i],enumerable:!(n=vy(e,i))||n.enumerable});return t};var Ue=(t,e,r)=>(r=t!=null?wy(dl(t)):{},Py(e||!t||!t.__esModule?Ki(r,"default",{value:t,enumerable:!0}):r,t));var $t=(t,e,r)=>(Zs(t,typeof e!="symbol"?e+"":e,r),r);var vt=(t,e,r)=>Oy(dl(t),r,e);var f=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{o(r.next(u))}catch(c){i(c)}},s=u=>{try{o(r.throw(u))}catch(c){i(c)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);o((r=r.apply(t,e)).next())}),Y=function(t,e){this[0]=t,this[1]=e},ve=(t,e,r)=>{var n=(s,o,u,c)=>{try{var p=r[s](o),d=(o=p.value)instanceof Y,b=p.done;Promise.resolve(d?o[0]:o).then(w=>d?n(s==="return"?s:"next",o[1]?{done:w.done,value:w.value}:w,u,c):u({value:w,done:b})).catch(w=>n("throw",w,u,c))}catch(w){c(w)}},i=s=>a[s]=o=>new Promise((u,c)=>n(s,o,u,c)),a={};return r=r.apply(t,e),a[Symbol.asyncIterator]=()=>a,i("next"),i("throw"),i("return"),a},cr=t=>{var e=t[kn("asyncIterator")],r=!1,n,i={};return e==null?(e=t[kn("iterator")](),n=a=>i[a]=s=>e[a](s)):(e=e.call(t),n=a=>i[a]=s=>{if(r){if(r=!1,a==="throw")throw s;return s}return r=!0,{done:!1,value:new Y(new Promise(o=>{var u=e[a](s);if(!(u instanceof Object))throw TypeError("Object expected");o(u)}),1)}}),i[kn("iterator")]=()=>i,n("next"),"throw"in e?n("throw"):i.throw=a=>{throw a},"return"in e&&n("return"),i},Oe=(t,e,r)=>(e=t[kn("asyncIterator")])?e.call(t):(t=t[kn("iterator")](),e={},r=(n,i)=>(i=t[n])&&(e[n]=a=>new Promise((s,o,u)=>(a=i.call(t,a),u=a.done,Promise.resolve(a.value).then(c=>s({value:c,done:u}),o)))),r("next"),r("return"),e);var m,l=k(()=>{m={npm_package_dependencies_hash_wasm:"^4.11.0",npm_package_dependencies_sanitize_html:"^2.11.0",npm_package_devDependencies_archiver:"^5.3.1",npm_package_devDependencies_esbuild_style_plugin:"^1.6.1",npm_package_devDependencies_lint_staged:"^13.1.0",MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",npm_package_dependencies_react_beforeunload:"^2.5.3",npm_package_devDependencies_prettier:"^3.1.0",npm_package_scripts_dev_safari:"cross-env NODE_ENV='development' node build.mjs safari",npm_package_lint_staged_src____js_jsx_ts_tsx_mjs__0:"npx prettier --write",TERM_PROGRAM:"vscode",npm_package_lint_staged_src____js_jsx_ts_tsx_mjs__1:"npx eslint --fix",NODE:"/Users/givebest/Library/pnpm/pnpm",npm_package_dependencies_axios:"^1.4.0",npm_package_devDependencies_typescript:"^4.9.5",INIT_CWD:"/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_esbuild_plugin_wat:"^0.2.7",npm_package_devDependencies__types_webextension_polyfill:"^0.10.2",HOMEBREW_API_DOMAIN:"https://mirrors.ustc.edu.cn/homebrew-bottles/api",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.ustc.edu.cn/homebrew-bottles/bottles",npm_package_dependencies__google_generative_ai:"^0.3.0",TMPDIR:"/var/folders/3z/qr70xgqn1fs11zxmqks6y68w0000gn/T/",HOMEBREW_REPOSITORY:"/opt/homebrew",npm_package_devDependencies_esbuild:"^0.19.5",npm_package_scripts_lint:"eslint --ext .js,.mjs,.jsx .",npm_package_dependencies_best_effort_json_parser:"^1.1.2",npm_package_dependencies_copy_to_clipboard:"^3.3.3",npm_package_dependencies_fetch_event_stream:"^0.1.5",TERM_PROGRAM_VERSION:"1.90.2",npm_package_devDependencies_fs_extra:"^11.1.0",npm_package_scripts_dev:"cross-env NODE_ENV='development' node build.mjs",npm_package_dependencies__fengkx_react_syntax_highlighter:"15.6.1",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/givebest",npm_package_dependencies_gb_url:"^1.1.6",npm_package_dependencies_gpt_token_utils:"^1.2.0",npm_package_dependencies_uuid:"^9.0.0",npm_package_private:"true",npm_package_devDependencies_postcss_scss:"^4.0.6",npm_config_registry:"https://registry.npmjs.org/",PNPM_HOME:"/Users/givebest/Library/pnpm",npm_package_dependencies_react_dom:"^18.2.0",USER:"givebest",npm_package_devDependencies__types_react:"17.0.44",npm_package_devDependencies_dotenv:"^16.0.3",COMMAND_MODE:"unix2003",npm_package_dependencies_hotkeys_js:"^3.11.2",PNPM_SCRIPT_SRC_DIR:"/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension",npm_package_scripts_build_safari:"cross-env NODE_ENV='production' node build.mjs safari",npm_package_dependencies_react_icons:"^5.0.1",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.X7mPIsfNrt/Listeners",npm_package_dependencies_eventsource_parser:"^0.0.5",npm_package_dependencies_zustand:"^4.4.6",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_package_dependencies_buffer:"^6.0.3",npm_package_dependencies_expiry_map:"^2.0.0",npm_package_devDependencies_eslint:"^8.30.0",npm_package_devDependencies_npm_force_resolutions:"^0.0.10",npm_package_devDependencies_postcss:"^8.4.38",HOMEBREW_PIP_INDEX_URL:"https://mirrors.aliyun.com/pypi/simple/",npm_package_dependencies_punycode:"^2.1.1",npm_package_devDependencies__typescript_eslint_eslint_plugin:"^5.47.0",npm_execpath:"/Users/givebest/Library/pnpm/pnpm",npm_package_devDependencies_esbuild_sass_plugin:"^2.16.0",npm_package_dependencies_pubsub_js:"^1.9.4",npm_package_dependencies_scroll_into_view_if_needed:"^3.1.0",npm_package_dependencies_swr:"^2.0.0",npm_package_devDependencies__types_react_dom:"^18.2.18",npm_config_frozen_lockfile:"",npm_package_dependencies_prop_types:"^15.8.1",npm_package_devDependencies__typescript_eslint_parser:"^5.47.0",PATH:"/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.bin:/snapshot/dist/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/Users/givebest/Library/pnpm:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/givebest/.npm-global/bin:/Users/givebest/.npm-global/bin",npm_package_scripts_lint_fix:"eslint --ext .js,.mjs,.jsx . --fix",npm_package_devDependencies_esbuild_plugin_raw_css:"^0.1.0",npm_package_devDependencies__types_pubsub_js:"^1.8.6",npm_package_dependencies_pdfjs_dist:"^3.6.172",npm_package_dependencies_rehype_highlight:"^6.0.0",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/givebest",npm_package_author:"givebest",npm_package_dependencies__primer_octicons_react:"^17.9.0",PWD:"/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension",npm_package_devDependencies_tailwindcss:"^3.2.4",npm_command:"run-script",npm_package_scripts_watch_safari:'chokidar src -c "npm run dev:safari"',npm_package_devDependencies_eslint_plugin_react_hooks:"^4.6.0",npm_package_dependencies_ua_parser_js:"^1.0.35",npm_lifecycle_event:"build",LANG:"zh_CN.UTF-8",npm_package_name:"glarity-summary-extension",npm_package_devDependencies__types_sanitize_html:"^2.9.5",NODE_PATH:"/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.pnpm/cross-env@7.0.3/node_modules/cross-env/src/bin/node_modules:/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.pnpm/cross-env@7.0.3/node_modules/cross-env/src/node_modules:/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.pnpm/cross-env@7.0.3/node_modules/cross-env/node_modules:/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.pnpm/cross-env@7.0.3/node_modules:/Users/givebest/workspace/soho/Felo/codes/glarity/codes/glarity-summary-extension/node_modules/.pnpm/node_modules",npm_package_scripts_build:"cross-env NODE_ENV='production' node build.mjs",npm_package_scripts_build_edge:"cross-env NODE_ENV='production' node build.mjs edge",npm_package_dependencies__twind_preset_autoprefix:"^1.0.7",npm_package_devDependencies_sass:"^1.57.1",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_package_devDependencies__ant_design_cssinjs:"1.17.2",npm_package_resolutions__types_react:"17.0.44",npm_package_dependencies__types_ua_parser_js:"^0.7.39",npm_package_dependencies_react_hotkeys_hook:"^4.4.0",npm_package_dependencies_classnames:"^2.3.2",npm_package_dependencies_cropperjs:"^1.6.1",npm_package_devDependencies__types_lodash_es:"^4.17.6",npm_package_dependencies_linkedom:"^0.16.8",npm_package_devDependencies_eslint_config_prettier:"^8.5.0",XPC_SERVICE_NAME:"0",npm_package_version:"4.1.0",npm_package_scripts_watch:'chokidar src -i "src/manifest.json" -i "src/manifest.v2.json" -c "npm run dev"',VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.13",HOME:"/Users/givebest",SHLVL:"2",npm_package_devDependencies_webextension_polyfill:"^0.10.0",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_inter_ui:"^3.19.3",npm_package_dependencies_react_markdown:"^8.0.7",HOMEBREW_PREFIX:"/opt/homebrew",npm_package_dependencies__microsoft_fetch_event_source:"^2.0.1",npm_package_dependencies_github_markdown_css:"^5.1.0",npm_package_dependencies_nanoid:"^5.0.7",npm_package_devDependencies_cross_env:"^7.0.3",npm_package_devDependencies_husky:"^8.0.0",npm_package_dependencies_xss:"^1.0.14",LOGNAME:"givebest",npm_package_dependencies__twind_core:"^1.1.3",npm_package_dependencies_react_cropper:"^2.3.3",npm_lifecycle_script:"cross-env NODE_ENV='production' node build.mjs",VSCODE_GIT_IPC_HANDLE:"/var/folders/3z/qr70xgqn1fs11zxmqks6y68w0000gn/T/vscode-git-46a95c5f12.sock",npm_package_dependencies_lodash_es:"^4.17.21",npm_package_dependencies_esbuild_visualizer:"^0.4.0",npm_package_dependencies_react:"^18.2.0",npm_package_dependencies_base_64:"^1.0.0",npm_package_devDependencies__types_fs_extra:"^9.0.13",npm_package_dependencies_js_tiktoken:"^1.0.10",npm_package_devDependencies__types_uuid:"^9.0.0",npm_config_user_agent:"pnpm/9.4.0 npm/? node/v18.5.0 darwin arm64",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_scripts_prepare:"husky install",npm_package_dependencies_antd:"^5.11.1",npm_package_dependencies_langchain:"^0.0.125",npm_package_devDependencies_prettier_plugin_organize_imports:"^3.2.1",npm_package_dependencies_partial_json_parser:"^1.2.2",npm_package_dependencies_react_draggable:"^4.4.6",npm_package_devDependencies_chokidar_cli:"^3.0.0",COLORTERM:"truecolor",npm_package_dependencies__twind_preset_tailwind:"^1.1.4",npm_package_devDependencies_eslint_plugin_react:"^7.31.11",npm_config_prefix:"/Users/givebest/.npm-global",npm_node_execpath:"/Users/givebest/Library/pnpm/pnpm",NODE_ENV:"production",GLARITY_LOG_URL:"https://log.felo.ai",GLARITY_CONFIG_URL:"https://glarityapi.com",ACCOUNT_HOST:"https://account.felo.ai",GLARITY_CENTER_URL:"https://glarity.app",FREE_API_HOST:"glarityapi.com",FELO_SEARCH_URL:"https://search.glarity.ai",FELO_CHAT_URL:"https://chat.felo.ai"}});var Ys=Q((y0,ml)=>{"use strict";l();ml.exports=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}}});var Je=Q((b0,wl)=>{"use strict";l();var Ty=Ys(),Kt=Object.prototype.toString;function Qs(t){return Array.isArray(t)}function Ws(t){return typeof t=="undefined"}function Sy(t){return t!==null&&!Ws(t)&&t.constructor!==null&&!Ws(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function yl(t){return Kt.call(t)==="[object ArrayBuffer]"}function Cy(t){return Kt.call(t)==="[object FormData]"}function Iy(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yl(t.buffer),e}function ky(t){return typeof t=="string"}function Ry(t){return typeof t=="number"}function gl(t){return t!==null&&typeof t=="object"}function Hi(t){if(Kt.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function jy(t){return Kt.call(t)==="[object Date]"}function Ny(t){return Kt.call(t)==="[object File]"}function Ly(t){return Kt.call(t)==="[object Blob]"}function bl(t){return Kt.call(t)==="[object Function]"}function Dy(t){return gl(t)&&bl(t.pipe)}function My(t){return Kt.call(t)==="[object URLSearchParams]"}function Uy(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Fy(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Xs(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Qs(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Gs(){var t={};function e(i,a){Hi(t[a])&&Hi(i)?t[a]=Gs(t[a],i):Hi(i)?t[a]=Gs({},i):Qs(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Xs(arguments[r],e);return t}function qy(t,e,r){return Xs(e,function(i,a){r&&typeof i=="function"?t[a]=Ty(i,r):t[a]=i}),t}function By(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}wl.exports={isArray:Qs,isArrayBuffer:yl,isBuffer:Sy,isFormData:Cy,isArrayBufferView:Iy,isString:ky,isNumber:Ry,isObject:gl,isPlainObject:Hi,isUndefined:Ws,isDate:jy,isFile:Ny,isBlob:Ly,isFunction:bl,isStream:Dy,isURLSearchParams:My,isStandardBrowserEnv:Fy,forEach:Xs,merge:Gs,extend:qy,trim:Uy,stripBOM:By}});var eo=Q((_0,vl)=>{"use strict";l();var Lr=Je();function _l(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}vl.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Lr.isURLSearchParams(r))i=r.toString();else{var a=[];Lr.forEach(r,function(u,c){u===null||typeof u=="undefined"||(Lr.isArray(u)?c=c+"[]":u=[u],Lr.forEach(u,function(d){Lr.isDate(d)?d=d.toISOString():Lr.isObject(d)&&(d=JSON.stringify(d)),a.push(_l(c)+"="+_l(d))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Al=Q((x0,xl)=>{"use strict";l();var Vy=Je();function Zi(){this.handlers=[]}Zi.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Zi.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Zi.prototype.forEach=function(e){Vy.forEach(this.handlers,function(n){n!==null&&e(n)})};xl.exports=Zi});var Pl=Q((O0,Ol)=>{"use strict";l();var zy=Je();Ol.exports=function(e,r){zy.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})}});var to=Q((E0,El)=>{"use strict";l();El.exports=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var ro=Q((S0,Tl)=>{"use strict";l();Tl.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var no=Q((I0,Sl)=>{"use strict";l();var $y=to();Sl.exports=function(e,r,n,i,a){var s=new Error(e);return $y(s,r,n,i,a)}});var Il=Q((R0,Cl)=>{"use strict";l();var Ky=no();Cl.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Ky("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Rl=Q((N0,kl)=>{"use strict";l();var Ji=Je();kl.exports=Ji.isStandardBrowserEnv()?function(){return{write:function(r,n,i,a,s,o){var u=[];u.push(r+"="+encodeURIComponent(n)),Ji.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Ji.isString(a)&&u.push("path="+a),Ji.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Nl=Q((D0,jl)=>{"use strict";l();jl.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Dl=Q((U0,Ll)=>{"use strict";l();Ll.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Ul=Q((q0,Ml)=>{"use strict";l();var Hy=Nl(),Zy=Dl();Ml.exports=function(e,r){return e&&!Hy(r)?Zy(e,r):r}});var ql=Q((V0,Fl)=>{"use strict";l();var io=Je(),Jy=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Fl.exports=function(e){var r={},n,i,a;return e&&io.forEach(e.split(`
`),function(o){if(a=o.indexOf(":"),n=io.trim(o.substr(0,a)).toLowerCase(),i=io.trim(o.substr(a+1)),n){if(r[n]&&Jy.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var zl=Q(($0,Vl)=>{"use strict";l();var Bl=Je();Vl.exports=Bl.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){var s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var o=Bl.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var Ln=Q((H0,$l)=>{"use strict";l();function ao(t){this.message=t}ao.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ao.prototype.__CANCEL__=!0;$l.exports=ao});var oo=Q((J0,Kl)=>{"use strict";l();var Yi=Je(),Yy=Il(),Wy=Rl(),Gy=eo(),Qy=Ul(),Xy=ql(),eg=zl(),so=no(),tg=ro(),rg=Ln();Kl.exports=function(e){return new Promise(function(n,i){var a=e.data,s=e.headers,o=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}Yi.isFormData(a)&&delete s["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+b)}var w=Qy(e.baseURL,e.url);p.open(e.method.toUpperCase(),Gy(w,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function g(){if(p){var T="getAllResponseHeaders"in p?Xy(p.getAllResponseHeaders()):null,j=!o||o==="text"||o==="json"?p.responseText:p.response,I={data:j,status:p.status,statusText:p.statusText,headers:T,config:e,request:p};Yy(function(P){n(P),c()},function(P){i(P),c()},I),p=null}}if("onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(g)},p.onabort=function(){p&&(i(so("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){i(so("Network Error",e,null,p)),p=null},p.ontimeout=function(){var j=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",I=e.transitional||tg;e.timeoutErrorMessage&&(j=e.timeoutErrorMessage),i(so(j,e,I.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},Yi.isStandardBrowserEnv()){var v=(e.withCredentials||eg(w))&&e.xsrfCookieName?Wy.read(e.xsrfCookieName):void 0;v&&(s[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&Yi.forEach(s,function(j,I){typeof a=="undefined"&&I.toLowerCase()==="content-type"?delete s[I]:p.setRequestHeader(I,j)}),Yi.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),o&&o!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(T){p&&(i(!T||T&&T.type?new rg("canceled"):T),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),a||(a=null),p.send(a)})}});var Gi=Q((W0,Jl)=>{"use strict";l();var Fe=Je(),Hl=Pl(),ng=to(),ig=ro(),ag={"Content-Type":"application/x-www-form-urlencoded"};function Zl(t,e){!Fe.isUndefined(t)&&Fe.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function sg(){var t;return typeof XMLHttpRequest!="undefined"?t=oo():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=oo()),t}function og(t,e,r){if(Fe.isString(t))try{return(e||JSON.parse)(t),Fe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Wi={transitional:ig,adapter:sg(),transformRequest:[function(e,r){return Hl(r,"Accept"),Hl(r,"Content-Type"),Fe.isFormData(e)||Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)?e:Fe.isArrayBufferView(e)?e.buffer:Fe.isURLSearchParams(e)?(Zl(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Fe.isObject(e)||r&&r["Content-Type"]==="application/json"?(Zl(r,"application/json"),og(e)):e}],transformResponse:[function(e){var r=this.transitional||Wi.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Fe.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?ng(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Fe.forEach(["delete","get","head"],function(e){Wi.headers[e]={}});Fe.forEach(["post","put","patch"],function(e){Wi.headers[e]=Fe.merge(ag)});Jl.exports=Wi});var Wl=Q((Q0,Yl)=>{"use strict";l();var ug=Je(),cg=Gi();Yl.exports=function(e,r,n){var i=this||cg;return ug.forEach(n,function(s){e=s.call(i,e,r)}),e}});var uo=Q((eA,Gl)=>{"use strict";l();Gl.exports=function(e){return!!(e&&e.__CANCEL__)}});var ep=Q((rA,Xl)=>{"use strict";l();var Ql=Je(),co=Wl(),lg=uo(),pg=Gi(),hg=Ln();function lo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hg("canceled")}Xl.exports=function(e){lo(e),e.headers=e.headers||{},e.data=co.call(e,e.data,e.headers,e.transformRequest),e.headers=Ql.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ql.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||pg.adapter;return r(e).then(function(i){return lo(e),i.data=co.call(e,i.data,i.headers,e.transformResponse),i},function(i){return lg(i)||(lo(e),i&&i.response&&(i.response.data=co.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var po=Q((iA,tp)=>{"use strict";l();var it=Je();tp.exports=function(e,r){r=r||{};var n={};function i(p,d){return it.isPlainObject(p)&&it.isPlainObject(d)?it.merge(p,d):it.isPlainObject(d)?it.merge({},d):it.isArray(d)?d.slice():d}function a(p){if(it.isUndefined(r[p])){if(!it.isUndefined(e[p]))return i(void 0,e[p])}else return i(e[p],r[p])}function s(p){if(!it.isUndefined(r[p]))return i(void 0,r[p])}function o(p){if(it.isUndefined(r[p])){if(!it.isUndefined(e[p]))return i(void 0,e[p])}else return i(void 0,r[p])}function u(p){if(p in r)return i(e[p],r[p]);if(p in e)return i(void 0,e[p])}var c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return it.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var b=c[d]||a,w=b(d);it.isUndefined(w)&&b!==u||(n[d]=w)}),n}});var ho=Q((sA,rp)=>{l();rp.exports={version:"0.26.1"}});var ap=Q((uA,ip)=>{"use strict";l();var dg=ho().version,fo={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){fo[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var np={};fo.transitional=function(e,r,n){function i(a,s){return"[Axios v"+dg+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!np[s]&&(np[s]=!0),e?e(a,s,o):!0}};function fg(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],s=e[a];if(s){var o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new TypeError("option "+a+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+a)}}ip.exports={assertOptions:fg,validators:fo}});var pp=Q((lA,lp)=>{"use strict";l();var up=Je(),mg=eo(),sp=Al(),op=ep(),Qi=po(),cp=ap(),Dr=cp.validators;function Dn(t){this.defaults=t,this.interceptors={request:new sp,response:new sp}}Dn.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Qi(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&cp.assertOptions(n,{silentJSONParsing:Dr.transitional(Dr.boolean),forcedJSONParsing:Dr.transitional(Dr.boolean),clarifyTimeoutError:Dr.transitional(Dr.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(a=a&&w.synchronous,i.unshift(w.fulfilled,w.rejected))});var s=[];this.interceptors.response.forEach(function(w){s.push(w.fulfilled,w.rejected)});var o;if(!a){var u=[op,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var c=r;i.length;){var p=i.shift(),d=i.shift();try{c=p(c)}catch(b){d(b);break}}try{o=op(c)}catch(b){return Promise.reject(b)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Dn.prototype.getUri=function(e){return e=Qi(this.defaults,e),mg(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};up.forEach(["delete","get","head","options"],function(e){Dn.prototype[e]=function(r,n){return this.request(Qi(n||{},{method:e,url:r,data:(n||{}).data}))}});up.forEach(["post","put","patch"],function(e){Dn.prototype[e]=function(r,n,i){return this.request(Qi(i||{},{method:e,url:r,data:n}))}});lp.exports=Dn});var dp=Q((hA,hp)=>{"use strict";l();var yg=Ln();function Mr(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,a=r._listeners.length;for(i=0;i<a;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(s){r.subscribe(s),i=s}).then(n);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i){r.reason||(r.reason=new yg(i),e(r.reason))})}Mr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mr.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mr.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Mr.source=function(){var e,r=new Mr(function(i){e=i});return{token:r,cancel:e}};hp.exports=Mr});var mp=Q((fA,fp)=>{"use strict";l();fp.exports=function(e){return function(n){return e.apply(null,n)}}});var gp=Q((yA,yp)=>{"use strict";l();var gg=Je();yp.exports=function(e){return gg.isObject(e)&&e.isAxiosError===!0}});var _p=Q((bA,mo)=>{"use strict";l();var bp=Je(),bg=Ys(),Xi=pp(),wg=po(),_g=Gi();function wp(t){var e=new Xi(t),r=bg(Xi.prototype.request,e);return bp.extend(r,Xi.prototype,e),bp.extend(r,e),r.create=function(i){return wp(wg(t,i))},r}var xt=wp(_g);xt.Axios=Xi;xt.Cancel=Ln();xt.CancelToken=dp();xt.isCancel=uo();xt.VERSION=ho().version;xt.all=function(e){return Promise.all(e)};xt.spread=mp();xt.isAxiosError=gp();mo.exports=xt;mo.exports.default=xt});var yo=Q((_A,vp)=>{l();vp.exports=_p()});var wo=Q(yt=>{"use strict";l();Object.defineProperty(yt,"__esModule",{value:!0});yt.RequiredError=yt.BaseAPI=yt.COLLECTION_FORMATS=yt.BASE_PATH=void 0;var vg=yo();yt.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,"");yt.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};var go=class{constructor(e,r=yt.BASE_PATH,n=vg.default){this.basePath=r,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};yt.BaseAPI=go;var bo=class extends Error{constructor(e,r){super(r),this.field=e,this.name="RequiredError"}};yt.RequiredError=bo});var xp=Q(xe=>{"use strict";l();var vo=xe&&xe.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(p){try{c(n.next(p))}catch(d){s(d)}}function u(p){try{c(n.throw(p))}catch(d){s(d)}}function c(p){p.done?a(p.value):i(p.value).then(o,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0});xe.createRequestFunction=xe.toPathString=xe.serializeDataIfNeeded=xe.setSearchParams=xe.setOAuthToObject=xe.setBearerAuthToObject=xe.setBasicAuthToObject=xe.setApiKeyToObject=xe.assertParamExists=xe.DUMMY_BASE_URL=void 0;var xg=wo();xe.DUMMY_BASE_URL="https://example.com";xe.assertParamExists=function(t,e,r){if(r==null)throw new xg.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};xe.setApiKeyToObject=function(t,e,r){return vo(this,void 0,void 0,function*(){if(r&&r.apiKey){let n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};xe.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};xe.setBearerAuthToObject=function(t,e){return vo(this,void 0,void 0,function*(){if(e&&e.accessToken){let r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};xe.setOAuthToObject=function(t,e,r,n){return vo(this,void 0,void 0,function*(){if(n&&n.accessToken){let i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function _o(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>_o(t,n,r)):Object.keys(e).forEach(n=>_o(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}xe.setSearchParams=function(t,...e){let r=new URLSearchParams(t.search);_o(r,e),t.search=r.toString()};xe.serializeDataIfNeeded=function(t,e,r){let n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};xe.toPathString=function(t){return t.pathname+t.search+t.hash};xe.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{let s=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(s)}}});var Ap=Q(ee=>{"use strict";l();var W=ee&&ee.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(p){try{c(n.next(p))}catch(d){s(d)}}function u(p){try{c(n.throw(p))}catch(d){s(d)}}function c(p){p.done?a(p.value):i(p.value).then(o,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(ee,"__esModule",{value:!0});ee.OpenAIApi=ee.OpenAIApiFactory=ee.OpenAIApiFp=ee.OpenAIApiAxiosParamCreator=ee.CreateImageRequestResponseFormatEnum=ee.CreateImageRequestSizeEnum=ee.ChatCompletionResponseMessageRoleEnum=ee.ChatCompletionRequestMessageRoleEnum=void 0;var we=yo(),R=xp(),ye=wo();ee.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};ee.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};ee.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"};ee.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"};ee.OpenAIApiAxiosParamCreator=function(t){return{cancelFineTune:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("cancelFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),createAnswer:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createAnswer","createAnswerRequest",e);let n="/answers",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createChatCompletion:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createChatCompletion","createChatCompletionRequest",e);let n="/chat/completions",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createClassification:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createClassification","createClassificationRequest",e);let n="/classifications",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createCompletion:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createCompletion","createCompletionRequest",e);let n="/completions",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createEdit:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createEdit","createEditRequest",e);let n="/edits",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createEmbedding:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createEmbedding","createEmbeddingRequest",e);let n="/embeddings",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createFile:(e,r,n={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createFile","file",e),R.assertParamExists("createFile","purpose",r);let i="/files",a=new URL(i,R.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},c={},p=new(t&&t.formDataCtor||FormData);e!==void 0&&p.append("file",e),r!==void 0&&p.append("purpose",r),u["Content-Type"]="multipart/form-data",R.setSearchParams(a,c);let d=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign(Object.assign({},u),p.getHeaders()),d),n.headers),o.data=p,{url:R.toPathString(a),options:o}}),createFineTune:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createFineTune","createFineTuneRequest",e);let n="/fine-tunes",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createImage:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createImage","createImageRequest",e);let n="/images/generations",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createImageEdit:(e,r,n,i,a,s,o,u={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createImageEdit","image",e),R.assertParamExists("createImageEdit","prompt",r);let c="/images/edits",p=new URL(c,R.DUMMY_BASE_URL),d;t&&(d=t.baseOptions);let b=Object.assign(Object.assign({method:"POST"},d),u),w={},g={},v=new(t&&t.formDataCtor||FormData);e!==void 0&&v.append("image",e),n!==void 0&&v.append("mask",n),r!==void 0&&v.append("prompt",r),i!==void 0&&v.append("n",i),a!==void 0&&v.append("size",a),s!==void 0&&v.append("response_format",s),o!==void 0&&v.append("user",o),w["Content-Type"]="multipart/form-data",R.setSearchParams(p,g);let T=d&&d.headers?d.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),v.getHeaders()),T),u.headers),b.data=v,{url:R.toPathString(p),options:b}}),createImageVariation:(e,r,n,i,a,s={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createImageVariation","image",e);let o="/images/variations",u=new URL(o,R.DUMMY_BASE_URL),c;t&&(c=t.baseOptions);let p=Object.assign(Object.assign({method:"POST"},c),s),d={},b={},w=new(t&&t.formDataCtor||FormData);e!==void 0&&w.append("image",e),r!==void 0&&w.append("n",r),n!==void 0&&w.append("size",n),i!==void 0&&w.append("response_format",i),a!==void 0&&w.append("user",a),d["Content-Type"]="multipart/form-data",R.setSearchParams(u,b);let g=c&&c.headers?c.headers:{};return p.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),w.getHeaders()),g),s.headers),p.data=w,{url:R.toPathString(u),options:p}}),createModeration:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createModeration","createModerationRequest",e);let n="/moderations",i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=R.serializeDataIfNeeded(e,s,t),{url:R.toPathString(i),options:s}}),createSearch:(e,r,n={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createSearch","engineId",e),R.assertParamExists("createSearch","createSearchRequest",r);let i="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(e))),a=new URL(i,R.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},c={};u["Content-Type"]="application/json",R.setSearchParams(a,c);let p=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),p),n.headers),o.data=R.serializeDataIfNeeded(r,o,t),{url:R.toPathString(a),options:o}}),createTranscription:(e,r,n,i,a,s,o={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createTranscription","file",e),R.assertParamExists("createTranscription","model",r);let u="/audio/transcriptions",c=new URL(u,R.DUMMY_BASE_URL),p;t&&(p=t.baseOptions);let d=Object.assign(Object.assign({method:"POST"},p),o),b={},w={},g=new(t&&t.formDataCtor||FormData);e!==void 0&&g.append("file",e),r!==void 0&&g.append("model",r),n!==void 0&&g.append("prompt",n),i!==void 0&&g.append("response_format",i),a!==void 0&&g.append("temperature",a),s!==void 0&&g.append("language",s),b["Content-Type"]="multipart/form-data",R.setSearchParams(c,w);let v=p&&p.headers?p.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),g.getHeaders()),v),o.headers),d.data=g,{url:R.toPathString(c),options:d}}),createTranslation:(e,r,n,i,a,s={})=>W(this,void 0,void 0,function*(){R.assertParamExists("createTranslation","file",e),R.assertParamExists("createTranslation","model",r);let o="/audio/translations",u=new URL(o,R.DUMMY_BASE_URL),c;t&&(c=t.baseOptions);let p=Object.assign(Object.assign({method:"POST"},c),s),d={},b={},w=new(t&&t.formDataCtor||FormData);e!==void 0&&w.append("file",e),r!==void 0&&w.append("model",r),n!==void 0&&w.append("prompt",n),i!==void 0&&w.append("response_format",i),a!==void 0&&w.append("temperature",a),d["Content-Type"]="multipart/form-data",R.setSearchParams(u,b);let g=c&&c.headers?c.headers:{};return p.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),w.getHeaders()),g),s.headers),p.data=w,{url:R.toPathString(u),options:p}}),deleteFile:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("deleteFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),deleteModel:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("deleteModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),downloadFile:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("downloadFile","fileId",e);let n="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),listEngines:(e={})=>W(this,void 0,void 0,function*(){let r="/engines",n=new URL(r,R.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};R.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:R.toPathString(n),options:a}}),listFiles:(e={})=>W(this,void 0,void 0,function*(){let r="/files",n=new URL(r,R.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};R.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:R.toPathString(n),options:a}}),listFineTuneEvents:(e,r,n={})=>W(this,void 0,void 0,function*(){R.assertParamExists("listFineTuneEvents","fineTuneId",e);let i="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(e))),a=new URL(i,R.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"GET"},s),n),u={},c={};r!==void 0&&(c.stream=r),R.setSearchParams(a,c);let p=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),p),n.headers),{url:R.toPathString(a),options:o}}),listFineTunes:(e={})=>W(this,void 0,void 0,function*(){let r="/fine-tunes",n=new URL(r,R.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};R.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:R.toPathString(n),options:a}}),listModels:(e={})=>W(this,void 0,void 0,function*(){let r="/models",n=new URL(r,R.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};R.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:R.toPathString(n),options:a}}),retrieveEngine:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("retrieveEngine","engineId",e);let n="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),retrieveFile:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("retrieveFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),retrieveFineTune:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("retrieveFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}}),retrieveModel:(e,r={})=>W(this,void 0,void 0,function*(){R.assertParamExists("retrieveModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,R.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};R.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:R.toPathString(i),options:s}})}};ee.OpenAIApiFp=function(t){let e=ee.OpenAIApiAxiosParamCreator(t);return{cancelFineTune(r,n){return W(this,void 0,void 0,function*(){let i=yield e.cancelFineTune(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createAnswer(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createAnswer(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createChatCompletion(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createChatCompletion(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createClassification(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createClassification(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createCompletion(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createCompletion(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createEdit(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createEdit(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createEmbedding(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createEmbedding(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createFile(r,n,i){return W(this,void 0,void 0,function*(){let a=yield e.createFile(r,n,i);return R.createRequestFunction(a,we.default,ye.BASE_PATH,t)})},createFineTune(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createFineTune(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createImage(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createImage(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createImageEdit(r,n,i,a,s,o,u,c){return W(this,void 0,void 0,function*(){let p=yield e.createImageEdit(r,n,i,a,s,o,u,c);return R.createRequestFunction(p,we.default,ye.BASE_PATH,t)})},createImageVariation(r,n,i,a,s,o){return W(this,void 0,void 0,function*(){let u=yield e.createImageVariation(r,n,i,a,s,o);return R.createRequestFunction(u,we.default,ye.BASE_PATH,t)})},createModeration(r,n){return W(this,void 0,void 0,function*(){let i=yield e.createModeration(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},createSearch(r,n,i){return W(this,void 0,void 0,function*(){let a=yield e.createSearch(r,n,i);return R.createRequestFunction(a,we.default,ye.BASE_PATH,t)})},createTranscription(r,n,i,a,s,o,u){return W(this,void 0,void 0,function*(){let c=yield e.createTranscription(r,n,i,a,s,o,u);return R.createRequestFunction(c,we.default,ye.BASE_PATH,t)})},createTranslation(r,n,i,a,s,o){return W(this,void 0,void 0,function*(){let u=yield e.createTranslation(r,n,i,a,s,o);return R.createRequestFunction(u,we.default,ye.BASE_PATH,t)})},deleteFile(r,n){return W(this,void 0,void 0,function*(){let i=yield e.deleteFile(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},deleteModel(r,n){return W(this,void 0,void 0,function*(){let i=yield e.deleteModel(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},downloadFile(r,n){return W(this,void 0,void 0,function*(){let i=yield e.downloadFile(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},listEngines(r){return W(this,void 0,void 0,function*(){let n=yield e.listEngines(r);return R.createRequestFunction(n,we.default,ye.BASE_PATH,t)})},listFiles(r){return W(this,void 0,void 0,function*(){let n=yield e.listFiles(r);return R.createRequestFunction(n,we.default,ye.BASE_PATH,t)})},listFineTuneEvents(r,n,i){return W(this,void 0,void 0,function*(){let a=yield e.listFineTuneEvents(r,n,i);return R.createRequestFunction(a,we.default,ye.BASE_PATH,t)})},listFineTunes(r){return W(this,void 0,void 0,function*(){let n=yield e.listFineTunes(r);return R.createRequestFunction(n,we.default,ye.BASE_PATH,t)})},listModels(r){return W(this,void 0,void 0,function*(){let n=yield e.listModels(r);return R.createRequestFunction(n,we.default,ye.BASE_PATH,t)})},retrieveEngine(r,n){return W(this,void 0,void 0,function*(){let i=yield e.retrieveEngine(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},retrieveFile(r,n){return W(this,void 0,void 0,function*(){let i=yield e.retrieveFile(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},retrieveFineTune(r,n){return W(this,void 0,void 0,function*(){let i=yield e.retrieveFineTune(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})},retrieveModel(r,n){return W(this,void 0,void 0,function*(){let i=yield e.retrieveModel(r,n);return R.createRequestFunction(i,we.default,ye.BASE_PATH,t)})}}};ee.OpenAIApiFactory=function(t,e,r){let n=ee.OpenAIApiFp(t);return{cancelFineTune(i,a){return n.cancelFineTune(i,a).then(s=>s(r,e))},createAnswer(i,a){return n.createAnswer(i,a).then(s=>s(r,e))},createChatCompletion(i,a){return n.createChatCompletion(i,a).then(s=>s(r,e))},createClassification(i,a){return n.createClassification(i,a).then(s=>s(r,e))},createCompletion(i,a){return n.createCompletion(i,a).then(s=>s(r,e))},createEdit(i,a){return n.createEdit(i,a).then(s=>s(r,e))},createEmbedding(i,a){return n.createEmbedding(i,a).then(s=>s(r,e))},createFile(i,a,s){return n.createFile(i,a,s).then(o=>o(r,e))},createFineTune(i,a){return n.createFineTune(i,a).then(s=>s(r,e))},createImage(i,a){return n.createImage(i,a).then(s=>s(r,e))},createImageEdit(i,a,s,o,u,c,p,d){return n.createImageEdit(i,a,s,o,u,c,p,d).then(b=>b(r,e))},createImageVariation(i,a,s,o,u,c){return n.createImageVariation(i,a,s,o,u,c).then(p=>p(r,e))},createModeration(i,a){return n.createModeration(i,a).then(s=>s(r,e))},createSearch(i,a,s){return n.createSearch(i,a,s).then(o=>o(r,e))},createTranscription(i,a,s,o,u,c,p){return n.createTranscription(i,a,s,o,u,c,p).then(d=>d(r,e))},createTranslation(i,a,s,o,u,c){return n.createTranslation(i,a,s,o,u,c).then(p=>p(r,e))},deleteFile(i,a){return n.deleteFile(i,a).then(s=>s(r,e))},deleteModel(i,a){return n.deleteModel(i,a).then(s=>s(r,e))},downloadFile(i,a){return n.downloadFile(i,a).then(s=>s(r,e))},listEngines(i){return n.listEngines(i).then(a=>a(r,e))},listFiles(i){return n.listFiles(i).then(a=>a(r,e))},listFineTuneEvents(i,a,s){return n.listFineTuneEvents(i,a,s).then(o=>o(r,e))},listFineTunes(i){return n.listFineTunes(i).then(a=>a(r,e))},listModels(i){return n.listModels(i).then(a=>a(r,e))},retrieveEngine(i,a){return n.retrieveEngine(i,a).then(s=>s(r,e))},retrieveFile(i,a){return n.retrieveFile(i,a).then(s=>s(r,e))},retrieveFineTune(i,a){return n.retrieveFineTune(i,a).then(s=>s(r,e))},retrieveModel(i,a){return n.retrieveModel(i,a).then(s=>s(r,e))}}};var xo=class extends ye.BaseAPI{cancelFineTune(e,r){return ee.OpenAIApiFp(this.configuration).cancelFineTune(e,r).then(n=>n(this.axios,this.basePath))}createAnswer(e,r){return ee.OpenAIApiFp(this.configuration).createAnswer(e,r).then(n=>n(this.axios,this.basePath))}createChatCompletion(e,r){return ee.OpenAIApiFp(this.configuration).createChatCompletion(e,r).then(n=>n(this.axios,this.basePath))}createClassification(e,r){return ee.OpenAIApiFp(this.configuration).createClassification(e,r).then(n=>n(this.axios,this.basePath))}createCompletion(e,r){return ee.OpenAIApiFp(this.configuration).createCompletion(e,r).then(n=>n(this.axios,this.basePath))}createEdit(e,r){return ee.OpenAIApiFp(this.configuration).createEdit(e,r).then(n=>n(this.axios,this.basePath))}createEmbedding(e,r){return ee.OpenAIApiFp(this.configuration).createEmbedding(e,r).then(n=>n(this.axios,this.basePath))}createFile(e,r,n){return ee.OpenAIApiFp(this.configuration).createFile(e,r,n).then(i=>i(this.axios,this.basePath))}createFineTune(e,r){return ee.OpenAIApiFp(this.configuration).createFineTune(e,r).then(n=>n(this.axios,this.basePath))}createImage(e,r){return ee.OpenAIApiFp(this.configuration).createImage(e,r).then(n=>n(this.axios,this.basePath))}createImageEdit(e,r,n,i,a,s,o,u){return ee.OpenAIApiFp(this.configuration).createImageEdit(e,r,n,i,a,s,o,u).then(c=>c(this.axios,this.basePath))}createImageVariation(e,r,n,i,a,s){return ee.OpenAIApiFp(this.configuration).createImageVariation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}createModeration(e,r){return ee.OpenAIApiFp(this.configuration).createModeration(e,r).then(n=>n(this.axios,this.basePath))}createSearch(e,r,n){return ee.OpenAIApiFp(this.configuration).createSearch(e,r,n).then(i=>i(this.axios,this.basePath))}createTranscription(e,r,n,i,a,s,o){return ee.OpenAIApiFp(this.configuration).createTranscription(e,r,n,i,a,s,o).then(u=>u(this.axios,this.basePath))}createTranslation(e,r,n,i,a,s){return ee.OpenAIApiFp(this.configuration).createTranslation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}deleteFile(e,r){return ee.OpenAIApiFp(this.configuration).deleteFile(e,r).then(n=>n(this.axios,this.basePath))}deleteModel(e,r){return ee.OpenAIApiFp(this.configuration).deleteModel(e,r).then(n=>n(this.axios,this.basePath))}downloadFile(e,r){return ee.OpenAIApiFp(this.configuration).downloadFile(e,r).then(n=>n(this.axios,this.basePath))}listEngines(e){return ee.OpenAIApiFp(this.configuration).listEngines(e).then(r=>r(this.axios,this.basePath))}listFiles(e){return ee.OpenAIApiFp(this.configuration).listFiles(e).then(r=>r(this.axios,this.basePath))}listFineTuneEvents(e,r,n){return ee.OpenAIApiFp(this.configuration).listFineTuneEvents(e,r,n).then(i=>i(this.axios,this.basePath))}listFineTunes(e){return ee.OpenAIApiFp(this.configuration).listFineTunes(e).then(r=>r(this.axios,this.basePath))}listModels(e){return ee.OpenAIApiFp(this.configuration).listModels(e).then(r=>r(this.axios,this.basePath))}retrieveEngine(e,r){return ee.OpenAIApiFp(this.configuration).retrieveEngine(e,r).then(n=>n(this.axios,this.basePath))}retrieveFile(e,r){return ee.OpenAIApiFp(this.configuration).retrieveFile(e,r).then(n=>n(this.axios,this.basePath))}retrieveFineTune(e,r){return ee.OpenAIApiFp(this.configuration).retrieveFineTune(e,r).then(n=>n(this.axios,this.basePath))}retrieveModel(e,r){return ee.OpenAIApiFp(this.configuration).retrieveModel(e,r).then(n=>n(this.axios,this.basePath))}};ee.OpenAIApi=xo});var Op=Q((SA,Ag)=>{Ag.exports={name:"openai",version:"3.3.0",description:"Node.js library for the OpenAI API",repository:{type:"git",url:"git@github.com:openai/openai-node.git"},keywords:["openai","open","ai","gpt-3","gpt3"],author:"OpenAI",license:"MIT",main:"./dist/index.js",types:"./dist/index.d.ts",scripts:{build:"tsc --outDir dist/"},dependencies:{axios:"^0.26.0","form-data":"^4.0.0"},devDependencies:{"@types/node":"^12.11.5",typescript:"^3.6.4"}}});var Ep=Q((CA,Pp)=>{l();Pp.exports=typeof self=="object"?self.FormData:window.FormData});var Tp=Q(ea=>{"use strict";l();Object.defineProperty(ea,"__esModule",{value:!0});ea.Configuration=void 0;var Og=Op(),Ao=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${Og.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=Ep())}isJsonMime(e){let r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}};ea.Configuration=Ao});var Ur=Q(Ht=>{"use strict";l();var Pg=Ht&&Ht.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sp=Ht&&Ht.__exportStar||function(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&Pg(e,t,r)};Object.defineProperty(Ht,"__esModule",{value:!0});Sp(Ap(),Ht);Sp(Tp(),Ht)});function Ip(){return f(this,null,function*(){return Oo===void 0&&(Oo={library:"langchain-js",runtime:Cg()}),Oo})}function ne(t){try{return typeof process!="undefined"?m==null?void 0:m[t]:void 0}catch(e){return}}var Eg,Tg,Sg,Cp,Rt,Cg,Oo,jt=k(()=>{l();Eg=()=>typeof window!="undefined"&&typeof window.document!="undefined",Tg=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Sg=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Cp=()=>typeof Deno!="undefined",Rt=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!Cp(),Cg=()=>{let t;return Eg()?t="browser":Rt()?t="node":Tg()?t="webworker":Sg()?t="jsdom":Cp()?t="deno":t="other",t}});function Mn(t,e){return function(){return t.apply(e,arguments)}}var Po=k(()=>{"use strict";l()});function kg(t){return t!==null&&!Un(t)&&t.constructor!==null&&!Un(t.constructor)&&ut(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}function Rg(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jp(t.buffer),e}function Fn(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let n,i;if(typeof t!="object"&&(t=[t]),Fr(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{let a=r?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length,o;for(n=0;n<s;n++)o=a[n],e.call(null,t[o],o,t)}}function Lp(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}function To(){let{caseless:t}=Mp(this)&&this||{},e={},r=(n,i)=>{let a=t&&Lp(e,i)||i;ta(e[a])&&ta(n)?e[a]=To(e[a],n):ta(n)?e[a]=To({},n):Fr(n)?e[a]=n.slice():e[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Fn(arguments[n],r);return e}function sb(t){return!!(t&&ut(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Ig,So,ra,At,na,Fr,Un,jp,jg,ut,Np,ia,Ng,ta,Lg,Dg,Mg,Ug,Fg,qg,Bg,Vg,Dp,Mp,zg,$g,Kg,Hg,Zg,Jg,Yg,Wg,Gg,Qg,Xg,kp,eb,Up,tb,rb,nb,ib,Eo,Rp,Fp,ab,ob,ub,cb,D,Se=k(()=>{"use strict";l();Po();({toString:Ig}=Object.prototype),{getPrototypeOf:So}=Object,ra=(t=>e=>{let r=Ig.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),At=t=>(t=t.toLowerCase(),e=>ra(e)===t),na=t=>e=>typeof e===t,{isArray:Fr}=Array,Un=na("undefined");jp=At("ArrayBuffer");jg=na("string"),ut=na("function"),Np=na("number"),ia=t=>t!==null&&typeof t=="object",Ng=t=>t===!0||t===!1,ta=t=>{if(ra(t)!=="object")return!1;let e=So(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Lg=At("Date"),Dg=At("File"),Mg=At("Blob"),Ug=At("FileList"),Fg=t=>ia(t)&&ut(t.pipe),qg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ut(t.append)&&((e=ra(t))==="formdata"||e==="object"&&ut(t.toString)&&t.toString()==="[object FormData]"))},Bg=At("URLSearchParams"),Vg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");Dp=(()=>typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global)(),Mp=t=>!Un(t)&&t!==Dp;zg=(t,e,r,{allOwnKeys:n}={})=>(Fn(e,(i,a)=>{r&&ut(i)?t[a]=Mn(i,r):t[a]=i},{allOwnKeys:n}),t),$g=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Kg=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Hg=(t,e,r,n)=>{let i,a,s,o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!n||n(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=r!==!1&&So(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Zg=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},Jg=t=>{if(!t)return null;if(Fr(t))return t;let e=t.length;if(!Np(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Yg=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&So(Uint8Array)),Wg=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),i;for(;(i=n.next())&&!i.done;){let a=i.value;e.call(t,a[0],a[1])}},Gg=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Qg=At("HTMLFormElement"),Xg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),kp=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),eb=At("RegExp"),Up=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};Fn(r,(i,a)=>{e(i,a,t)!==!1&&(n[a]=i)}),Object.defineProperties(t,n)},tb=t=>{Up(t,(e,r)=>{if(ut(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(ut(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},rb=(t,e)=>{let r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Fr(t)?n(t):n(String(t).split(e)),r},nb=()=>{},ib=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Eo="abcdefghijklmnopqrstuvwxyz",Rp="0123456789",Fp={DIGIT:Rp,ALPHA:Eo,ALPHA_DIGIT:Eo+Eo.toUpperCase()+Rp},ab=(t=16,e=Fp.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};ob=t=>{let e=new Array(10),r=(n,i)=>{if(ia(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let a=Fr(n)?[]:{};return Fn(n,(s,o)=>{let u=r(s,i+1);!Un(u)&&(a[o]=u)}),e[i]=void 0,a}}return n};return r(t,0)},ub=At("AsyncFunction"),cb=t=>t&&(ia(t)||ut(t))&&ut(t.then)&&ut(t.catch),D={isArray:Fr,isArrayBuffer:jp,isBuffer:kg,isFormData:qg,isArrayBufferView:Rg,isString:jg,isNumber:Np,isBoolean:Ng,isObject:ia,isPlainObject:ta,isUndefined:Un,isDate:Lg,isFile:Dg,isBlob:Mg,isRegExp:eb,isFunction:ut,isStream:Fg,isURLSearchParams:Bg,isTypedArray:Yg,isFileList:Ug,forEach:Fn,merge:To,extend:zg,trim:Vg,stripBOM:$g,inherits:Kg,toFlatObject:Hg,kindOf:ra,kindOfTest:At,endsWith:Zg,toArray:Jg,forEachEntry:Wg,matchAll:Gg,isHTMLForm:Qg,hasOwnProperty:kp,hasOwnProp:kp,reduceDescriptors:Up,freezeMethods:tb,toObjectSet:rb,toCamelCase:Xg,noop:nb,toFiniteNumber:ib,findKey:Lp,global:Dp,isContextDefined:Mp,ALPHABET:Fp,generateString:ab,isSpecCompliantForm:sb,toJSONObject:ob,isAsyncFn:ub,isThenable:cb}});function qr(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}var qp,Bp,oe,Nt=k(()=>{"use strict";l();Se();D.inherits(qr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});qp=qr.prototype,Bp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Bp[t]={value:t}});Object.defineProperties(qr,Bp);Object.defineProperty(qp,"isAxiosError",{value:!0});qr.from=(t,e,r,n,i,a)=>{let s=Object.create(qp);return D.toFlatObject(t,s,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),qr.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};oe=qr});var aa,Co=k(()=>{l();aa=null});function Io(t){return D.isPlainObject(t)||D.isArray(t)}function zp(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function Vp(t,e,r){return t?t.concat(e).map(function(i,a){return i=zp(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function lb(t){return D.isArray(t)&&!t.some(Io)}function hb(t,e,r){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new(aa||FormData),r=D.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,T){return!D.isUndefined(T[v])});let n=r.metaTokens,i=r.visitor||p,a=r.dots,s=r.indexes,u=(r.Blob||typeof Blob!="undefined"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(D.isDate(g))return g.toISOString();if(!u&&D.isBlob(g))throw new oe("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(g)||D.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function p(g,v,T){let j=g;if(g&&!T&&typeof g=="object"){if(D.endsWith(v,"{}"))v=n?v:v.slice(0,-2),g=JSON.stringify(g);else if(D.isArray(g)&&lb(g)||(D.isFileList(g)||D.endsWith(v,"[]"))&&(j=D.toArray(g)))return v=zp(v),j.forEach(function(q,P){!(D.isUndefined(q)||q===null)&&e.append(s===!0?Vp([v],P,a):s===null?v:v+"[]",c(q))}),!1}return Io(g)?!0:(e.append(Vp(T,v,a),c(g)),!1)}let d=[],b=Object.assign(pb,{defaultVisitor:p,convertValue:c,isVisitable:Io});function w(g,v){if(!D.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(g),D.forEach(g,function(j,I){(!(D.isUndefined(j)||j===null)&&i.call(e,j,D.isString(I)?I.trim():I,v,b))===!0&&w(j,v?v.concat(I):[I])}),d.pop()}}if(!D.isObject(t))throw new TypeError("data must be an object");return w(t),e}var pb,Zt,qn=k(()=>{"use strict";l();Se();Nt();Co();pb=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});Zt=hb});function $p(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Kp(t,e){this._pairs=[],t&&Zt(t,this,e)}var Hp,sa,ko=k(()=>{"use strict";l();qn();Hp=Kp.prototype;Hp.append=function(e,r){this._pairs.push([e,r])};Hp.toString=function(e){let r=e?function(n){return e.call(this,n,$p)}:$p;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};sa=Kp});function db(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Bn(t,e,r){if(!e)return t;let n=r&&r.encode||db,i=r&&r.serialize,a;if(i?a=i(e,r):a=D.isURLSearchParams(e)?e.toString():new sa(e,r).toString(n),a){let s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}var Ro=k(()=>{"use strict";l();Se();ko()});var jo,No,Zp=k(()=>{"use strict";l();Se();jo=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(n){n!==null&&e(n)})}},No=jo});var oa,Lo=k(()=>{"use strict";l();oa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Jp,Yp=k(()=>{"use strict";l();ko();Jp=typeof URLSearchParams!="undefined"?URLSearchParams:sa});var Wp,Gp=k(()=>{"use strict";l();Wp=typeof FormData!="undefined"?FormData:null});var Qp,Xp=k(()=>{"use strict";l();Qp=typeof Blob!="undefined"?Blob:null});var fb,mb,Be,eh=k(()=>{l();Yp();Gp();Xp();fb=(()=>{let t;return typeof navigator!="undefined"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})(),mb=(()=>typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Be={isBrowser:!0,classes:{URLSearchParams:Jp,FormData:Wp,Blob:Qp},isStandardBrowserEnv:fb,isStandardBrowserWebWorkerEnv:mb,protocols:["http","https","file","blob","url","data"]}});var Br=k(()=>{l();eh()});function Do(t,e){return Zt(t,new Be.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return Be.isNode&&D.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}var th=k(()=>{"use strict";l();Se();qn();Br()});function yb(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gb(t){let e={},r=Object.keys(t),n,i=r.length,a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function bb(t){function e(r,n,i,a){let s=r[a++],o=Number.isFinite(+s),u=a>=r.length;return s=!s&&D.isArray(i)?i.length:s,u?(D.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!D.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],a)&&D.isArray(i[s])&&(i[s]=gb(i[s])),!o)}if(D.isFormData(t)&&D.isFunction(t.entries)){let r={};return D.forEachEntry(t,(n,i)=>{e(yb(n),i,r,0)}),r}return null}var ua,Mo=k(()=>{"use strict";l();Se();ua=bb});function _b(t,e,r){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var wb,ca,Vr,la=k(()=>{"use strict";l();Se();Nt();Lo();qn();th();Br();Mo();wb={"Content-Type":void 0};ca={transitional:oa,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=D.isObject(e);if(a&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return i&&i?JSON.stringify(ua(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Do(e,this.formSerializer).toString();if((o=D.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return Zt(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),_b(e)):e}],transformResponse:[function(e){let r=this.transitional||ca.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&D.isString(e)&&(n&&!this.responseType||i)){let s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?oe.from(o,oe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Be.classes.FormData,Blob:Be.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};D.forEach(["delete","get","head"],function(e){ca.headers[e]={}});D.forEach(["post","put","patch"],function(e){ca.headers[e]=D.merge(wb)});Vr=ca});var vb,rh,nh=k(()=>{"use strict";l();Se();vb=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rh=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&vb[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e}});function Vn(t){return t&&String(t).trim().toLowerCase()}function pa(t){return t===!1||t==null?t:D.isArray(t)?t.map(pa):String(t)}function xb(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function Uo(t,e,r,n,i){if(D.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!D.isString(e)){if(D.isString(n))return e.indexOf(n)!==-1;if(D.isRegExp(n))return n.test(e)}}function Ob(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Pb(t,e){let r=D.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,a,s){return this[n].call(this,e,i,a,s)},configurable:!0})})}var ih,Ab,zr,Ye,lr=k(()=>{"use strict";l();Se();nh();ih=Symbol("internals");Ab=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());zr=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function a(o,u,c){let p=Vn(u);if(!p)throw new Error("header name must be a non-empty string");let d=D.findKey(i,p);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||u]=pa(o))}let s=(o,u)=>D.forEach(o,(c,p)=>a(c,p,u));return D.isPlainObject(e)||e instanceof this.constructor?s(e,r):D.isString(e)&&(e=e.trim())&&!Ab(e)?s(rh(e),r):e!=null&&a(r,e,n),this}get(e,r){if(e=Vn(e),e){let n=D.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return xb(i);if(D.isFunction(r))return r.call(this,i,n);if(D.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Vn(e),e){let n=D.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Uo(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function a(s){if(s=Vn(s),s){let o=D.findKey(n,s);o&&(!r||Uo(n,n[o],o,r))&&(delete n[o],i=!0)}}return D.isArray(e)?e.forEach(a):a(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let a=r[n];(!e||Uo(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){let r=this,n={};return D.forEach(this,(i,a)=>{let s=D.findKey(n,a);if(s){r[s]=pa(i),delete r[a];return}let o=e?Ob(a):String(a).trim();o!==a&&delete r[a],r[o]=pa(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return D.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&D.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[ih]=this[ih]={accessors:{}}).accessors,i=this.prototype;function a(s){let o=Vn(s);n[o]||(Pb(i,s),n[o]=!0)}return D.isArray(e)?e.forEach(a):a(e),this}};zr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.freezeMethods(zr.prototype);D.freezeMethods(zr);Ye=zr});function zn(t,e){let r=this||Vr,n=e||r,i=Ye.from(n.headers),a=n.data;return D.forEach(t,function(o){a=o.call(r,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}var ah=k(()=>{"use strict";l();Se();la();lr()});function $n(t){return!!(t&&t.__CANCEL__)}var Fo=k(()=>{"use strict";l()});function sh(t,e,r){oe.call(this,t==null?"canceled":t,oe.ERR_CANCELED,e,r),this.name="CanceledError"}var Jt,Kn=k(()=>{"use strict";l();Nt();Se();D.inherits(sh,oe,{__CANCEL__:!0});Jt=sh});function qo(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new oe("Request failed with status code "+r.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var oh=k(()=>{"use strict";l();Nt()});var uh,ch=k(()=>{"use strict";l();Se();Br();uh=Be.isStandardBrowserEnv?function(){return{write:function(r,n,i,a,s,o){let u=[];u.push(r+"="+encodeURIComponent(n)),D.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),D.isString(a)&&u.push("path="+a),D.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){let n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});function Bo(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}var lh=k(()=>{"use strict";l()});function Vo(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}var ph=k(()=>{"use strict";l()});function Hn(t,e){return t&&!Bo(e)?Vo(t,e):e}var zo=k(()=>{"use strict";l();lh();ph()});var hh,dh=k(()=>{"use strict";l();Se();Br();hh=Be.isStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){let s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){let o=D.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});function $o(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}var fh=k(()=>{"use strict";l()});function Eb(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,a=0,s;return e=e!==void 0?e:1e3,function(u){let c=Date.now(),p=n[a];s||(s=c),r[i]=u,n[i]=c;let d=a,b=0;for(;d!==i;)b+=r[d++],d=d%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),c-s<e)return;let w=p&&c-p;return w?Math.round(b*1e3/w):void 0}}var mh,yh=k(()=>{"use strict";l();mh=Eb});function gh(t,e){let r=0,n=mh(50,250);return i=>{let a=i.loaded,s=i.lengthComputable?i.total:void 0,o=a-r,u=n(o),c=a<=s;r=a;let p={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:u||void 0,estimated:u&&s&&c?(s-a)/u:void 0,event:i};p[e?"download":"upload"]=!0,t(p)}}var Tb,bh,wh=k(()=>{"use strict";l();Se();oh();ch();Ro();zo();dh();Lo();Nt();Kn();fh();Br();lr();yh();Tb=typeof XMLHttpRequest!="undefined",bh=Tb&&function(t){return new Promise(function(r,n){let i=t.data,a=Ye.from(t.headers).normalize(),s=t.responseType,o;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}D.isFormData(i)&&(Be.isStandardBrowserEnv||Be.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){let w=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(w+":"+g))}let p=Hn(t.baseURL,t.url);c.open(t.method.toUpperCase(),Bn(p,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;let w=Ye.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),v={data:!s||s==="text"||s==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:w,config:t,request:c};qo(function(j){r(j),u()},function(j){n(j),u()},v),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(n(new oe("Request aborted",oe.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new oe("Network Error",oe.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",v=t.transitional||oa;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),n(new oe(g,v.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,t,c)),c=null},Be.isStandardBrowserEnv){let w=(t.withCredentials||hh(p))&&t.xsrfCookieName&&uh.read(t.xsrfCookieName);w&&a.set(t.xsrfHeaderName,w)}i===void 0&&a.setContentType(null),"setRequestHeader"in c&&D.forEach(a.toJSON(),function(g,v){c.setRequestHeader(v,g)}),D.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",gh(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",gh(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=w=>{c&&(n(!w||w.type?new Jt(null,t,c):w),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));let b=$o(p);if(b&&Be.protocols.indexOf(b)===-1){n(new oe("Unsupported protocol "+b+":",oe.ERR_BAD_REQUEST,t));return}c.send(i||null)})}});var ha,_h,vh=k(()=>{l();Se();Co();wh();Nt();ha={http:aa,xhr:bh};D.forEach(ha,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(r){}Object.defineProperty(t,"adapterName",{value:e})}});_h={getAdapter:t=>{t=D.isArray(t)?t:[t];let{length:e}=t,r,n;for(let i=0;i<e&&(r=t[i],!(n=D.isString(r)?ha[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new oe(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(D.hasOwnProp(ha,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!D.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:ha}});function Ko(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jt(null,t)}function da(t){return Ko(t),t.headers=Ye.from(t.headers),t.data=zn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_h.getAdapter(t.adapter||Vr.adapter)(t).then(function(n){return Ko(t),n.data=zn.call(t,t.transformResponse,n),n.headers=Ye.from(n.headers),n},function(n){return $n(n)||(Ko(t),n&&n.response&&(n.response.data=zn.call(t,t.transformResponse,n.response),n.response.headers=Ye.from(n.response.headers))),Promise.reject(n)})}var xh=k(()=>{"use strict";l();ah();Fo();la();Kn();lr();vh()});function Lt(t,e){e=e||{};let r={};function n(c,p,d){return D.isPlainObject(c)&&D.isPlainObject(p)?D.merge.call({caseless:d},c,p):D.isPlainObject(p)?D.merge({},p):D.isArray(p)?p.slice():p}function i(c,p,d){if(D.isUndefined(p)){if(!D.isUndefined(c))return n(void 0,c,d)}else return n(c,p,d)}function a(c,p){if(!D.isUndefined(p))return n(void 0,p)}function s(c,p){if(D.isUndefined(p)){if(!D.isUndefined(c))return n(void 0,c)}else return n(void 0,p)}function o(c,p,d){if(d in e)return n(c,p);if(d in t)return n(void 0,c)}let u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,p)=>i(Ah(c),Ah(p),!0)};return D.forEach(Object.keys(Object.assign({},t,e)),function(p){let d=u[p]||i,b=d(t[p],e[p],p);D.isUndefined(b)&&d!==o||(r[p]=b)}),r}var Ah,Ho=k(()=>{"use strict";l();Se();lr();Ah=t=>t instanceof Ye?t.toJSON():t});var fa,Zo=k(()=>{l();fa="1.4.0"});function Sb(t,e,r){if(typeof t!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-- >0;){let a=n[i],s=e[a];if(s){let o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new oe("option "+a+" must be "+u,oe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new oe("Unknown option "+a,oe.ERR_BAD_OPTION)}}var Jo,Oh,ma,Ph=k(()=>{"use strict";l();Zo();Nt();Jo={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Jo[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});Oh={};Jo.transitional=function(e,r,n){function i(a,s){return"[Axios v"+fa+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(e===!1)throw new oe(i(s," has been removed"+(r?" in "+r:"")),oe.ERR_DEPRECATED);return r&&!Oh[s]&&(Oh[s]=!0),e?e(a,s,o):!0}};ma={assertOptions:Sb,validators:Jo}});var Yt,$r,Zn,Eh=k(()=>{"use strict";l();Se();Ro();Zp();xh();Ho();zo();Ph();lr();Yt=ma.validators,$r=class{constructor(e){this.defaults=e,this.interceptors={request:new No,response:new No}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Lt(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&ma.assertOptions(n,{silentJSONParsing:Yt.transitional(Yt.boolean),forcedJSONParsing:Yt.transitional(Yt.boolean),clarifyTimeoutError:Yt.transitional(Yt.boolean)},!1),i!=null&&(D.isFunction(i)?r.paramsSerializer={serialize:i}:ma.assertOptions(i,{encode:Yt.function,serialize:Yt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s;s=a&&D.merge(a.common,a[r.method]),s&&D.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),r.headers=Ye.concat(s,a);let o=[],u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(u=u&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});let c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let p,d=0,b;if(!u){let g=[da.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,c),b=g.length,p=Promise.resolve(r);d<b;)p=p.then(g[d++],g[d++]);return p}b=o.length;let w=r;for(d=0;d<b;){let g=o[d++],v=o[d++];try{w=g(w)}catch(T){v.call(this,T);break}}try{p=da.call(this,w)}catch(g){return Promise.reject(g)}for(d=0,b=c.length;d<b;)p=p.then(c[d++],c[d++]);return p}getUri(e){e=Lt(this.defaults,e);let r=Hn(e.baseURL,e.url);return Bn(r,e.params,e.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(e){$r.prototype[e]=function(r,n){return this.request(Lt(n||{},{method:e,url:r,data:(n||{}).data}))}});D.forEach(["post","put","patch"],function(e){function r(n){return function(a,s,o){return this.request(Lt(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}$r.prototype[e]=r(),$r.prototype[e+"Form"]=r(!0)});Zn=$r});var Yo,Th,Sh=k(()=>{"use strict";l();Kn();Yo=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});let n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a,s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},e(function(a,s,o){n.reason||(n.reason=new Jt(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},Th=Yo});function Wo(t){return function(r){return t.apply(null,r)}}var Ch=k(()=>{"use strict";l()});function Go(t){return D.isObject(t)&&t.isAxiosError===!0}var Ih=k(()=>{"use strict";l();Se()});var Qo,kh,Rh=k(()=>{l();Qo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qo).forEach(([t,e])=>{Qo[e]=t});kh=Qo});function jh(t){let e=new Zn(t),r=Mn(Zn.prototype.request,e);return D.extend(r,Zn.prototype,e,{allOwnKeys:!0}),D.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return jh(Lt(t,i))},r}var Re,pr,Nh=k(()=>{"use strict";l();Se();Po();Eh();Ho();la();Mo();Kn();Sh();Fo();Zo();qn();Nt();Ch();Ih();lr();Rh();Re=jh(Vr);Re.Axios=Zn;Re.CanceledError=Jt;Re.CancelToken=Th;Re.isCancel=$n;Re.VERSION=fa;Re.toFormData=Zt;Re.AxiosError=oe;Re.Cancel=Re.CanceledError;Re.all=function(e){return Promise.all(e)};Re.spread=Wo;Re.isAxiosError=Go;Re.mergeConfig=Lt;Re.AxiosHeaders=Ye;Re.formToJSON=t=>ua(D.isHTMLForm(t)?new FormData(t):t);Re.HttpStatusCode=kh;Re.default=Re;pr=Re});var eT,tT,rT,nT,iT,aT,sT,oT,uT,cT,lT,pT,hT,dT,fT,Lh=k(()=>{l();Nh();({Axios:eT,AxiosError:tT,CanceledError:rT,isCancel:nT,CancelToken:iT,VERSION:aT,all:sT,Cancel:oT,isAxiosError:uT,spread:cT,toFormData:lT,AxiosHeaders:pT,HttpStatusCode:hT,formToJSON:dT,mergeConfig:fT}=pr)});function Dh(t,e){return f(this,null,function*(){let r=t.getReader();for(;;){let n=yield r.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}})}function Mh(t){let e,r,n,i=!1;return function(s,o){if(o){t(s,0,!0);return}e===void 0?(e=s,r=0,n=-1):e=Cb(e,s);let u=e.length,c=0;for(;r<u;){i&&(e[r]===10&&(c=++r),i=!1);let p=-1;for(;r<u&&p===-1;++r)switch(e[r]){case 58:n===-1&&(n=r-c);break;case 13:i=!0;case 10:p=r;break}if(p===-1)break;t(e.subarray(c,p),n),c=r,n=-1}c===u?e=void 0:c!==0&&(e=e.subarray(c),r-=c)}}function Uh(t,e,r){let n=Xo(),i=new TextDecoder;return function(s,o,u){if(u){Ib(n)||(t==null||t(n),n=Xo());return}if(s.length===0)t==null||t(n),n=Xo();else if(o>0){let c=i.decode(s.subarray(0,o)),p=o+(s[o+1]===32?2:1),d=i.decode(s.subarray(p));switch(c){case"data":n.data=n.data?n.data+`
`+d:d;break;case"event":n.event=d;break;case"id":e==null||e(n.id=d);break;case"retry":{let b=parseInt(d,10);Number.isNaN(b)||r==null||r(n.retry=b);break}}}}}function Cb(t,e){let r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Xo(){return{data:"",event:"",id:"",retry:void 0}}function Ib(t){return t.data===""&&t.event===""&&t.id===""&&t.retry===void 0}var ya,Fh=k(()=>{l();ya="text/event-stream"});function kb(t){try{return JSON.stringify(t)}catch(e){return t}}function Rb(t,e,r){let{validateStatus:n}=r.config;!r.status||!n||n(r.status)?t(r):e(ga(`Request failed with status code ${r.status} and body ${typeof r.data=="string"?r.data:kb(r.data)}`,r.config,null,r.request,r))}function jb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Nb(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function qh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lb(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(qb(e))n=e.toString();else{var i=[];Bh(e,function(o,u){o===null||typeof o=="undefined"||(Vh(o)?u=`${u}[]`:o=[o],Bh(o,function(p){Fb(p)?p=p.toISOString():Ub(p)&&(p=JSON.stringify(p)),i.push(`${qh(u)}=${qh(p)}`)}))}),n=i.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}function Db(t,e){return t&&!jb(e)?Nb(t,e):e}function Mb(t){return typeof t=="undefined"}function Ub(t){return t!==null&&typeof t=="object"}function Fb(t){return toString.call(t)==="[object Date]"}function qb(t){return toString.call(t)==="[object URLSearchParams]"}function Vh(t){return Array.isArray(t)}function Bh(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Vh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Bb(t){return toString.call(t)==="[object FormData]"}function Vb(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Ve(t){return f(this,null,function*(){let e=$b(t),r=yield zb(e,t);return new Promise((n,i)=>{r instanceof Error?i(r):Object.prototype.toString.call(t.settle)==="[object Function]"?t.settle(n,i,r):Rb(n,i,r)})})}function zb(t,e){return f(this,null,function*(){let r;try{r=yield fetch(t)}catch(a){return a&&a.name==="AbortError"?ga("Request aborted",e,"ECONNABORTED",t):a&&a.name==="TimeoutError"?ga("Request timeout",e,"ECONNABORTED",t):ga("Network Error",e,"ERR_NETWORK",t)}let n={};r.headers.forEach((a,s)=>{n[s]=a});let i={ok:r.ok,status:r.status,statusText:r.statusText,headers:n,config:e,request:t};if(r.status>=200&&r.status!==204)if(e.responseType==="stream"){let a=r.headers.get("content-type");if(!(a!=null&&a.startsWith(ya))){if(r.status>=400)return a!=null&&a.startsWith("application/json")?(i.data=yield r.json(),i):(i.data=yield r.text(),i);throw new Error(`Expected content-type to be ${ya}, Actual: ${a}`)}yield Dh(r.body,Mh(Uh(e.onmessage)))}else switch(e.responseType){case"arraybuffer":i.data=yield r.arrayBuffer();break;case"blob":i.data=yield r.blob();break;case"json":i.data=yield r.json();break;case"formData":i.data=yield r.formData();break;default:i.data=yield r.text();break}return i})}function $b(t){let e=new Headers(t.headers);if(t.auth){let s=t.auth.username||"",o=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${s}:${o}`)}`)}let r=t.method.toUpperCase(),n={headers:e,method:r};r!=="GET"&&r!=="HEAD"&&(n.body=t.data,Bb(n.body)&&Vb()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),t.mode&&(n.mode=t.mode),t.cache&&(n.cache=t.cache),t.integrity&&(n.integrity=t.integrity),t.redirect&&(n.redirect=t.redirect),t.referrer&&(n.referrer=t.referrer),t.timeout&&t.timeout>0&&(n.signal=AbortSignal.timeout(t.timeout)),t.signal&&(n.signal=t.signal),Mb(t.withCredentials)||(n.credentials=t.withCredentials?"include":"omit"),t.responseType==="stream"&&n.headers.set("Accept",ya);let i=Db(t.baseURL,t.url),a=Lb(i,t.params,t.paramsSerializer);return new Request(a,n)}function ga(t,e,r,n,i){if(pr.AxiosError&&typeof pr.AxiosError=="function")return new pr.AxiosError(t,pr.AxiosError[r],e,n,i);let a=new Error(t);return Kb(a,e,r,n,i)}function Kb(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}var Kr=k(()=>{l();Lh();Fh()});var Jn,eu=k(()=>{l();Jn=(t,e)=>t.reduce((r,n,i)=>{let a=Math.floor(i/e),s=r[a]||[];return r[a]=s.concat([n]),r},[])});var Kh=Q((zh,$h)=>{l();(function(t){var e;typeof zh=="object"?$h.exports=t():typeof define=="function"&&define.amd?define(t):(typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"&&(e=self),e.objectHash=t())})(function(){return function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var c=typeof jn=="function"&&jn;if(!u&&c)return c(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}u=r[o]={exports:{}},e[o][0].call(u.exports,function(p){var d=e[o][1][p];return i(d||p)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a=typeof jn=="function"&&jn,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){"use strict";var b=t("crypto");function w(P,N){N=T(P,N);var x;return(x=N.algorithm!=="passthrough"?b.createHash(N.algorithm):new q).write===void 0&&(x.write=x.update,x.end=x.update),I(N,x).dispatch(P),x.update||x.end(""),x.digest?x.digest(N.encoding==="buffer"?void 0:N.encoding):(P=x.read(),N.encoding!=="buffer"?P.toString(N.encoding):P)}(r=e.exports=w).sha1=function(P){return w(P)},r.keys=function(P){return w(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(P){return w(P,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(P){return w(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var g=b.getHashes?b.getHashes().slice():["sha1","md5"],v=(g.push("passthrough"),["buffer","hex","binary","base64"]);function T(P,N){var x={};if(x.algorithm=(N=N||{}).algorithm||"sha1",x.encoding=N.encoding||"hex",x.excludeValues=!!N.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=N.ignoreUnknown===!0,x.respectType=N.respectType!==!1,x.respectFunctionNames=N.respectFunctionNames!==!1,x.respectFunctionProperties=N.respectFunctionProperties!==!1,x.unorderedArrays=N.unorderedArrays===!0,x.unorderedSets=N.unorderedSets!==!1,x.unorderedObjects=N.unorderedObjects!==!1,x.replacer=N.replacer||void 0,x.excludeKeys=N.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var O=0;O<g.length;++O)g[O].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=g[O]);if(g.indexOf(x.algorithm)===-1)throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+g.join(", "));if(v.indexOf(x.encoding)===-1&&x.algorithm!=="passthrough")throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+v.join(", "));return x}function j(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function I(P,N,x){x=x||[];function O(_){return N.update?N.update(_,"utf8"):N.write(_,"utf8")}return{dispatch:function(_){return this["_"+((_=P.replacer?P.replacer(_):_)===null?"null":typeof _)](_)},_object:function(_){var C,L=Object.prototype.toString.call(_),Z=/\[object (.*)\]/i.exec(L);if(Z=(Z=Z?Z[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=x.indexOf(_)))return this.dispatch("[CIRCULAR:"+L+"]");if(x.push(_),a!==void 0&&a.isBuffer&&a.isBuffer(_))return O("buffer:"),O(_);if(Z==="object"||Z==="function"||Z==="asyncfunction")return L=Object.keys(_),P.unorderedObjects&&(L=L.sort()),P.respectType===!1||j(_)||L.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(L=L.filter(function(J){return!P.excludeKeys(J)})),O("object:"+L.length+":"),C=this,L.forEach(function(J){C.dispatch(J),O(":"),P.excludeValues||C.dispatch(_[J]),O(",")});if(!this["_"+Z]){if(P.ignoreUnknown)return O("["+Z+"]");throw new Error('Unknown object type "'+Z+'"')}this["_"+Z](_)},_array:function(_,J){J=J!==void 0?J:P.unorderedArrays!==!1;var L=this;if(O("array:"+_.length+":"),!J||_.length<=1)return _.forEach(function(te){return L.dispatch(te)});var Z=[],J=_.map(function(te){var $=new q,le=x.slice();return I(P,$,le).dispatch(te),Z=Z.concat(le.slice(x.length)),$.read().toString()});return x=x.concat(Z),J.sort(),this._array(J,!1)},_date:function(_){return O("date:"+_.toJSON())},_symbol:function(_){return O("symbol:"+_.toString())},_error:function(_){return O("error:"+_.toString())},_boolean:function(_){return O("bool:"+_.toString())},_string:function(_){O("string:"+_.length+":"),O(_.toString())},_function:function(_){O("fn:"),j(_)?this.dispatch("[native]"):this.dispatch(_.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(_.name)),P.respectFunctionProperties&&this._object(_)},_number:function(_){return O("number:"+_.toString())},_xml:function(_){return O("xml:"+_.toString())},_null:function(){return O("Null")},_undefined:function(){return O("Undefined")},_regexp:function(_){return O("regex:"+_.toString())},_uint8array:function(_){return O("uint8array:"),this.dispatch(Array.prototype.slice.call(_))},_uint8clampedarray:function(_){return O("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(_))},_int8array:function(_){return O("int8array:"),this.dispatch(Array.prototype.slice.call(_))},_uint16array:function(_){return O("uint16array:"),this.dispatch(Array.prototype.slice.call(_))},_int16array:function(_){return O("int16array:"),this.dispatch(Array.prototype.slice.call(_))},_uint32array:function(_){return O("uint32array:"),this.dispatch(Array.prototype.slice.call(_))},_int32array:function(_){return O("int32array:"),this.dispatch(Array.prototype.slice.call(_))},_float32array:function(_){return O("float32array:"),this.dispatch(Array.prototype.slice.call(_))},_float64array:function(_){return O("float64array:"),this.dispatch(Array.prototype.slice.call(_))},_arraybuffer:function(_){return O("arraybuffer:"),this.dispatch(new Uint8Array(_))},_url:function(_){return O("url:"+_.toString())},_map:function(_){return O("map:"),_=Array.from(_),this._array(_,P.unorderedSets!==!1)},_set:function(_){return O("set:"),_=Array.from(_),this._array(_,P.unorderedSets!==!1)},_file:function(_){return O("file:"),this.dispatch([_.name,_.size,_.type,_.lastModfied])},_blob:function(){if(P.ignoreUnknown)return O("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return O("domwindow")},_bigint:function(_){return O("bigint:"+_.toString())},_process:function(){return O("process")},_timer:function(){return O("timer")},_pipe:function(){return O("pipe")},_tcp:function(){return O("tcp")},_udp:function(){return O("udp")},_tty:function(){return O("tty")},_statwatcher:function(){return O("statwatcher")},_securecontext:function(){return O("securecontext")},_connection:function(){return O("connection")},_zlib:function(){return O("zlib")},_context:function(){return O("context")},_nodescript:function(){return O("nodescript")},_httpparser:function(){return O("httpparser")},_dataview:function(){return O("dataview")},_signal:function(){return O("signal")},_fsevent:function(){return O("fsevent")},_tlswrap:function(){return O("tlswrap")}}}function q(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}r.writeToStream=function(P,N,x){return x===void 0&&(x=N,N={}),I(N=T(P,N),x).dispatch(P)}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){(function(b){"use strict";var w=typeof Uint8Array!="undefined"?Uint8Array:Array,g="+".charCodeAt(0),v="/".charCodeAt(0),T="0".charCodeAt(0),j="a".charCodeAt(0),I="A".charCodeAt(0),q="-".charCodeAt(0),P="_".charCodeAt(0);function N(x){return x=x.charCodeAt(0),x===g||x===q?62:x===v||x===P?63:x<T?-1:x<T+10?x-T+26+26:x<I+26?x-I:x<j+26?x-j+26:void 0}b.toByteArray=function(x){var O,_;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var C=x.length,C=x.charAt(C-2)==="="?2:x.charAt(C-1)==="="?1:0,L=new w(3*x.length/4-C),Z=0<C?x.length-4:x.length,J=0;function te($){L[J++]=$}for(O=0;O<Z;O+=4,0)te((16711680&(_=N(x.charAt(O))<<18|N(x.charAt(O+1))<<12|N(x.charAt(O+2))<<6|N(x.charAt(O+3))))>>16),te((65280&_)>>8),te(255&_);return C==2?te(255&(_=N(x.charAt(O))<<2|N(x.charAt(O+1))>>4)):C==1&&(te((_=N(x.charAt(O))<<10|N(x.charAt(O+1))<<4|N(x.charAt(O+2))>>2)>>8&255),te(255&_)),L},b.fromByteArray=function(x){var O,_,C,L,Z=x.length%3,J="";function te($){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($)}for(O=0,C=x.length-Z;O<C;O+=3)_=(x[O]<<16)+(x[O+1]<<8)+x[O+2],J+=te((L=_)>>18&63)+te(L>>12&63)+te(L>>6&63)+te(63&L);switch(Z){case 1:J=(J+=te((_=x[x.length-1])>>2))+te(_<<4&63)+"==";break;case 2:J=(J=(J+=te((_=(x[x.length-2]<<8)+x[x.length-1])>>10))+te(_>>4&63))+te(_<<2&63)+"="}return J}})(r===void 0?this.base64js={}:r)}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,r){(function(n,i,g,s,o,u,c,p,d){var b=t("base64-js"),w=t("ieee754");function g(y,A,E){if(!(this instanceof g))return new g(y,A,E);var M,U,z,ue,Ae=typeof y;if(A==="base64"&&Ae=="string")for(y=(ue=y).trim?ue.trim():ue.replace(/^\s+|\s+$/g,"");y.length%4!=0;)y+="=";if(Ae=="number")M=pe(y);else if(Ae=="string")M=g.byteLength(y,A);else{if(Ae!="object")throw new Error("First argument needs to be a number, array or string.");M=pe(y.length)}if(g._useTypedArrays?U=g._augment(new Uint8Array(M)):((U=this).length=M,U._isBuffer=!0),g._useTypedArrays&&typeof y.byteLength=="number")U._set(y);else if(me(ue=y)||g.isBuffer(ue)||ue&&typeof ue=="object"&&typeof ue.length=="number")for(z=0;z<M;z++)g.isBuffer(y)?U[z]=y.readUInt8(z):U[z]=y[z];else if(Ae=="string")U.write(y,0,A);else if(Ae=="number"&&!g._useTypedArrays&&!E)for(z=0;z<M;z++)U[z]=0;return U}function v(y,A,E,M){return g._charsWritten=ur(function(U){for(var z=[],ue=0;ue<U.length;ue++)z.push(255&U.charCodeAt(ue));return z}(A),y,E,M)}function T(y,A,E,M){return g._charsWritten=ur(function(U){for(var z,ue,Ae=[],Ne=0;Ne<U.length;Ne++)ue=U.charCodeAt(Ne),z=ue>>8,ue=ue%256,Ae.push(ue),Ae.push(z);return Ae}(A),y,E,M)}function j(y,A,E){var M="";E=Math.min(y.length,E);for(var U=A;U<E;U++)M+=String.fromCharCode(y[U]);return M}function I(y,A,E,z){z||(V(typeof E=="boolean","missing or invalid endian"),V(A!=null,"missing offset"),V(A+1<y.length,"Trying to read beyond buffer length"));var U,z=y.length;if(!(z<=A))return E?(U=y[A],A+1<z&&(U|=y[A+1]<<8)):(U=y[A]<<8,A+1<z&&(U|=y[A+1])),U}function q(y,A,E,z){z||(V(typeof E=="boolean","missing or invalid endian"),V(A!=null,"missing offset"),V(A+3<y.length,"Trying to read beyond buffer length"));var U,z=y.length;if(!(z<=A))return E?(A+2<z&&(U=y[A+2]<<16),A+1<z&&(U|=y[A+1]<<8),U|=y[A],A+3<z&&(U+=y[A+3]<<24>>>0)):(A+1<z&&(U=y[A+1]<<16),A+2<z&&(U|=y[A+2]<<8),A+3<z&&(U|=y[A+3]),U+=y[A]<<24>>>0),U}function P(y,A,E,M){if(M||(V(typeof E=="boolean","missing or invalid endian"),V(A!=null,"missing offset"),V(A+1<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return M=I(y,A,E,!0),32768&M?-1*(65535-M+1):M}function N(y,A,E,M){if(M||(V(typeof E=="boolean","missing or invalid endian"),V(A!=null,"missing offset"),V(A+3<y.length,"Trying to read beyond buffer length")),!(y.length<=A))return M=q(y,A,E,!0),2147483648&M?-1*(4294967295-M+1):M}function x(y,A,E,M){return M||(V(typeof E=="boolean","missing or invalid endian"),V(A+3<y.length,"Trying to read beyond buffer length")),w.read(y,A,E,23,4)}function O(y,A,E,M){return M||(V(typeof E=="boolean","missing or invalid endian"),V(A+7<y.length,"Trying to read beyond buffer length")),w.read(y,A,E,52,8)}function _(y,A,E,M,U){if(U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+1<y.length,"trying to write beyond buffer length"),Rr(A,65535)),U=y.length,!(U<=E))for(var z=0,ue=Math.min(U-E,2);z<ue;z++)y[E+z]=(A&255<<8*(M?z:1-z))>>>8*(M?z:1-z)}function C(y,A,E,M,U){if(U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+3<y.length,"trying to write beyond buffer length"),Rr(A,4294967295)),U=y.length,!(U<=E))for(var z=0,ue=Math.min(U-E,4);z<ue;z++)y[E+z]=A>>>8*(M?z:3-z)&255}function L(y,A,E,M,U){U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+1<y.length,"Trying to write beyond buffer length"),jr(A,32767,-32768)),y.length<=E||_(y,0<=A?A:65535+A+1,E,M,U)}function Z(y,A,E,M,U){U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+3<y.length,"Trying to write beyond buffer length"),jr(A,2147483647,-2147483648)),y.length<=E||C(y,0<=A?A:4294967295+A+1,E,M,U)}function J(y,A,E,M,U){U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+3<y.length,"Trying to write beyond buffer length"),In(A,34028234663852886e22,-34028234663852886e22)),y.length<=E||w.write(y,A,E,M,23,4)}function te(y,A,E,M,U){U||(V(A!=null,"missing value"),V(typeof M=="boolean","missing or invalid endian"),V(E!=null,"missing offset"),V(E+7<y.length,"Trying to write beyond buffer length"),In(A,17976931348623157e292,-17976931348623157e292)),y.length<=E||w.write(y,A,E,M,52,8)}r.Buffer=g,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,g.poolSize=8192,g._useTypedArrays=function(){try{var y=new ArrayBuffer(0),A=new Uint8Array(y);return A.foo=function(){return 42},A.foo()===42&&typeof A.subarray=="function"}catch(E){return!1}}(),g.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.isBuffer=function(y){return!(y==null||!y._isBuffer)},g.byteLength=function(y,A){var E;switch(y+="",A||"utf8"){case"hex":E=y.length/2;break;case"utf8":case"utf-8":E=ot(y).length;break;case"ascii":case"binary":case"raw":E=y.length;break;case"base64":E=Sn(y).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=2*y.length;break;default:throw new Error("Unknown encoding")}return E},g.concat=function(y,A){if(V(me(y),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),y.length===0)return new g(0);if(y.length===1)return y[0];if(typeof A!="number")for(U=A=0;U<y.length;U++)A+=y[U].length;for(var E=new g(A),M=0,U=0;U<y.length;U++){var z=y[U];z.copy(E,M),M+=z.length}return E},g.prototype.write=function(y,A,E,M){isFinite(A)?isFinite(E)||(M=E,E=void 0):(Ne=M,M=A,A=E,E=Ne),A=Number(A)||0;var U,z,ue,Ae,Ne=this.length-A;switch((!E||Ne<(E=Number(E)))&&(E=Ne),M=String(M||"utf8").toLowerCase()){case"hex":U=function(ft,Xe,et,Le){et=Number(et)||0;var Te=ft.length-et;(!Le||Te<(Le=Number(Le)))&&(Le=Te),V((Te=Xe.length)%2==0,"Invalid hex string"),Te/2<Le&&(Le=Te/2);for(var Nr=0;Nr<Le;Nr++){var hl=parseInt(Xe.substr(2*Nr,2),16);V(!isNaN(hl),"Invalid hex string"),ft[et+Nr]=hl}return g._charsWritten=2*Nr,Nr}(this,y,A,E);break;case"utf8":case"utf-8":z=this,ue=A,Ae=E,U=g._charsWritten=ur(ot(y),z,ue,Ae);break;case"ascii":case"binary":U=v(this,y,A,E);break;case"base64":z=this,ue=A,Ae=E,U=g._charsWritten=ur(Sn(y),z,ue,Ae);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":U=T(this,y,A,E);break;default:throw new Error("Unknown encoding")}return U},g.prototype.toString=function(y,A,E){var M,U,z,ue,Ae=this;if(y=String(y||"utf8").toLowerCase(),A=Number(A)||0,(E=E!==void 0?Number(E):Ae.length)===A)return"";switch(y){case"hex":M=function(Ne,ft,Xe){var et=Ne.length;(!ft||ft<0)&&(ft=0),(!Xe||Xe<0||et<Xe)&&(Xe=et);for(var Le="",Te=ft;Te<Xe;Te++)Le+=be(Ne[Te]);return Le}(Ae,A,E);break;case"utf8":case"utf-8":M=function(Ne,ft,Xe){var et="",Le="";Xe=Math.min(Ne.length,Xe);for(var Te=ft;Te<Xe;Te++)Ne[Te]<=127?(et+=Cn(Le)+String.fromCharCode(Ne[Te]),Le=""):Le+="%"+Ne[Te].toString(16);return et+Cn(Le)}(Ae,A,E);break;case"ascii":case"binary":M=j(Ae,A,E);break;case"base64":U=Ae,ue=E,M=(z=A)===0&&ue===U.length?b.fromByteArray(U):b.fromByteArray(U.slice(z,ue));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":M=function(Ne,ft,Xe){for(var et=Ne.slice(ft,Xe),Le="",Te=0;Te<et.length;Te+=2)Le+=String.fromCharCode(et[Te]+256*et[Te+1]);return Le}(Ae,A,E);break;default:throw new Error("Unknown encoding")}return M},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},g.prototype.copy=function(y,A,E,M){if(A=A||0,(M=M||M===0?M:this.length)!==(E=E||0)&&y.length!==0&&this.length!==0){V(E<=M,"sourceEnd < sourceStart"),V(0<=A&&A<y.length,"targetStart out of bounds"),V(0<=E&&E<this.length,"sourceStart out of bounds"),V(0<=M&&M<=this.length,"sourceEnd out of bounds"),M>this.length&&(M=this.length);var U=(M=y.length-A<M-E?y.length-A+E:M)-E;if(U<100||!g._useTypedArrays)for(var z=0;z<U;z++)y[z+A]=this[z+E];else y._set(this.subarray(E,E+U),A)}},g.prototype.slice=function(y,A){var E=this.length;if(y=le(y,E,0),A=le(A,E,E),g._useTypedArrays)return g._augment(this.subarray(y,A));for(var M=A-y,U=new g(M,void 0,!0),z=0;z<M;z++)U[z]=this[z+y];return U},g.prototype.get=function(y){return this.readUInt8(y)},g.prototype.set=function(y,A){return this.writeUInt8(y,A)},g.prototype.readUInt8=function(y,A){if(A||(V(y!=null,"missing offset"),V(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return this[y]},g.prototype.readUInt16LE=function(y,A){return I(this,y,!0,A)},g.prototype.readUInt16BE=function(y,A){return I(this,y,!1,A)},g.prototype.readUInt32LE=function(y,A){return q(this,y,!0,A)},g.prototype.readUInt32BE=function(y,A){return q(this,y,!1,A)},g.prototype.readInt8=function(y,A){if(A||(V(y!=null,"missing offset"),V(y<this.length,"Trying to read beyond buffer length")),!(y>=this.length))return 128&this[y]?-1*(255-this[y]+1):this[y]},g.prototype.readInt16LE=function(y,A){return P(this,y,!0,A)},g.prototype.readInt16BE=function(y,A){return P(this,y,!1,A)},g.prototype.readInt32LE=function(y,A){return N(this,y,!0,A)},g.prototype.readInt32BE=function(y,A){return N(this,y,!1,A)},g.prototype.readFloatLE=function(y,A){return x(this,y,!0,A)},g.prototype.readFloatBE=function(y,A){return x(this,y,!1,A)},g.prototype.readDoubleLE=function(y,A){return O(this,y,!0,A)},g.prototype.readDoubleBE=function(y,A){return O(this,y,!1,A)},g.prototype.writeUInt8=function(y,A,E){E||(V(y!=null,"missing value"),V(A!=null,"missing offset"),V(A<this.length,"trying to write beyond buffer length"),Rr(y,255)),A>=this.length||(this[A]=y)},g.prototype.writeUInt16LE=function(y,A,E){_(this,y,A,!0,E)},g.prototype.writeUInt16BE=function(y,A,E){_(this,y,A,!1,E)},g.prototype.writeUInt32LE=function(y,A,E){C(this,y,A,!0,E)},g.prototype.writeUInt32BE=function(y,A,E){C(this,y,A,!1,E)},g.prototype.writeInt8=function(y,A,E){E||(V(y!=null,"missing value"),V(A!=null,"missing offset"),V(A<this.length,"Trying to write beyond buffer length"),jr(y,127,-128)),A>=this.length||(0<=y?this.writeUInt8(y,A,E):this.writeUInt8(255+y+1,A,E))},g.prototype.writeInt16LE=function(y,A,E){L(this,y,A,!0,E)},g.prototype.writeInt16BE=function(y,A,E){L(this,y,A,!1,E)},g.prototype.writeInt32LE=function(y,A,E){Z(this,y,A,!0,E)},g.prototype.writeInt32BE=function(y,A,E){Z(this,y,A,!1,E)},g.prototype.writeFloatLE=function(y,A,E){J(this,y,A,!0,E)},g.prototype.writeFloatBE=function(y,A,E){J(this,y,A,!1,E)},g.prototype.writeDoubleLE=function(y,A,E){te(this,y,A,!0,E)},g.prototype.writeDoubleBE=function(y,A,E){te(this,y,A,!1,E)},g.prototype.fill=function(y,A,E){if(A=A||0,E=E||this.length,V(typeof(y=typeof(y=y||0)=="string"?y.charCodeAt(0):y)=="number"&&!isNaN(y),"value is not a number"),V(A<=E,"end < start"),E!==A&&this.length!==0){V(0<=A&&A<this.length,"start out of bounds"),V(0<=E&&E<=this.length,"end out of bounds");for(var M=A;M<E;M++)this[M]=y}},g.prototype.inspect=function(){for(var y=[],A=this.length,E=0;E<A;E++)if(y[E]=be(this[E]),E===r.INSPECT_MAX_BYTES){y[E+1]="...";break}return"<Buffer "+y.join(" ")+">"},g.prototype.toArrayBuffer=function(){if(typeof Uint8Array=="undefined")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(g._useTypedArrays)return new g(this).buffer;for(var y=new Uint8Array(this.length),A=0,E=y.length;A<E;A+=1)y[A]=this[A];return y.buffer};var $=g.prototype;function le(y,A,E){return typeof y!="number"?E:A<=(y=~~y)?A:0<=y||0<=(y+=A)?y:0}function pe(y){return(y=~~Math.ceil(+y))<0?0:y}function me(y){return(Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"})(y)}function be(y){return y<16?"0"+y.toString(16):y.toString(16)}function ot(y){for(var A=[],E=0;E<y.length;E++){var M=y.charCodeAt(E);if(M<=127)A.push(y.charCodeAt(E));else for(var U=E,z=(55296<=M&&M<=57343&&E++,encodeURIComponent(y.slice(U,E+1)).substr(1).split("%")),ue=0;ue<z.length;ue++)A.push(parseInt(z[ue],16))}return A}function Sn(y){return b.toByteArray(y)}function ur(y,A,E,M){for(var U=0;U<M&&!(U+E>=A.length||U>=y.length);U++)A[U+E]=y[U];return U}function Cn(y){try{return decodeURIComponent(y)}catch(A){return String.fromCharCode(65533)}}function Rr(y,A){V(typeof y=="number","cannot write a non-number as a number"),V(0<=y,"specified a negative value for writing an unsigned value"),V(y<=A,"value is larger than maximum value for type"),V(Math.floor(y)===y,"value has a fractional component")}function jr(y,A,E){V(typeof y=="number","cannot write a non-number as a number"),V(y<=A,"value larger than maximum allowed value"),V(E<=y,"value smaller than minimum allowed value"),V(Math.floor(y)===y,"value has a fractional component")}function In(y,A,E){V(typeof y=="number","cannot write a non-number as a number"),V(y<=A,"value larger than maximum allowed value"),V(E<=y,"value smaller than minimum allowed value")}function V(y,A){if(!y)throw new Error(A||"Failed assertion")}g._augment=function(y){return y._isBuffer=!0,y._get=y.get,y._set=y.set,y.get=$.get,y.set=$.set,y.write=$.write,y.toString=$.toString,y.toLocaleString=$.toString,y.toJSON=$.toJSON,y.copy=$.copy,y.slice=$.slice,y.readUInt8=$.readUInt8,y.readUInt16LE=$.readUInt16LE,y.readUInt16BE=$.readUInt16BE,y.readUInt32LE=$.readUInt32LE,y.readUInt32BE=$.readUInt32BE,y.readInt8=$.readInt8,y.readInt16LE=$.readInt16LE,y.readInt16BE=$.readInt16BE,y.readInt32LE=$.readInt32LE,y.readInt32BE=$.readInt32BE,y.readFloatLE=$.readFloatLE,y.readFloatBE=$.readFloatBE,y.readDoubleLE=$.readDoubleLE,y.readDoubleBE=$.readDoubleBE,y.writeUInt8=$.writeUInt8,y.writeUInt16LE=$.writeUInt16LE,y.writeUInt16BE=$.writeUInt16BE,y.writeUInt32LE=$.writeUInt32LE,y.writeUInt32BE=$.writeUInt32BE,y.writeInt8=$.writeInt8,y.writeInt16LE=$.writeInt16LE,y.writeInt16BE=$.writeInt16BE,y.writeInt32LE=$.writeInt32LE,y.writeInt32BE=$.writeInt32BE,y.writeFloatLE=$.writeFloatLE,y.writeFloatBE=$.writeFloatBE,y.writeDoubleLE=$.writeDoubleLE,y.writeDoubleBE=$.writeDoubleBE,y.fill=$.fill,y.inspect=$.inspect,y.toArrayBuffer=$.toArrayBuffer,y}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,r){(function(n,i,b,s,o,u,c,p,d){var b=t("buffer").Buffer,w=4,g=new b(w);g.fill(0),e.exports={hash:function(v,T,j,I){for(var q=T(function(_,C){_.length%w!=0&&(L=_.length+(w-_.length%w),_=b.concat([_,g],L));for(var L,Z=[],J=C?_.readInt32BE:_.readInt32LE,te=0;te<_.length;te+=w)Z.push(J.call(_,te));return Z}(v=b.isBuffer(v)?v:new b(v),I),8*v.length),T=I,P=new b(j),N=T?P.writeInt32BE:P.writeInt32LE,x=0;x<q.length;x++)N.call(P,q[x],4*x,!0);return P}}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,r){(function(n,i,b,s,o,u,c,p,d){var b=t("buffer").Buffer,w=t("./sha"),g=t("./sha256"),v=t("./rng"),T={sha1:w,sha256:g,md5:t("./md5")},j=64,I=new b(j);function q(_,C){var L=T[_=_||"sha1"],Z=[];return L||P("algorithm:",_,"is not yet supported"),{update:function(J){return b.isBuffer(J)||(J=new b(J)),Z.push(J),J.length,this},digest:function(J){var te=b.concat(Z),te=C?function($,le,pe){b.isBuffer(le)||(le=new b(le)),b.isBuffer(pe)||(pe=new b(pe)),le.length>j?le=$(le):le.length<j&&(le=b.concat([le,I],j));for(var me=new b(j),be=new b(j),ot=0;ot<j;ot++)me[ot]=54^le[ot],be[ot]=92^le[ot];return pe=$(b.concat([me,pe])),$(b.concat([be,pe]))}(L,C,te):L(te);return Z=null,J?te.toString(J):te}}}function P(){var _=[].slice.call(arguments).join(" ");throw new Error([_,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}I.fill(0),r.createHash=function(_){return q(_)},r.createHmac=q,r.randomBytes=function(_,C){if(!C||!C.call)return new b(v(_));try{C.call(this,void 0,new b(v(_)))}catch(L){C(L)}};var N,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],O=function(_){r[_]=function(){P("sorry,",_,"is not implemented yet")}};for(N in x)O(x[N],N)}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){var b=t("./helpers");function w(P,N){P[N>>5]|=128<<N%32,P[14+(N+64>>>9<<4)]=N;for(var x=1732584193,O=-271733879,_=-1732584194,C=271733878,L=0;L<P.length;L+=16){var Z=x,J=O,te=_,$=C,x=v(x,O,_,C,P[L+0],7,-680876936),C=v(C,x,O,_,P[L+1],12,-389564586),_=v(_,C,x,O,P[L+2],17,606105819),O=v(O,_,C,x,P[L+3],22,-1044525330);x=v(x,O,_,C,P[L+4],7,-176418897),C=v(C,x,O,_,P[L+5],12,1200080426),_=v(_,C,x,O,P[L+6],17,-1473231341),O=v(O,_,C,x,P[L+7],22,-45705983),x=v(x,O,_,C,P[L+8],7,1770035416),C=v(C,x,O,_,P[L+9],12,-1958414417),_=v(_,C,x,O,P[L+10],17,-42063),O=v(O,_,C,x,P[L+11],22,-1990404162),x=v(x,O,_,C,P[L+12],7,1804603682),C=v(C,x,O,_,P[L+13],12,-40341101),_=v(_,C,x,O,P[L+14],17,-1502002290),x=T(x,O=v(O,_,C,x,P[L+15],22,1236535329),_,C,P[L+1],5,-165796510),C=T(C,x,O,_,P[L+6],9,-1069501632),_=T(_,C,x,O,P[L+11],14,643717713),O=T(O,_,C,x,P[L+0],20,-373897302),x=T(x,O,_,C,P[L+5],5,-701558691),C=T(C,x,O,_,P[L+10],9,38016083),_=T(_,C,x,O,P[L+15],14,-660478335),O=T(O,_,C,x,P[L+4],20,-405537848),x=T(x,O,_,C,P[L+9],5,568446438),C=T(C,x,O,_,P[L+14],9,-1019803690),_=T(_,C,x,O,P[L+3],14,-187363961),O=T(O,_,C,x,P[L+8],20,1163531501),x=T(x,O,_,C,P[L+13],5,-1444681467),C=T(C,x,O,_,P[L+2],9,-51403784),_=T(_,C,x,O,P[L+7],14,1735328473),x=j(x,O=T(O,_,C,x,P[L+12],20,-1926607734),_,C,P[L+5],4,-378558),C=j(C,x,O,_,P[L+8],11,-2022574463),_=j(_,C,x,O,P[L+11],16,1839030562),O=j(O,_,C,x,P[L+14],23,-35309556),x=j(x,O,_,C,P[L+1],4,-1530992060),C=j(C,x,O,_,P[L+4],11,1272893353),_=j(_,C,x,O,P[L+7],16,-155497632),O=j(O,_,C,x,P[L+10],23,-1094730640),x=j(x,O,_,C,P[L+13],4,681279174),C=j(C,x,O,_,P[L+0],11,-358537222),_=j(_,C,x,O,P[L+3],16,-722521979),O=j(O,_,C,x,P[L+6],23,76029189),x=j(x,O,_,C,P[L+9],4,-640364487),C=j(C,x,O,_,P[L+12],11,-421815835),_=j(_,C,x,O,P[L+15],16,530742520),x=I(x,O=j(O,_,C,x,P[L+2],23,-995338651),_,C,P[L+0],6,-198630844),C=I(C,x,O,_,P[L+7],10,1126891415),_=I(_,C,x,O,P[L+14],15,-1416354905),O=I(O,_,C,x,P[L+5],21,-57434055),x=I(x,O,_,C,P[L+12],6,1700485571),C=I(C,x,O,_,P[L+3],10,-1894986606),_=I(_,C,x,O,P[L+10],15,-1051523),O=I(O,_,C,x,P[L+1],21,-2054922799),x=I(x,O,_,C,P[L+8],6,1873313359),C=I(C,x,O,_,P[L+15],10,-30611744),_=I(_,C,x,O,P[L+6],15,-1560198380),O=I(O,_,C,x,P[L+13],21,1309151649),x=I(x,O,_,C,P[L+4],6,-145523070),C=I(C,x,O,_,P[L+11],10,-1120210379),_=I(_,C,x,O,P[L+2],15,718787259),O=I(O,_,C,x,P[L+9],21,-343485551),x=q(x,Z),O=q(O,J),_=q(_,te),C=q(C,$)}return Array(x,O,_,C)}function g(P,N,x,O,_,C){return q((N=q(q(N,P),q(O,C)))<<_|N>>>32-_,x)}function v(P,N,x,O,_,C,L){return g(N&x|~N&O,P,N,_,C,L)}function T(P,N,x,O,_,C,L){return g(N&O|x&~O,P,N,_,C,L)}function j(P,N,x,O,_,C,L){return g(N^x^O,P,N,_,C,L)}function I(P,N,x,O,_,C,L){return g(x^(N|~O),P,N,_,C,L)}function q(P,N){var x=(65535&P)+(65535&N);return(P>>16)+(N>>16)+(x>>16)<<16|65535&x}e.exports=function(P){return b.hash(P,w,16)}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){var b;e.exports=b||function(w){for(var g,v=new Array(w),T=0;T<w;T++)!(3&T)&&(g=4294967296*Math.random()),v[T]=g>>>((3&T)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){var b=t("./helpers");function w(T,j){T[j>>5]|=128<<24-j%32,T[15+(j+64>>9<<4)]=j;for(var I,q,P,N=Array(80),x=1732584193,O=-271733879,_=-1732584194,C=271733878,L=-1009589776,Z=0;Z<T.length;Z+=16){for(var J=x,te=O,$=_,le=C,pe=L,me=0;me<80;me++){N[me]=me<16?T[Z+me]:v(N[me-3]^N[me-8]^N[me-14]^N[me-16],1);var be=g(g(v(x,5),(be=O,q=_,P=C,(I=me)<20?be&q|~be&P:!(I<40)&&I<60?be&q|be&P|q&P:be^q^P)),g(g(L,N[me]),(I=me)<20?1518500249:I<40?1859775393:I<60?-1894007588:-899497514)),L=C,C=_,_=v(O,30),O=x,x=be}x=g(x,J),O=g(O,te),_=g(_,$),C=g(C,le),L=g(L,pe)}return Array(x,O,_,C,L)}function g(T,j){var I=(65535&T)+(65535&j);return(T>>16)+(j>>16)+(I>>16)<<16|65535&I}function v(T,j){return T<<j|T>>>32-j}e.exports=function(T){return b.hash(T,w,20,!0)}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){function b(j,I){var q=(65535&j)+(65535&I);return(j>>16)+(I>>16)+(q>>16)<<16|65535&q}function w(j,I){var q,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),N=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);j[I>>5]|=128<<24-I%32,j[15+(I+64>>9<<4)]=I;for(var O,_,C=0;C<j.length;C+=16){for(var L=N[0],Z=N[1],J=N[2],te=N[3],$=N[4],le=N[5],pe=N[6],me=N[7],be=0;be<64;be++)x[be]=be<16?j[be+C]:b(b(b((_=x[be-2],v(_,17)^v(_,19)^T(_,10)),x[be-7]),(_=x[be-15],v(_,7)^v(_,18)^T(_,3))),x[be-16]),q=b(b(b(b(me,v(_=$,6)^v(_,11)^v(_,25)),$&le^~$&pe),P[be]),x[be]),O=b(v(O=L,2)^v(O,13)^v(O,22),L&Z^L&J^Z&J),me=pe,pe=le,le=$,$=b(te,q),te=J,J=Z,Z=L,L=b(q,O);N[0]=b(L,N[0]),N[1]=b(Z,N[1]),N[2]=b(J,N[2]),N[3]=b(te,N[3]),N[4]=b($,N[4]),N[5]=b(le,N[5]),N[6]=b(pe,N[6]),N[7]=b(me,N[7])}return N}var g=t("./helpers"),v=function(j,I){return j>>>I|j<<32-I},T=function(j,I){return j>>>I};e.exports=function(j){return g.hash(j,w,32,!0)}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){r.read=function(b,w,g,v,C){var j,I,q=8*C-v-1,P=(1<<q)-1,N=P>>1,x=-7,O=g?C-1:0,_=g?-1:1,C=b[w+O];for(O+=_,j=C&(1<<-x)-1,C>>=-x,x+=q;0<x;j=256*j+b[w+O],O+=_,x-=8);for(I=j&(1<<-x)-1,j>>=-x,x+=v;0<x;I=256*I+b[w+O],O+=_,x-=8);if(j===0)j=1-N;else{if(j===P)return I?NaN:1/0*(C?-1:1);I+=Math.pow(2,v),j-=N}return(C?-1:1)*I*Math.pow(2,j-v)},r.write=function(b,w,g,v,T,L){var I,q,P=8*L-T-1,N=(1<<P)-1,x=N>>1,O=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=v?0:L-1,C=v?1:-1,L=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(q=isNaN(w)?1:0,I=N):(I=Math.floor(Math.log(w)/Math.LN2),w*(v=Math.pow(2,-I))<1&&(I--,v*=2),2<=(w+=1<=I+x?O/v:O*Math.pow(2,1-x))*v&&(I++,v/=2),N<=I+x?(q=0,I=N):1<=I+x?(q=(w*v-1)*Math.pow(2,T),I+=x):(q=w*Math.pow(2,x-1)*Math.pow(2,T),I=0));8<=T;b[g+_]=255&q,_+=C,q/=256,T-=8);for(I=I<<T|q,P+=T;0<P;b[g+_]=255&I,_+=C,I/=256,P-=8);b[g+_-C]|=128*L}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,r){(function(n,i,a,s,o,u,c,p,d){var b,w,g;function v(){}(n=e.exports={}).nextTick=(w=typeof window!="undefined"&&window.setImmediate,g=typeof window!="undefined"&&window.postMessage&&window.addEventListener,w?function(T){return window.setImmediate(T)}:g?(b=[],window.addEventListener("message",function(T){var j=T.source;j!==window&&j!==null||T.data!=="process-tick"||(T.stopPropagation(),0<b.length&&b.shift()())},!0),function(T){b.push(T),window.postMessage("process-tick","*")}):function(T){setTimeout(T,0)}),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.binding=function(T){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(T){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})});var Hh,tu,Zh=k(()=>{l();Hh=Ue(Kh(),1),tu=(...t)=>(0,Hh.default)(t.join("_"))});var Yh=Q((kT,Jh)=>{"use strict";l();Jh.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e=="undefined"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var rd=Q((jT,ru)=>{"use strict";l();var Hb=/[\p{Lu}]/u,Zb=/[\p{Ll}]/u,Wh=/^[\p{Lu}](?![\p{Lu}])/gu,Xh=/([\p{Alpha}\p{N}_]|$)/u,ed=/[_.\- ]+/,Jb=new RegExp("^"+ed.source),Gh=new RegExp(ed.source+Xh.source,"gu"),Qh=new RegExp("\\d+"+Xh.source,"gu"),Yb=(t,e,r)=>{let n=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){let o=t[s];n&&Hb.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),n=!1,a=i,i=!0,s++):i&&a&&Zb.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,a=i,i=r(o)===o&&e(o)!==o)}return t},Wb=(t,e)=>(Wh.lastIndex=0,t.replace(Wh,r=>e(r))),Gb=(t,e)=>(Gh.lastIndex=0,Qh.lastIndex=0,t.replace(Gh,(r,n)=>e(n)).replace(Qh,r=>e(r))),td=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e=h({pascalCase:!1,preserveConsecutiveUppercase:!1},e),Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),n=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=Yb(t,r,n)),t=t.replace(Jb,""),e.preserveConsecutiveUppercase?t=Wb(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),Gb(t,n))};ru.exports=td;ru.exports.default=td});function id(t,e){return(e==null?void 0:e[t])||(0,nd.default)(t)}function ad(t,e,r){let n={};for(let i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}var nd,Qb,sd=k(()=>{l();nd=Ue(Yh(),1),Qb=Ue(rd(),1)});function od(t){return Array.isArray(t)?[...t]:h({},t)}function Xb(t,e){let r=od(t);for(let[n,i]of Object.entries(e)){let[a,...s]=n.split(".").reverse(),o=r;for(let u of s.reverse()){if(o[u]===void 0)break;o[u]=od(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return r}var We,hr=k(()=>{l();sd();We=class t{get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof t||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));for(let i in r)i in this&&this[i]!==void 0&&(n[i]=this[i]||n[i]);return{lc:1,type:"constructor",id:[...this.lc_namespace,this.constructor.name],kwargs:ad(Object.keys(r).length?Xb(n,r):n,id,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:[...this.lc_namespace,this.constructor.name]}}}});var Yr,Dt,dr,fr,gt,ba,Ot,wa,Hr,_a,va,Zr,xa,Aa,Jr,Oa,ct=k(()=>{l();hr();Yr="__run",Dt=class t{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new t({text:this.text+e.text,generationInfo:h(h({},this.generationInfo),e.generationInfo)})}},dr=class extends We{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}},fr=class extends dr{static _mergeAdditionalKwargs(e,r){let n=h({},e);for(let[i,a]of Object.entries(r))if(n[i]===void 0)n[i]=a;else{if(typeof n[i]!=typeof a)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+a;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],a);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}},gt=class extends dr{_getType(){return"human"}},ba=class t extends fr{_getType(){return"human"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},Ot=class extends dr{_getType(){return"ai"}},wa=class t extends fr{_getType(){return"ai"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},Hr=class extends dr{_getType(){return"system"}},_a=class t extends fr{_getType(){return"system"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},va=class t extends fr{_getType(){return"function"}concat(e){var r;return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:(r=this.name)!=null?r:""})}},Zr=class extends dr{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}},xa=class t extends fr{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}},Aa=class t extends Dt{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new t({text:this.text+e.text,generationInfo:h(h({},this.generationInfo),e.generationInfo),message:this.message.concat(e.message)})}},Jr=class extends We{},Oa=class{}});var ew,Pa,ud=k(()=>{l();Zh();ct();ew=new Map,Pa=class t extends Oa{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e!=null?e:new Map}lookup(e,r){var n;return Promise.resolve((n=this.cache.get(tu(e,r)))!=null?n:null)}update(e,r,n){return f(this,null,function*(){this.cache.set(tu(e,r),n)})}static global(){return new t(ew)}}});var ld=Q((GT,cd)=>{l();function lt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}cd.exports=lt;lt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};lt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};lt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};lt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};lt.prototype.try=function(t){this.attempt(t)};lt.prototype.start=function(t){this.attempt(t)};lt.prototype.start=lt.prototype.try;lt.prototype.errors=function(){return this._errors};lt.prototype.attempts=function(){return this._attempts};lt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,s=(t[a]||0)+1;t[a]=s,s>=r&&(e=i,r=s)}return e}});var pd=Q(mr=>{l();var tw=ld();mr.operation=function(t){var e=mr.timeouts(t);return new tw(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};mr.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(a,s){return a-s}),n};mr.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};mr.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var i=0;i<r.length;i++){var a=r[i],s=t[a];t[a]=(function(u){var c=mr.operation(e),p=Array.prototype.slice.call(arguments,1),d=p.pop();p.push(function(b){c.retry(b)||(b&&(arguments[0]=c.mainError()),d.apply(this,arguments))}),c.attempt(function(){u.apply(t,p)})}).bind(t,s),t[a].options=e}}});var dd=Q((tS,hd)=>{l();hd.exports=pd()});var nu=Q((md,Ta)=>{"use strict";l();var rw=dd(),nw=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Ea=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},iw=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},aw=t=>nw.includes(t),fd=(t,e)=>new Promise((r,n)=>{e=h({onFailedAttempt:()=>{},retries:10},e);let i=rw.operation(e);i.attempt(a=>f(md,null,function*(){try{r(yield t(a))}catch(s){if(!(s instanceof Error)){n(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof Ea)i.stop(),n(s.originalError);else if(s instanceof TypeError&&!aw(s.message))i.stop(),n(s);else{iw(s,a,e);try{yield e.onFailedAttempt(s)}catch(o){n(o);return}i.retry(s)||n(i.mainError())}}}))});Ta.exports=fd;Ta.exports.default=fd;Ta.exports.AbortError=Ea});var gd=Q((aS,iu)=>{"use strict";l();var sw=Object.prototype.hasOwnProperty,Ge="~";function Yn(){}Object.create&&(Yn.prototype=Object.create(null),new Yn().__proto__||(Ge=!1));function ow(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function yd(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new ow(r,n||t,i),s=Ge?Ge+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function Sa(t,e){--t._eventsCount===0?t._events=new Yn:delete t._events[e]}function ze(){this._events=new Yn,this._eventsCount=0}ze.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)sw.call(r,n)&&e.push(Ge?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};ze.prototype.listeners=function(e){var r=Ge?Ge+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s};ze.prototype.listenerCount=function(e){var r=Ge?Ge+e:e,n=this._events[r];return n?n.fn?1:n.length:0};ze.prototype.emit=function(e,r,n,i,a,s){var o=Ge?Ge+e:e;if(!this._events[o])return!1;var u=this._events[o],c=arguments.length,p,d;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,a),!0;case 6:return u.fn.call(u.context,r,n,i,a,s),!0}for(d=1,p=new Array(c-1);d<c;d++)p[d-1]=arguments[d];u.fn.apply(u.context,p)}else{var b=u.length,w;for(d=0;d<b;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),c){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,r);break;case 3:u[d].fn.call(u[d].context,r,n);break;case 4:u[d].fn.call(u[d].context,r,n,i);break;default:if(!p)for(w=1,p=new Array(c-1);w<c;w++)p[w-1]=arguments[w];u[d].fn.apply(u[d].context,p)}}return!0};ze.prototype.on=function(e,r,n){return yd(this,e,r,n,!1)};ze.prototype.once=function(e,r,n){return yd(this,e,r,n,!0)};ze.prototype.removeListener=function(e,r,n,i){var a=Ge?Ge+e:e;if(!this._events[a])return this;if(!r)return Sa(this,a),this;var s=this._events[a];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&Sa(this,a);else{for(var o=0,u=[],c=s.length;o<c;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&u.push(s[o]);u.length?this._events[a]=u.length===1?u[0]:u:Sa(this,a)}return this};ze.prototype.removeAllListeners=function(e){var r;return e?(r=Ge?Ge+e:e,this._events[r]&&Sa(this,r)):(this._events=new Yn,this._eventsCount=0),this};ze.prototype.off=ze.prototype.removeListener;ze.prototype.addListener=ze.prototype.on;ze.prefixed=Ge;ze.EventEmitter=ze;typeof iu!="undefined"&&(iu.exports=ze)});var wd=Q((oS,bd)=>{"use strict";l();bd.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var vd=Q((cS,Ia)=>{"use strict";l();var uw=wd(),Ca=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},_d=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let s=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new Ca(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);uw(t.then(n,i),()=>{clearTimeout(a)})});Ia.exports=_d;Ia.exports.default=_d;Ia.exports.TimeoutError=Ca});var xd=Q(au=>{"use strict";l();Object.defineProperty(au,"__esModule",{value:!0});function cw(t,e,r){let n=0,i=t.length;for(;i>0;){let a=i/2|0,s=n+a;r(t[s],e)<=0?(n=++s,i-=a+1):i=a}return n}au.default=cw});var Ad=Q(ou=>{"use strict";l();Object.defineProperty(ou,"__esModule",{value:!0});var lw=xd(),su=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=lw.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};ou.default=su});var Ra=Q(cu=>{"use strict";l();Object.defineProperty(cu,"__esModule",{value:!0});var pw=gd(),Od=vd(),hw=Ad(),ka=()=>{},dw=new Od.TimeoutError,uu=class extends pw{constructor(e){var r,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=ka,this._resolveIdle=ka,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:hw.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=ka,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=ka,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}add(n){return f(this,arguments,function*(e,r={}){return new Promise((i,a)=>{let s=()=>f(this,null,function*(){this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():Od.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&a(dw)});i(yield o)}catch(o){a(o)}this._next()});this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})})}addAll(e,r){return f(this,null,function*(){return Promise.all(e.map(n=>f(this,null,function*(){return this.add(n,r)})))})}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}onEmpty(){return f(this,null,function*(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})})}onIdle(){return f(this,null,function*(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};cu.default=uu});var Pd,ja,fw,Mt,Wn=k(()=>{l();Pd=Ue(nu(),1),ja=Ue(Ra(),1),fw=[400,401,403,404,405,406,407,408,409],Mt=class{constructor(e){var n,i;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(n=e.maxConcurrency)!=null?n:1/0,this.maxRetries=(i=e.maxRetries)!=null?i:6;let r="default"in ja.default?ja.default.default:ja.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,Pd.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var s,o,u,c;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;let i=(s=n==null?void 0:n.response)==null?void 0:s.status;if(i&&fw.includes(+i))throw n;let a=(o=n==null?void 0:n.response)==null?void 0:o.data;if(((u=a==null?void 0:a.error)==null?void 0:u.code)==="insufficient_quota"){let p=new Error((c=a==null?void 0:a.error)==null?void 0:c.message);throw p.name="InsufficientQuotaError",p}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});var Sd=Q(Na=>{"use strict";l();Na.byteLength=yw;Na.toByteArray=bw;Na.fromByteArray=vw;var Pt=[],pt=[],mw=typeof Uint8Array!="undefined"?Uint8Array:Array,lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yr=0,Ed=lu.length;yr<Ed;++yr)Pt[yr]=lu[yr],pt[lu.charCodeAt(yr)]=yr;var yr,Ed;pt["-".charCodeAt(0)]=62;pt["_".charCodeAt(0)]=63;function Td(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function yw(t){var e=Td(t),r=e[0],n=e[1];return(r+n)*3/4-n}function gw(t,e,r){return(e+r)*3/4-r}function bw(t){var e,r=Td(t),n=r[0],i=r[1],a=new mw(gw(t,n,i)),s=0,o=i>0?n-4:n,u;for(u=0;u<o;u+=4)e=pt[t.charCodeAt(u)]<<18|pt[t.charCodeAt(u+1)]<<12|pt[t.charCodeAt(u+2)]<<6|pt[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=pt[t.charCodeAt(u)]<<2|pt[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=pt[t.charCodeAt(u)]<<10|pt[t.charCodeAt(u+1)]<<4|pt[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function ww(t){return Pt[t>>18&63]+Pt[t>>12&63]+Pt[t>>6&63]+Pt[t&63]}function _w(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(ww(n));return i.join("")}function vw(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(_w(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(Pt[e>>2]+Pt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Pt[e>>10]+Pt[e>>4&63]+Pt[e<<2&63]+"=")),i.join("")}});function Pw(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let a=t.slice(r[i].start,r[i+1].end),s=e.get(a.join(","));s!=null&&(n==null||s<n[0])&&(n=[s,i])}if(n!=null){let i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function Ew(t,e){return t.length===1?[e.get(t.join(","))]:Pw(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function Tw(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function hu(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var Cd,xw,Aw,Ow,pu,La,Id=k(()=>{l();Cd=Ue(Sd(),1),xw=Object.defineProperty,Aw=(t,e,r)=>e in t?xw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ow=(t,e,r)=>(Aw(t,typeof e!="symbol"?e+"":e,r),r);pu=class{constructor(t,e){$t(this,"specialTokens");$t(this,"inverseSpecialTokens");$t(this,"patStr");$t(this,"textEncoder",new TextEncoder);$t(this,"textDecoder",new TextDecoder("utf-8"));$t(this,"rankMap",new Map);$t(this,"textMap",new Map);this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[a,s,...o]=i.split(" "),u=Number.parseInt(s,10);return o.forEach((c,p)=>n[c]=u+p),n},{});for(let[n,i]of Object.entries(r)){let a=Cd.default.toByteArray(n);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens=h(h({},t.special_tokens),e),this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,a])=>(n[a]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){var c;let n=new RegExp(this.patStr,"ug"),i=pu.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(p=>!s.has(p)):r);if(o.size>0){let p=pu.specialTokenRegex([...o]),d=t.match(p);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let u=0;for(;;){let p=null,d=u;for(;i.lastIndex=d,p=i.exec(t),!(p==null||s.has(p[0]));)d=p.index+1;let b=(c=p==null?void 0:p.index)!=null?c:t.length;for(let g of t.substring(u,b).matchAll(n)){let v=this.textEncoder.encode(g[0]),T=this.rankMap.get(v.join(","));if(T!=null){a.push(T);continue}a.push(...Ew(v,this.rankMap))}if(p==null)break;let w=this.specialTokens[p[0]];a.push(w),u=p.index+p[0].length}return a}decode(t){var a;let e=[],r=0;for(let s=0;s<t.length;++s){let o=t[s],u=(a=this.textMap.get(o))!=null?a:this.inverseSpecialTokens[o];u!=null&&(e.push(u),r+=u.length)}let n=new Uint8Array(r),i=0;for(let s of e)n.set(s,i),i+=s.length;return this.textDecoder.decode(n)}},La=pu;Ow(La,"specialTokenRegex",t=>new RegExp(t.map(e=>Tw(e)).join("|"),"g"))});var kd=k(()=>{l();Id()});function du(t,e){return f(this,null,function*(){return t in Da||(Da[t]=Sw.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e==null?void 0:e.signal}).then(r=>r.json()).catch(r=>{throw delete Da[t],r})),new La(yield Da[t],e==null?void 0:e.extendedSpecialTokens)})}function Ma(t,e){return f(this,null,function*(){return du(hu(t),e)})}var Da,Sw,Ua=k(()=>{l();kd();Wn();Da={},Sw=new Mt({})});var Wr,Cw,fu,Gn=k(()=>{l();Ua();Wr=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t,Cw=t=>{switch(Wr(t)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},fu=r=>f(void 0,[r],function*({prompt:t,modelName:e}){let n;try{n=(yield Ma(e)).encode(t).length}catch(a){n=Math.ceil(t.length/4)}return Cw(e)-n})});function mu(){if(!Fa&&(Fa=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fa(Iw)}var Fa,Iw,Rd=k(()=>{l();Iw=new Uint8Array(16)});var jd,Nd=k(()=>{l();jd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function kw(t){return typeof t=="string"&&jd.test(t)}var yu,Ld=k(()=>{l();Nd();yu=kw});function Dd(t,e=0){return(qe[t[e+0]]+qe[t[e+1]]+qe[t[e+2]]+qe[t[e+3]]+"-"+qe[t[e+4]]+qe[t[e+5]]+"-"+qe[t[e+6]]+qe[t[e+7]]+"-"+qe[t[e+8]]+qe[t[e+9]]+"-"+qe[t[e+10]]+qe[t[e+11]]+qe[t[e+12]]+qe[t[e+13]]+qe[t[e+14]]+qe[t[e+15]]).toLowerCase()}var qe,Md=k(()=>{l();qe=[];for(let t=0;t<256;++t)qe.push((t+256).toString(16).slice(1))});var Rw,gu,Ud=k(()=>{l();Rw=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gu={randomUUID:Rw}});function jw(t,e,r){if(gu.randomUUID&&!e&&!t)return gu.randomUUID();t=t||{};let n=t.random||(t.rng||mu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Dd(n)}var at,Fd=k(()=>{l();Ud();Rd();Md();at=jw});var qa=k(()=>{l();Fd();Ld()});var bu,gr,wu=k(()=>{l();qa();hr();bu=class{},gr=class t extends bu{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){var r,n,i,a;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process!="undefined"?(m==null?void 0:m.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=(r=e.ignoreLLM)!=null?r:this.ignoreLLM,this.ignoreChain=(n=e.ignoreChain)!=null?n:this.ignoreChain,this.ignoreAgent=(i=e.ignoreAgent)!=null?i:this.ignoreAgent,this.ignoreRetriever=(a=e.ignoreRetriever)!=null?a:this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return We.prototype.toJSON.call(this)}toJSONNotImplemented(){return We.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends t{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:at()}),Object.assign(this,e)}}return new r}}});var $d=Q((sC,zd)=>{"use strict";l();var Bd=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,Vd=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function Nw(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,a]of Object.entries(n))e[i]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},n[i]=e[i],t.set(a[0],a[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=Bd(),e.color.ansi16m=Vd(),e.bgColor.ansi256=Bd(10),e.bgColor.ansi16m=Vd(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,i)=>r===n&&n===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=new RegExp("(?<colorString>[a-f\\d]{6}|[a-f\\d]{3})","i").exec(r.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(s=>s+s).join(""));let a=Number.parseInt(i,16);return[a>>16&255,a>>8&255,a&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(zd,"exports",{enumerable:!0,get:Nw})});var Wt,Ba=k(()=>{l();wu();Wt=class extends gr{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}_startTrace(e){if(e.parent_run_id!==void 0){let r=this.runMap.get(e.parent_run_id);r&&this._addChildRun(r,e)}this.runMap.set(e.id,e)}_endTrace(e){return f(this,null,function*(){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):yield this.persistRun(e),this.runMap.delete(e.id)})}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}handleLLMStart(e,r,n,i,a,s,o){return f(this,null,function*(){var b;let u=this._getExecutionOrder(i),c=Date.now(),p=o?S(h({},a),{metadata:o}):a,d={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:p!=null?p:{},tags:s||[]};this._startTrace(d),yield(b=this.onLLMStart)==null?void 0:b.call(this,d)})}handleChatModelStart(e,r,n,i,a,s,o){return f(this,null,function*(){var b;let u=this._getExecutionOrder(i),c=Date.now(),p=o?S(h({},a),{metadata:o}):a,d={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:p!=null?p:{},tags:s||[]};this._startTrace(d),yield(b=this.onLLMStart)==null?void 0:b.call(this,d)})}handleLLMEnd(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),yield(i=this.onLLMEnd)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleLLMError(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),yield(i=this.onLLMError)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleChainStart(e,r,n,i,a,s,o){return f(this,null,function*(){var d;let u=this._getExecutionOrder(i),c=Date.now(),p={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:r,execution_order:u,child_execution_order:u,run_type:o!=null?o:"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(p),yield(d=this.onChainStart)==null?void 0:d.call(this,p)})}handleChainEnd(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),yield(i=this.onChainEnd)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleChainError(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),yield(i=this.onChainError)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleToolStart(e,r,n,i,a,s){return f(this,null,function*(){var p;let o=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:r},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(c),yield(p=this.onToolStart)==null?void 0:p.call(this,c)})}handleToolEnd(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:n.end_time}),yield(i=this.onToolEnd)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleToolError(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),yield(i=this.onToolError)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleAgentAction(e,r){return f(this,null,function*(){var a;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),yield(a=this.onAgentAction)==null?void 0:a.call(this,n)})}handleAgentEnd(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),yield(i=this.onAgentEnd)==null?void 0:i.call(this,n))})}handleRetrieverStart(e,r,n,i,a,s){return f(this,null,function*(){var p;let o=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{query:r},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(c),yield(p=this.onRetrieverStart)==null?void 0:p.call(this,c)})}handleRetrieverEnd(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:n.end_time}),yield(i=this.onRetrieverEnd)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleRetrieverError(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),yield(i=this.onRetrieverError)==null?void 0:i.call(this,n),yield this._endTrace(n)})}handleText(e,r){return f(this,null,function*(){var i;let n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),yield(i=this.onText)==null?void 0:i.call(this,n))})}handleLLMNewToken(e,r,n){return f(this,null,function*(){var a;let i=this.runMap.get(n);!i||(i==null?void 0:i.run_type)!=="llm"||(i.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:r}}),yield(a=this.onLLMNewToken)==null?void 0:a.call(this,i))})}}});function Kd(t,e){return`${t.open}${e}${t.close}`}var _u,Lw,Qn,Hd=k(()=>{l();_u=Ue($d(),1);Ba();({color:Lw}=_u.default),Qn=class extends Wt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,a,s)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?Kd(_u.default.bold,o):o}).join(" > ");return Kd(Lw.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e)}onChainEnd(e){let r=this.getBreadcrumbs(e)}onChainError(e){let r=this.getBreadcrumbs(e)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs}onLLMEnd(e){let r=this.getBreadcrumbs(e)}onLLMError(e){let r=this.getBreadcrumbs(e)}onToolStart(e){let r=this.getBreadcrumbs(e)}onToolEnd(e){let r=this.getBreadcrumbs(e)}onToolError(e){let r=this.getBreadcrumbs(e)}onRetrieverStart(e){let r=this.getBreadcrumbs(e)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e)}onRetrieverError(e){let r=this.getBreadcrumbs(e)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e)}}});var Zd,Va,Dw,za,Jd=k(()=>{l();Zd=Ue(nu(),1),Va=Ue(Ra(),1),Dw=[400,401,403,404,405,406,407,408,409],za=class{constructor(e){var n,i;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(n=e.maxConcurrency)!=null?n:1/0,this.maxRetries=(i=e.maxRetries)!=null?i:6;let r="default"in Va.default?Va.default.default:Va.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,Zd.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){var a;if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||(n==null?void 0:n.code)==="ECONNABORTED")throw n;let i=(a=n==null?void 0:n.response)==null?void 0:a.status;if(i&&Dw.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{var s;(s=e.signal)==null||s.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});function vu(t){return typeof(t==null?void 0:t._getType)=="function"}function xu(t){let e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs=h({},t.additional_kwargs)),e}var Yd=k(()=>{l()});function Pu(){return f(this,null,function*(){if(Au===void 0){let t=Bw(),e=Vw();Au=h({library:"langsmith",runtime:t},e)}return Au})}function Gt(t){try{return typeof process!="undefined"?m==null?void 0:m[t]:void 0}catch(e){return}}function Vw(){if(Ou!==void 0)return Ou;let t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of t){let n=Gt(r);n!==void 0&&(e[r]=n)}return Ou=e,e}var Mw,Uw,Fw,Wd,qw,Bw,Au,Ou,Eu=k(()=>{l();Mw=()=>typeof window!="undefined"&&typeof window.document!="undefined",Uw=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Fw=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Wd=()=>typeof Deno!="undefined",qw=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!Wd(),Bw=()=>{let t;return Mw()?t="browser":qw()?t="node":Uw()?t="webworker":Fw()?t="jsdom":Wd()?t="deno":t="other",t}});function zw(t){return f(this,null,function*(){let e=[];try{for(var r=Oe(t),n,i,a;n=!(i=yield r.next()).done;n=!1){let s=i.value;e.push(s)}}catch(i){a=[i]}finally{try{n&&(i=r.return)&&(yield i.call(r))}finally{if(a)throw a[0]}}return e})}function Tu(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function Qd(t){return Gt("LANGCHAIN_HIDE_INPUTS")==="true"?{}:t}function Xd(t){return Gt("LANGCHAIN_HIDE_OUTPUTS")==="true"?{}:t}function Ee(t){if(!yu(t))throw new Error(`Invalid UUID: ${t}`)}var Gd,br,Gr,Su=k(()=>{l();qa();Jd();Yd();Eu();Gd=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},br=(t,e)=>f(void 0,null,function*(){let r=yield t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)});Gr=class t{constructor(e={}){var n,i,a,s,o,u;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});let r=t.getDefaultClientConfig();this.apiUrl=(i=Tu((n=e.apiUrl)!=null?n:r.apiUrl))!=null?i:"",this.apiKey=Tu((a=e.apiKey)!=null?a:r.apiKey),this.webUrl=Tu((s=e.webUrl)!=null?s:r.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=(o=e.timeout_ms)!=null?o:4e3,this.caller=new za((u=e.callerOptions)!=null?u:{})}static getDefaultClientConfig(){var n;let e=Gt("LANGCHAIN_API_KEY");return{apiUrl:(n=Gt("LANGCHAIN_ENDPOINT"))!=null?n:e?"https://api.smith.langchain.com":"http://localhost:1984",apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!Gd(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:Gd(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){let e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}_getResponse(e,r){return f(this,null,function*(){var s;let n=(s=r==null?void 0:r.toString())!=null?s:"",i=`${this.apiUrl}${e}?${n}`,a=yield this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);return a})}_get(e,r){return f(this,null,function*(){return(yield this._getResponse(e,r)).json()})}_getPaginated(n){return ve(this,arguments,function*(e,r=new URLSearchParams){let i=Number(r.get("offset"))||0,a=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(a));let s=`${this.apiUrl}${e}?${r}`,o=yield new Y(this.caller.call(fetch,s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}));if(!o.ok)throw new Error(`Failed to fetch ${e}: ${o.status} ${o.statusText}`);let u=yield new Y(o.json());if(u.length===0||(yield u,u.length<a))break;i+=u.length}})}createRun(e){return f(this,null,function*(){var u;let r=S(h({},this.headers),{"Content-Type":"application/json"}),n=(u=e.extra)!=null?u:{},i=yield Pu(),a=e.project_name;delete e.project_name;let s=S(h({session_name:a},e),{extra:S(h({},e.extra),{runtime:h(h({},i),n.runtime)})});s.inputs=Qd(s.inputs),s.outputs&&(s.outputs=Xd(s.outputs));let o=yield this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});yield br(o,"create run")})}updateRun(e,r){return f(this,null,function*(){Ee(e),r.inputs&&(r.inputs=Qd(r.inputs)),r.outputs&&(r.outputs=Xd(r.outputs));let n=S(h({},this.headers),{"Content-Type":"application/json"}),i=yield this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});yield br(i,"update run")})}readRun(n){return f(this,arguments,function*(e,{loadChildRuns:r}={loadChildRuns:!1}){Ee(e);let i=yield this._get(`/runs/${e}`);return r&&i.child_run_ids&&(i=yield this._loadChildRuns(i)),i})}getRunUrl(i){return f(this,arguments,function*({runId:e,run:r,projectOpts:n}){if(r!==void 0){let a;r.session_id?a=r.session_id:n!=null&&n.projectName?a=(yield this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?a=n==null?void 0:n.projectId:a=(yield this.readProject({projectName:Gt("LANGCHAIN_PROJECT")||"default"})).id;let s=yield this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${a}/r/${r.id}?poll=true`}else if(e!==void 0){let a=yield this.readRun(e);if(!a.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${a.app_path}`}else throw new Error("Must provide either runId or run")})}_loadChildRuns(e){return f(this,null,function*(){let r=yield zw(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((a,s)=>{var o,u;return((o=a==null?void 0:a.dotted_order)!=null?o:"").localeCompare((u=s==null?void 0:s.dotted_order)!=null?u:"")});for(let a of r){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),i[a.id]=a}e.child_runs=n[e.id]||[];for(let a in n)a!==e.id&&(i[a].child_runs=n[a]);return e})}listRuns(g){return ve(this,arguments,function*({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,startTime:a,executionOrder:s,runType:o,error:u,id:c,limit:p,offset:d,query:b,filter:w}){let v=new URLSearchParams,T=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");T=(yield new Y(this.readProject({projectName:r}))).id}if(T&&v.append("session",T),n&&v.append("parent_run",n),i&&v.append("reference_example",i),a&&v.append("start_time",a.toISOString()),s&&v.append("execution_order",s.toString()),o&&v.append("run_type",o),u!==void 0&&v.append("error",u.toString()),c!==void 0)for(let N of c)v.append("id",N);p!==void 0&&v.append("limit",p.toString()),d!==void 0&&v.append("offset",d.toString()),b!==void 0&&v.append("query",b),w!==void 0&&v.append("filter",w);try{for(var j=Oe(this._getPaginated("/runs",v)),I,q,P;I=!(q=yield new Y(j.next())).done;I=!1){let N=q.value;yield*cr(N)}}catch(q){P=[q]}finally{try{I&&(q=j.return)&&(yield new Y(q.call(j)))}finally{if(P)throw P[0]}}})}shareRun(n){return f(this,arguments,function*(e,{shareId:r}={}){let i={run_id:e,share_token:r||at()};Ee(e);let s=yield(yield this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`})}unshareRun(e){return f(this,null,function*(){Ee(e);let r=yield this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});yield br(r,"unshare run")})}readRunSharedLink(e){return f(this,null,function*(){Ee(e);let n=yield(yield this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`})}listSharedRuns(n){return f(this,arguments,function*(e,{runIds:r}={}){let i=new URLSearchParams({share_token:e});if(r!==void 0)for(let o of r)i.append("id",o);return Ee(e),yield(yield this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()})}readDatasetSharedSchema(e,r){return f(this,null,function*(){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(yield this.readDataset({datasetName:r})).id),Ee(e);let i=yield(yield this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i})}shareDataset(e,r){return f(this,null,function*(){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(yield this.readDataset({datasetName:r})).id);let n={dataset_id:e};Ee(e);let a=yield(yield this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a})}unshareDataset(e){return f(this,null,function*(){Ee(e);let r=yield this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});yield br(r,"unshare dataset")})}readSharedDataset(e){return f(this,null,function*(){return Ee(e),yield(yield this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()})}createProject(o){return f(this,arguments,function*({projectName:e,description:r=null,metadata:n=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){let u=i?"?upsert=true":"",c=`${this.apiUrl}/sessions${u}`,p=a||{};n&&(p.metadata=n);let d={name:e,extra:p,description:r};s!==null&&(d.reference_dataset_id=s);let b=yield this.caller.call(fetch,c,{method:"POST",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms)}),w=yield b.json();if(!b.ok)throw new Error(`Failed to create session ${e}: ${b.status} ${b.statusText}`);return w})}updateProject(o,u){return f(this,arguments,function*(e,{name:r=null,description:n=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){let c=`${this.apiUrl}/sessions/${e}`,p=a;i&&(p=S(h({},p||{}),{metadata:i}));let d={name:r,extra:p,description:n,end_time:s?new Date(s).toISOString():null},b=yield this.caller.call(fetch,c,{method:"PATCH",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms)}),w=yield b.json();if(!b.ok)throw new Error(`Failed to update project ${e}: ${b.status} ${b.statusText}`);return w})}readProject(n){return f(this,arguments,function*({projectId:e,projectName:r}){let i="/sessions",a=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Ee(e),i+=`/${e}`;else if(r!==void 0)a.append("name",r);else throw new Error("Must provide projectName or projectId");let s=yield this._get(i,a),o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);o=s[0]}else o=s;return o})}_getTenantId(){return f(this,null,function*(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});try{for(var r=Oe(this._getPaginated("/sessions",e)),n,i,a;n=!(i=yield r.next()).done;n=!1){let s=i.value;return this._tenantId=s[0].tenant_id,s[0].tenant_id}}catch(i){a=[i]}finally{try{n&&(i=r.return)&&(yield i.call(r))}finally{if(a)throw a[0]}}throw new Error("No projects found to resolve tenant.")})}listProjects(){return ve(this,arguments,function*({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:a,referenceFree:s}={}){let o=new URLSearchParams;if(e!==void 0)for(let b of e)o.append("id",b);if(r!==void 0&&o.append("name",r),n!==void 0&&o.append("name_contains",n),i!==void 0)o.append("reference_dataset",i);else if(a!==void 0){let b=yield new Y(this.readDataset({datasetName:a}));o.append("reference_dataset",b.id)}s!==void 0&&o.append("reference_free",s.toString());try{for(var u=Oe(this._getPaginated("/sessions",o)),c,p,d;c=!(p=yield new Y(u.next())).done;c=!1){let b=p.value;yield*cr(b)}}catch(p){d=[p]}finally{try{c&&(p=u.return)&&(yield new Y(p.call(u)))}finally{if(d)throw d[0]}}})}deleteProject(n){return f(this,arguments,function*({projectId:e,projectName:r}){let i;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?i=(yield this.readProject({projectName:r})).id:i=e,Ee(i);let a=yield this.caller.call(fetch,`${this.apiUrl}/sessions/${i}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});yield br(a,`delete session ${i} (${r})`)})}uploadCsv(u){return f(this,arguments,function*({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:a,dataType:s,name:o}){let c=`${this.apiUrl}/datasets/upload`,p=new FormData;p.append("file",e,r),n.forEach(w=>{p.append("input_keys",w)}),i.forEach(w=>{p.append("output_keys",w)}),a&&p.append("description",a),s&&p.append("data_type",s),o&&p.append("name",o);let d=yield this.caller.call(fetch,c,{method:"POST",headers:this.headers,body:p,signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok){let w=yield d.json();throw w.detail&&w.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${d.status} ${d.statusText}`)}return yield d.json()})}createDataset(i){return f(this,arguments,function*(e,{description:r,dataType:n}={}){let a={name:e,description:r};n&&(a.data_type=n);let s=yield this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok){let u=yield s.json();throw u.detail&&u.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${s.status} ${s.statusText}`)}return yield s.json()})}readDataset(n){return f(this,arguments,function*({datasetId:e,datasetName:r}){let i="/datasets",a=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Ee(e),i+=`/${e}`;else if(r!==void 0)a.append("name",r);else throw new Error("Must provide datasetName or datasetId");let s=yield this._get(i,a),o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);o=s[0]}else o=s;return o})}readDatasetOpenaiFinetuning(n){return f(this,arguments,function*({datasetId:e,datasetName:r}){let i="/datasets";if(e===void 0)if(r!==void 0)e=(yield this.readDataset({datasetName:r})).id;else throw new Error("Must provide datasetName or datasetId");return(yield(yield this._getResponse(`${i}/${e}/openai_ft`)).text()).trim().split(`
`).map(u=>JSON.parse(u))})}listDatasets(){return ve(this,arguments,function*({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:a}={}){let s="/datasets",o=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(let b of n)o.append("id",b);i!==void 0&&o.append("name",i),a!==void 0&&o.append("name_contains",a);try{for(var u=Oe(this._getPaginated(s,o)),c,p,d;c=!(p=yield new Y(u.next())).done;c=!1){let b=p.value;yield*cr(b)}}catch(p){d=[p]}finally{try{c&&(p=u.return)&&(yield new Y(p.call(u)))}finally{if(d)throw d[0]}}})}deleteDataset(n){return f(this,arguments,function*({datasetId:e,datasetName:r}){let i="/datasets",a=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(a=(yield this.readDataset({datasetName:r})).id),a!==void 0)Ee(a),i+=`/${a}`;else throw new Error("Must provide datasetName or datasetId");let s=yield this.caller.call(fetch,this.apiUrl+i,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${i}: ${s.status} ${s.statusText}`);yield s.json()})}createExample(o,u,c){return f(this,arguments,function*(e,r,{datasetId:n,datasetName:i,createdAt:a,exampleId:s}){let p=n;if(p===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(yield this.readDataset({datasetName:i})).id);let b={dataset_id:p,inputs:e,outputs:r,created_at:(a||new Date).toISOString(),id:s},w=yield this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms)});if(!w.ok)throw new Error(`Failed to create example: ${w.status} ${w.statusText}`);return yield w.json()})}createLLMExample(e,r,n){return f(this,null,function*(){return this.createExample({input:e},{output:r},n)})}createChatExample(e,r,n){return f(this,null,function*(){let i=e.map(s=>vu(s)?xu(s):s),a=vu(r)?xu(r):r;return this.createExample({input:i},{output:a},n)})}readExample(e){return f(this,null,function*(){Ee(e);let r=`/examples/${e}`;return yield this._get(r)})}listExamples(){return ve(this,arguments,function*({datasetId:e,datasetName:r,exampleIds:n}={}){let i;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)i=e;else if(r!==void 0)i=(yield new Y(this.readDataset({datasetName:r}))).id;else throw new Error("Must provide a datasetName or datasetId");let a=new URLSearchParams({dataset:i});if(n!==void 0)for(let p of n)a.append("id",p);try{for(var s=Oe(this._getPaginated("/examples",a)),o,u,c;o=!(u=yield new Y(s.next())).done;o=!1){let p=u.value;yield*cr(p)}}catch(u){c=[u]}finally{try{o&&(u=s.return)&&(yield new Y(u.call(s)))}finally{if(c)throw c[0]}}})}deleteExample(e){return f(this,null,function*(){Ee(e);let r=`/examples/${e}`,n=yield this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);yield n.json()})}updateExample(e,r){return f(this,null,function*(){Ee(e);let n=yield this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return yield n.json()})}evaluateRun(a,s){return f(this,arguments,function*(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let o;if(typeof e=="string")o=yield this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)o=e;else throw new Error(`Invalid run type: ${typeof e}`);let u;o.reference_example_id!==null&&o.reference_example_id!==void 0&&(u=yield this.readExample(o.reference_example_id));let c=yield r.evaluateRun(o,u),p=n!=null?n:{};return c.evaluatorInfo&&(p=h(h({},p),c.evaluatorInfo)),yield this.createFeedback(o.id,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:p,feedbackSourceType:"model"})})}createFeedback(b,w,g){return f(this,arguments,function*(e,r,{score:n,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:u="api",sourceRunId:c,feedbackId:p,eager:d=!1}){var q;let v={type:u!=null?u:"api",metadata:o!=null?o:{}};c!==void 0&&(v==null?void 0:v.metadata)!==void 0&&!v.metadata.__run&&(v.metadata.__run={run_id:c}),(v==null?void 0:v.metadata)!==void 0&&((q=v.metadata.__run)==null?void 0:q.run_id)!==void 0&&Ee(v.metadata.__run.run_id);let T={id:p!=null?p:at(),run_id:e,key:r,score:n,value:i,correction:a,comment:s,feedback_source:v},j=`${this.apiUrl}/feedback`+(d?"/eager":""),I=yield this.caller.call(fetch,j,{method:"POST",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms)});return yield br(I,"create feedback"),T})}updateFeedback(s,o){return f(this,arguments,function*(e,{score:r,value:n,correction:i,comment:a}){let u={};r!=null&&(u.score=r),n!=null&&(u.value=n),i!=null&&(u.correction=i),a!=null&&(u.comment=a),Ee(e);let c=yield this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:S(h({},this.headers),{"Content-Type":"application/json"}),body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});yield br(c,"update feedback")})}readFeedback(e){return f(this,null,function*(){Ee(e);let r=`/feedback/${e}`;return yield this._get(r)})}deleteFeedback(e){return f(this,null,function*(){Ee(e);let r=`/feedback/${e}`,n=yield this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);yield n.json()})}listFeedback(){return ve(this,arguments,function*({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){let i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(let c of r)i.append("key",c);if(n)for(let c of n)i.append("source",c);try{for(var a=Oe(this._getPaginated("/feedback",i)),s,o,u;s=!(o=yield new Y(a.next())).done;s=!1){let c=o.value;yield*cr(c)}}catch(o){u=[o]}finally{try{s&&(o=a.return)&&(yield new Y(o.call(a)))}finally{if(u)throw u[0]}}})}}});var ef=k(()=>{l();Eu();Su()});var tf=k(()=>{l();Su();ef()});var rf=k(()=>{l();tf()});var Xn,Cu=k(()=>{l();rf();jt();Ba();Xn=class extends Wt{constructor(e={}){var a;super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:n,client:i}=e;this.projectName=(a=n!=null?n:ne("LANGCHAIN_PROJECT"))!=null?a:ne("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i!=null?i:new Gr({})}_convertToCreate(e,r=void 0){return f(this,null,function*(){return S(h({},e),{extra:S(h({},e.extra),{runtime:yield Ip()}),child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r})})}persistRun(e){return f(this,null,function*(){})}_persistRunSingle(e){return f(this,null,function*(){let r=yield this._convertToCreate(e,this.exampleId);yield this.client.createRun(r)})}_updateRunSingle(e){return f(this,null,function*(){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};yield this.client.updateRun(e.id,r)})}onRetrieverStart(e){return f(this,null,function*(){yield this._persistRunSingle(e)})}onRetrieverEnd(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onRetrieverError(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onLLMStart(e){return f(this,null,function*(){yield this._persistRunSingle(e)})}onLLMEnd(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onLLMError(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onChainStart(e){return f(this,null,function*(){yield this._persistRunSingle(e)})}onChainEnd(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onChainError(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onToolStart(e){return f(this,null,function*(){yield this._persistRunSingle(e)})}onToolEnd(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}onToolError(e){return f(this,null,function*(){yield this._updateRunSingle(e)})}}});function wr(t,e="Human",r="AI"){let n=[];for(let i of t){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=r;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i}`);let s=i.name?`${i.name}, `:"";n.push(`${a}: ${s}${i.content}`)}return n.join(`
`)}var Qr=k(()=>{l()});var $a,nf=k(()=>{l();Qr();jt();Ba();$a=class extends Wt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:ne("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=ne("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}newSession(e){return f(this,null,function*(){let r={start_time:Date.now(),name:e},n=yield this.persistSession(r);return this.session=n,n})}loadSession(e){return f(this,null,function*(){let r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)})}loadDefaultSession(){return f(this,null,function*(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)})}convertV2RunToRun(e){return f(this,null,function*(){var a,s;let r=(a=this.session)!=null?a:yield this.loadDefaultSession(),n=e.serialized,i;if(e.run_type==="llm"){let o=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(c=>wr(c));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:o,response:e.outputs}}else if(e.run_type==="chain"){let o=yield Promise.all(e.child_runs.map(c=>this.convertV2RunToRun(c)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:o.filter(c=>c.type==="llm"),child_chain_runs:o.filter(c=>c.type==="chain"),child_tool_runs:o.filter(c=>c.type==="tool")}}else if(e.run_type==="tool"){let o=yield Promise.all(e.child_runs.map(c=>this.convertV2RunToRun(c)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:(s=e.outputs)==null?void 0:s.output,action:JSON.stringify(n),child_llm_runs:o.filter(c=>c.type==="llm"),child_chain_runs:o.filter(c=>c.type==="chain"),child_tool_runs:o.filter(c=>c.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i})}persistRun(e){return f(this,null,function*(){let r,n;e.run_type!==void 0?n=yield this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`,(yield fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)})).ok})}persistSession(e){return f(this,null,function*(){let r=`${this.endpoint}/sessions`,n=yield fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?h({id:(yield n.json()).id},e):h({id:1},e)})}_handleSessionResponse(e){return f(this,null,function*(){let r=yield fetch(e,{method:"GET",headers:this.headers}),n;if(!r.ok)return n={id:1,start_time:Date.now()},this.session=n,n;let i=yield r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)})}}});function af(t){return f(this,null,function*(){let e=new $a;return t?yield e.loadSession(t):yield e.loadDefaultSession(),e})}function sf(){return f(this,null,function*(){return new Xn})}var of=k(()=>{l();Cu();nf()});function $w(){let t="default"in Ka.default?Ka.default.default:Ka.default;return new t({autoStart:!0,concurrency:1})}function De(t,e){return f(this,null,function*(){e===!0?yield t():(typeof Iu=="undefined"&&(Iu=$w()),Iu.add(t))})}var Ka,Iu,uf=k(()=>{l();Ka=Ue(Ra(),1)});function Za(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}function cf(t){return"name"in t?t:gr.fromMethods(t)}var ku,Xr,Ru,Ha,ju,Nu,Pe,en=k(()=>{l();qa();wu();Hd();of();Qr();jt();Cu();uf();ku=class{setHandler(e){return this.setHandlers([e])}},Xr=class{constructor(e,r,n,i,a,s,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}handleText(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;try{yield(n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}},Ru=class extends Xr{getChild(e){let r=new Pe(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}handleRetrieverEnd(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreRetriever)try{yield(n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleRetrieverError(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreRetriever)try{yield(n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}},Ha=class extends Xr{handleLLMNewToken(n){return f(this,arguments,function*(e,r={prompt:0,completion:0}){yield Promise.all(this.handlers.map(i=>De(()=>f(this,null,function*(){var a;if(!i.ignoreLLM)try{yield(a=i.handleLLMNewToken)==null?void 0:a.call(i,e,r,this.runId,this._parentRunId,this.tags)}catch(s){}}),i.awaitHandlers)))})}handleLLMError(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreLLM)try{yield(n=r.handleLLMError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleLLMEnd(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreLLM)try{yield(n=r.handleLLMEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}},ju=class extends Xr{getChild(e){let r=new Pe(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}handleChainError(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreChain)try{yield(n=r.handleChainError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleChainEnd(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreChain)try{yield(n=r.handleChainEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleAgentAction(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreAgent)try{yield(n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleAgentEnd(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreAgent)try{yield(n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}},Nu=class extends Xr{getChild(e){let r=new Pe(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}handleToolError(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreAgent)try{yield(n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}handleToolEnd(e){return f(this,null,function*(){yield Promise.all(this.handlers.map(r=>De(()=>f(this,null,function*(){var n;if(!r.ignoreAgent)try{yield(n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags)}catch(i){}}),r.awaitHandlers)))})}},Pe=class t extends ku{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}handleLLMStart(e,r,n=void 0,i=void 0,a=void 0){return f(this,null,function*(){return Promise.all(r.map(s=>f(this,null,function*(){let o=at();return yield Promise.all(this.handlers.map(u=>De(()=>f(this,null,function*(){var c;if(!u.ignoreLLM)try{yield(c=u.handleLLMStart)==null?void 0:c.call(u,e,[s],o,this._parentRunId,a,this.tags,this.metadata)}catch(p){}}),u.awaitHandlers))),new Ha(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChatModelStart(e,r,n=void 0,i=void 0,a=void 0){return f(this,null,function*(){return Promise.all(r.map(s=>f(this,null,function*(){let o=at();return yield Promise.all(this.handlers.map(u=>De(()=>f(this,null,function*(){var c,p;if(!u.ignoreLLM)try{if(u.handleChatModelStart)yield(c=u.handleChatModelStart)==null?void 0:c.call(u,e,[s],o,this._parentRunId,a,this.tags,this.metadata);else if(u.handleLLMStart){let d=wr(s);yield(p=u.handleLLMStart)==null?void 0:p.call(u,e,[d],o,this._parentRunId,a,this.tags,this.metadata)}}catch(d){}}),u.awaitHandlers))),new Ha(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChainStart(a,s){return f(this,arguments,function*(e,r,n=at(),i=void 0){return yield Promise.all(this.handlers.map(o=>De(()=>f(this,null,function*(){var u;if(!o.ignoreChain)try{yield(u=o.handleChainStart)==null?void 0:u.call(o,e,r,n,this._parentRunId,this.tags,this.metadata,i)}catch(c){}}),o.awaitHandlers))),new ju(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleToolStart(i,a){return f(this,arguments,function*(e,r,n=at()){return yield Promise.all(this.handlers.map(s=>De(()=>f(this,null,function*(){var o;if(!s.ignoreAgent)try{yield(o=s.handleToolStart)==null?void 0:o.call(s,e,r,n,this._parentRunId,this.tags,this.metadata)}catch(u){}}),s.awaitHandlers))),new Nu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleRetrieverStart(a,s){return f(this,arguments,function*(e,r,n=at(),i=void 0){return yield Promise.all(this.handlers.map(o=>De(()=>f(this,null,function*(){var u;if(!o.ignoreRetriever)try{yield(u=o.handleRetrieverStart)==null?void 0:u.call(o,e,r,n,this._parentRunId,this.tags,this.metadata)}catch(c){}}),o.awaitHandlers))),new Ru(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata=h(h({},this.metadata),e),r&&(this.inheritableMetadata=h(h({},this.inheritableMetadata),e))}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let n=new t(this._parentRunId);for(let i of this.handlers){let a=this.inheritableHandlers.includes(i);n.addHandler(i,a)}for(let i of this.tags){let a=this.inheritableTags.includes(i);n.addTags([i],a)}for(let i of Object.keys(this.metadata)){let a=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},a)}for(let i of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends gr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:at()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new r),n}static configure(e,r,n,i,a,s,o){return f(this,null,function*(){var b,w,g;let u;(e||r)&&(Array.isArray(e)||!e?(u=new t,u.setHandlers((b=e==null?void 0:e.map(cf))!=null?b:[],!0)):u=e,u=u.copy(Array.isArray(r)?r.map(cf):r==null?void 0:r.handlers,!1));let c=ne("LANGCHAIN_VERBOSE")||(o==null?void 0:o.verbose),p=(w=ne("LANGCHAIN_TRACING_V2"))!=null?w:!1,d=p||((g=ne("LANGCHAIN_TRACING"))!=null?g:!1);if(c||d){if(u||(u=new t),c&&!u.handlers.some(v=>v.name===Qn.prototype.name)){let v=new Qn;u.addHandler(v,!0)}if(d&&!u.handlers.some(v=>v.name==="langchain_tracer"))if(p)u.addHandler(yield sf(),!0);else{let v=ne("LANGCHAIN_PROJECT")&&ne("LANGCHAIN_SESSION");u.addHandler(yield af(v),!0)}}return(n||i)&&u&&(u.addTags(n!=null?n:[]),u.addTags(i!=null?i:[],!1)),(a||s)&&u&&(u.addMetadata(a!=null?a:{}),u.addMetadata(s!=null?s:{},!1)),u})}}});function tn(t,e=!1){if(t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();let r=t.getReader();return{next(){return f(this,null,function*(){try{let i=yield r.read();return i.done&&r.releaseLock(),i}catch(i){throw r.releaseLock(),i}})},return(){return f(this,null,function*(){if(e)r.releaseLock();else{let i=r.cancel();r.releaseLock(),yield i}return{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}var Ja,ei=k(()=>{l();Ja=class t extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}next(){return f(this,null,function*(){this.ensureReader();try{let e=yield this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}})}return(){return f(this,null,function*(){this.ensureReader();let e=this.reader.cancel();return this.reader.releaseLock(),yield e,{done:!0,value:void 0}})}[Symbol.asyncIterator](){return this}static fromReadableStream(e){let r=e.getReader();return new t({start(n){return i();function i(){return r.read().then(({done:a,value:s})=>{if(a){n.close();return}return n.enqueue(s),i()})}}})}static fromAsyncGenerator(e){return new t({pull(n){return f(this,null,function*(){let{value:i,done:a}=yield e.next();a?n.close():i&&n.enqueue(i)})}})}}});function Et(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function _r(t){if(typeof t=="function")return new Mu({func:t});if(Me.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=_r(n);return new Du({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Me,Lu,Du,Mu,Uu,rn=k(()=>{l();en();hr();ei();Me=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new Uu({bound:this,kwargs:e})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}batch(e,r,n){return f(this,null,function*(){let i=this._getOptionsList(r!=null?r:{},e.length),a=n!=null&&n.maxConcurrency&&n.maxConcurrency>0?n==null?void 0:n.maxConcurrency:e.length,s=[];for(let o=0;o<e.length;o+=a){let u=e.slice(o,o+a).map((p,d)=>this.invoke(p,i[d])),c=yield Promise.all(u);s.push(c)}return s.flat()})}_streamIterator(e,r){return ve(this,null,function*(){yield this.invoke(e,r)})}stream(e,r){return f(this,null,function*(){return Ja.fromAsyncGenerator(this._streamIterator(e,r))})}_separateRunnableConfigFromCallOptions(e={}){let r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n=h({},e);return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}_callWithConfig(e,r,n){return f(this,null,function*(){let i=yield Pe.configure(n==null?void 0:n.callbacks,void 0,n==null?void 0:n.tags,void 0,n==null?void 0:n.metadata),a=yield i==null?void 0:i.handleChainStart(this.toJSON(),Et(r,"input"),void 0,n==null?void 0:n.runType),s;try{s=yield e.bind(this)(r)}catch(o){throw yield a==null?void 0:a.handleChainError(o),o}return yield a==null?void 0:a.handleChainEnd(Et(s,"output")),s})}_streamWithConfig(e,r){return ve(this,null,function*(){let n=yield new Y(Pe.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata)),i=yield new Y(n==null?void 0:n.handleChainStart(this.toJSON(),Et("<streamed value>","input"),void 0,r==null?void 0:r.runType)),a,s=!0;try{try{for(var o=Oe(e),u,c,p;u=!(c=yield new Y(o.next())).done;u=!1){let d=c.value;if(yield d,s)if(a===void 0)a=d;else try{a=a.concat(d)}catch(b){a=void 0,s=!1}}}catch(c){p=[c]}finally{try{u&&(c=o.return)&&(yield new Y(c.call(o)))}finally{if(p)throw p[0]}}}catch(d){throw yield new Y(i==null?void 0:i.handleChainError(d)),d}yield new Y(i==null?void 0:i.handleChainEnd(Et(a,"output")))})}_patchConfig(e={},r=void 0){return S(h({},e),{callbacks:r})}pipe(e){return new Lu({first:this,last:_r(e)})}static isRunnable(e){return e.lc_runnable}},Lu=class t extends Me{constructor(e){var r;super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),this.first=e.first,this.middle=(r=e.middle)!=null?r:this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}invoke(e,r){return f(this,null,function*(){let n=yield Pe.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata),i=yield n==null?void 0:n.handleChainStart(this.toJSON(),Et(e,"input")),a=e,s;try{for(let o of[this.first,...this.middle])a=yield o.invoke(a,this._patchConfig(r,i==null?void 0:i.getChild()));s=yield this.last.invoke(a,this._patchConfig(r,i==null?void 0:i.getChild()))}catch(o){throw yield i==null?void 0:i.handleChainError(o),o}return yield i==null?void 0:i.handleChainEnd(Et(s,"output")),s})}batch(e,r,n){return f(this,null,function*(){let i=this._getOptionsList(r!=null?r:{},e.length),a=yield Promise.all(i.map(c=>Pe.configure(c==null?void 0:c.callbacks,void 0,c==null?void 0:c.tags,void 0,c==null?void 0:c.metadata))),s=yield Promise.all(a.map((c,p)=>c==null?void 0:c.handleChainStart(this.toJSON(),Et(e[p],"input")))),o=e,u;try{for(let c=0;c<[this.first,...this.middle].length;c+=1)o=yield this.steps[c].batch(o,s.map(d=>this._patchConfig(i[c],d==null?void 0:d.getChild()),n));u=yield this.last.batch(o,s.map(c=>this._patchConfig(i[this.steps.length-1],c==null?void 0:c.getChild()),n))}catch(c){throw yield Promise.all(s.map(p=>p==null?void 0:p.handleChainError(c))),c}return yield Promise.all(s.map((c,p)=>c==null?void 0:c.handleChainEnd(Et(u[p],"output")))),u})}_streamIterator(e,r){return ve(this,null,function*(){let n=yield new Y(Pe.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata)),i=yield new Y(n==null?void 0:n.handleChainStart(this.toJSON(),Et(e,"input"))),a=e,s=[this.first,...this.middle,this.last],o=s.length-[...s].reverse().findIndex(g=>typeof g.transform!="function")-1;try{for(let g of s.slice(0,o))a=yield new Y(g.invoke(a,this._patchConfig(r,i==null?void 0:i.getChild())))}catch(g){throw yield new Y(i==null?void 0:i.handleChainError(g)),g}let u=!0,c;try{let g=yield new Y(s[o]._streamIterator(a,this._patchConfig(r,i==null?void 0:i.getChild())));for(let v of s.slice(o+1))g=yield new Y(v.transform(g,this._patchConfig(r,i==null?void 0:i.getChild())));try{for(var p=Oe(g),d,b,w;d=!(b=yield new Y(p.next())).done;d=!1){let v=b.value;if(yield v,u)if(c===void 0)c=v;else try{c=c.concat(v)}catch(T){c=void 0,u=!1}}}catch(b){w=[b]}finally{try{d&&(b=p.return)&&(yield new Y(b.call(p)))}finally{if(w)throw w[0]}}}catch(g){throw yield new Y(i==null?void 0:i.handleChainError(g)),g}yield new Y(i==null?void 0:i.handleChainEnd(Et(c,"output")))})}pipe(e){return t.isRunnableSequence(e)?new t({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new t({first:this.first,middle:[...this.middle,this.last],last:_r(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Me.isRunnable(e)}static from([e,...r]){return new t({first:_r(e),middle:r.slice(0,-1).map(_r),last:_r(r[r.length-1])})}},Du=class extends Me{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,n]of Object.entries(e.steps))this.steps[r]=_r(n)}invoke(e,r){return f(this,null,function*(){let n=yield Pe.configure(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata),i=yield n==null?void 0:n.handleChainStart(this.toJSON(),{input:e}),a={};try{for(let[s,o]of Object.entries(this.steps)){let u=yield o.invoke(e,this._patchConfig(r,i==null?void 0:i.getChild()));a[s]=u}}catch(s){throw yield i==null?void 0:i.handleChainError(s),s}return yield i==null?void 0:i.handleChainEnd(a),a})}},Mu=class extends Me{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}invoke(e,r){return f(this,null,function*(){return this._callWithConfig(n=>f(this,null,function*(){return this.func(n)}),e,r)})}};Uu=class t extends Me{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs}bind(e){return new t({bound:this.bound,kwargs:h(h({},this.kwargs),e)})}invoke(e,r){return f(this,null,function*(){return this.bound.invoke(e,h(h({},r),this.kwargs))})}batch(e,r,n){return f(this,null,function*(){let i=Array.isArray(r)?r.map(a=>h(h({},a),this.kwargs)):h(h({},r),this.kwargs);return this.bound.batch(e,i,n)})}stream(e,r){return f(this,null,function*(){return this.bound.stream(e,h(h({},r),this.kwargs))})}}});var lf,qu,Fu,Kw,nn,Bu,ti,an=k(()=>{l();lf=t=>{let e=t.split(""),r=[],n=(a,s)=>{for(let o=s;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let a=n("}",i);if(a<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let a=n("{}",i),s=(a<0?e.slice(i):e.slice(i,a)).join("");r.push({type:"literal",text:s}),i=a<0?e.length:a}}return r},qu=(t,e)=>lf(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),Fu={"f-string":qu,jinja2:(t,e)=>""},Kw={"f-string":lf,jinja2:t=>[]},nn=(t,e,r)=>Fu[e](t,r),Bu=(t,e)=>Kw[e](t),ti=(t,e,r)=>{if(!(e in Fu)){let n=Object.keys(Fu);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=r.reduce((i,a)=>(i[a]="foo",i),{});nn(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}}});var Vu={};mt(Vu,{PromptTemplate:()=>he});var he,Ce=k(()=>{l();Tt();an();he=class t extends vr{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),ti(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}format(e){return f(this,null,function*(){let r=yield this.mergePartialAndUserVariables(e);return nn(this.template,this.templateFormat,r)})}static fromExamples(e,r,n,i=`

`,a=""){let s=[a,...e,r].join(i);return new t({inputVariables:n,template:s})}static fromTemplate(e,i={}){var a=i,{templateFormat:r="f-string"}=a,n=_e(a,["templateFormat"]);let s=new Set;return Bu(e,r).forEach(o=>{o.type==="variable"&&s.add(o.name)}),new t(h({inputVariables:[...s],templateFormat:r,template:e},n))}partial(e){return f(this,null,function*(){var n;let r=h({},this);return r.inputVariables=this.inputVariables.filter(i=>!(i in e)),r.partialVariables=h(h({},(n=this.partialVariables)!=null?n:{}),e),new t(r)})}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static deserialize(e){return f(this,null,function*(){if(!e.template)throw new Error("Prompt template must have a template");return new t({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})})}}});var pf={};mt(pf,{FewShotPromptTemplate:()=>ri});var ri,Ya=k(()=>{l();Tt();an();Ce();ri=class t extends vr{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),ti(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}getExamples(e){return f(this,null,function*(){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")})}partial(e){return f(this,null,function*(){var n;let r=h({},this);return r.inputVariables=this.inputVariables.filter(i=>!(i in e)),r.partialVariables=h(h({},(n=this.partialVariables)!=null?n:{}),e),new t(r)})}format(e){return f(this,null,function*(){let r=yield this.mergePartialAndUserVariables(e),n=yield this.getExamples(r),i=yield Promise.all(n.map(s=>this.examplePrompt.format(s))),a=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return nn(a,this.templateFormat,r)})}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static deserialize(e){return f(this,null,function*(){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let n=yield he.deserialize(r),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new t({inputVariables:e.input_variables,examplePrompt:n,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})})}}});var sn,Ut,vr,Tt=k(()=>{l();ct();hr();rn();sn=class extends Jr{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new gt(this.value)]}},Ut=class extends Me{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}mergePartialAndUserVariables(e){return f(this,null,function*(){var a;let r=(a=this.partialVariables)!=null?a:{},n={};for(let[s,o]of Object.entries(r))typeof o=="string"?n[s]=o:n[s]=yield o();return h(h({},n),e)})}invoke(e,r){return f(this,null,function*(){return this._callWithConfig(n=>this.formatPromptValue(n),e,S(h({},r),{runType:"prompt"}))})}serialize(){throw new Error("Use .toJSON() instead")}static deserialize(e){return f(this,null,function*(){switch(e._type){case"prompt":{let{PromptTemplate:r}=yield Promise.resolve().then(()=>(Ce(),Vu));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=yield Promise.resolve().then(()=>(Ce(),Vu));return r.deserialize(S(h({},e),{_type:"prompt"}))}case"few_shot":{let{FewShotPromptTemplate:r}=yield Promise.resolve().then(()=>(Ya(),pf));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}})}},vr=class extends Ut{formatPromptValue(e){return f(this,null,function*(){let r=yield this.format(e);return new sn(r)})}}});var zu,ni,ii,Wa,bt,ai,Qt,wt,xr=k(()=>{l();ct();hr();Tt();Ce();zu=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}},ni=class extends Jr{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}},ii=class extends zu{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}formatMessages(e){return f(this,null,function*(){return[yield this.format(e)]})}},Wa=class extends Ut{constructor(e){super(e)}format(e){return f(this,null,function*(){return(yield this.formatPromptValue(e)).toString()})}formatPromptValue(e){return f(this,null,function*(){let r=yield this.formatMessages(e);return new ni(r)})}},bt=class extends ii{format(e){return f(this,null,function*(){return new gt(yield this.prompt.format(e))})}static fromTemplate(e){return new this(he.fromTemplate(e))}},ai=class extends ii{format(e){return f(this,null,function*(){return new Ot(yield this.prompt.format(e))})}static fromTemplate(e){return new this(he.fromTemplate(e))}},Qt=class extends ii{format(e){return f(this,null,function*(){return new Hr(yield this.prompt.format(e))})}static fromTemplate(e){return new this(he.fromTemplate(e))}},wt=class t extends Wa{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=new Set;for(let s of this.promptMessages)for(let o of s.inputVariables)r.add(o);let n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),i=new Set([...n].filter(s=>!r.has(s)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are not used in any of the prompt messages.`);let a=new Set([...r].filter(s=>!n.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}formatMessages(e){return f(this,null,function*(){let r=yield this.mergePartialAndUserVariables(e),n=[];for(let i of this.promptMessages){let a=i.inputVariables.reduce((o,u)=>{if(!(u in r))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=r[u],o},{}),s=yield i.formatMessages(a);n=n.concat(s)}return n})}partial(e){return f(this,null,function*(){var n;let r=h({},this);return r.inputVariables=this.inputVariables.filter(i=>!(i in e)),r.partialVariables=h(h({},(n=this.partialVariables)!=null?n:{}),e),new t(r)})}static fromPromptMessages(e){let r=e.reduce((a,s)=>a.concat(s instanceof t?s.promptMessages:[s]),[]),n=e.reduce((a,s)=>s instanceof t?Object.assign(a,s.partialVariables):a,Object.create(null)),i=new Set;for(let a of r)for(let s of a.inputVariables)s in n||i.add(s);return new t({inputVariables:[...i],promptMessages:r,partialVariables:n})}}});var Ga,hf=k(()=>{l();ct();si();en();Ga=class t extends Xt{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n!=null&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}invoke(e,r){return f(this,null,function*(){let n=t._convertInputToPromptValue(e);return(yield this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message})}_streamResponseChunks(e,r,n){return ve(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(e,r){return ve(this,null,function*(){if(this._streamResponseChunks===t.prototype._streamResponseChunks)yield this.invoke(e,r);else{let u=t._convertInputToPromptValue(e).toChatMessages(),[c,p]=this._separateRunnableConfigFromCallOptions(r),d=yield new Y(Pe.configure(c.callbacks,this.callbacks,c.tags,this.tags,c.metadata,this.metadata,{verbose:this.verbose})),b={options:p,invocation_params:this==null?void 0:this.invocationParams(p)},w=yield new Y(d==null?void 0:d.handleChatModelStart(this.toJSON(),[u],void 0,void 0,b)),g;try{try{for(var n=Oe(this._streamResponseChunks(u,p,w==null?void 0:w[0])),i,a,s;i=!(a=yield new Y(n.next())).done;i=!1){let v=a.value;yield v.message,g?g=g.concat(v):g=v}}catch(a){s=[a]}finally{try{i&&(a=n.return)&&(yield new Y(a.call(n)))}finally{if(s)throw s[0]}}}catch(v){throw yield new Y(Promise.all((w!=null?w:[]).map(T=>T==null?void 0:T.handleLLMError(v)))),v}yield new Y(Promise.all((w!=null?w:[]).map(v=>v==null?void 0:v.handleLLMEnd({generations:[[g]]}))))}})}generate(e,r,n){return f(this,null,function*(){var g,v;let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i),o=yield Pe.configure((g=a.callbacks)!=null?g:n,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this==null?void 0:this.invocationParams(i)},c=yield o==null?void 0:o.handleChatModelStart(this.toJSON(),e,void 0,void 0,u),p=yield Promise.allSettled(e.map((T,j)=>this._generate(T,S(h({},s),{promptIndex:j}),c==null?void 0:c[j]))),d=[],b=[];yield Promise.all(p.map((T,j)=>f(this,null,function*(){var I,q;if(T.status==="fulfilled"){let P=T.value;return d[j]=P.generations,b[j]=P.llmOutput,(I=c==null?void 0:c[j])==null?void 0:I.handleLLMEnd({generations:[P.generations],llmOutput:P.llmOutput})}else return yield(q=c==null?void 0:c[j])==null?void 0:q.handleLLMError(T.reason),Promise.reject(T.reason)})));let w={generations:d,llmOutput:b.length?(v=this._combineLLMOutput)==null?void 0:v.call(this,...b):void 0};return Object.defineProperty(w,Yr,{value:c?{runIds:c==null?void 0:c.map(T=>T.runId)}:void 0,configurable:!0}),w})}invocationParams(e){return{}}_modelType(){return"base_chat_model"}generatePrompt(e,r,n){return f(this,null,function*(){let i=e.map(a=>a.toChatMessages());return this.generate(i,r,n)})}call(e,r,n){return f(this,null,function*(){return(yield this.generate([e],r,n)).generations[0][0].message})}callPrompt(e,r,n){return f(this,null,function*(){let i=e.toChatMessages();return this.call(i,r,n)})}predictMessages(e,r,n){return f(this,null,function*(){return this.call(e,r,n)})}predict(e,r,n){return f(this,null,function*(){let i=new gt(e);return(yield this.call([i],r,n)).content})}}});var on,Qa=k(()=>{l();on=(t,e,r,n,i,a,s,o,u)=>f(void 0,null,function*(){return(yield t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",args:r,kwargs:n,tags:i,request_response:a,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(o/1e3),api_key:u})})).json()})});function $u(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage=S(h({},t.errorMessage),{[e]:r}))}function ce(t,e,r,n,i){t[e]=r,$u(t,e,n,i)}var er=k(()=>{l()});var df,ff,Ku=k(()=>{l();df={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",mapStrategy:"entries",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email"},ff=t=>typeof t=="string"?S(h({},df),{name:t}):h(h({},df),t)});function Zu(){return Hw}function H(t,e){let r=Ju({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zu(),es].filter(n=>!!n)});t.common.issues.push(r)}function ie(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>s.code!=="invalid_type"?{message:o.defaultError}:typeof o.data=="undefined"?{message:n!=null?n:o.defaultError}:{message:r!=null?r:o.defaultError},description:i}}function n_(t,e){return!!((e==="v4"||!e)&&e_.test(t)||(e==="v6"||!e)&&t_.test(t))}function i_(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return a%s/Math.pow(10,i)}function un(t){if(t instanceof st){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=St.create(un(n))}return new st(S(h({},t._def),{shape:()=>e}))}else return t instanceof rr?new rr(S(h({},t._def),{type:un(t.element)})):t instanceof St?St.create(un(t.unwrap())):t instanceof nr?nr.create(un(t.unwrap())):t instanceof Ft?Ft.create(t.items.map(e=>un(e))):t}function Gu(t,e){let r=Ar(t),n=Ar(e);if(t===e)return{valid:!0,data:t};if(r===K.object&&n===K.object){let i=fe.objectKeys(e),a=fe.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s=h(h({},t),e);for(let o of a){let u=Gu(t[o],e[o]);if(!u.valid)return{valid:!1};s[o]=u.data}return{valid:!0,data:s}}else if(r===K.array&&n===K.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let s=t[a],o=e[a],u=Gu(s,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===K.date&&n===K.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}function wf(t,e){return new yn(h({values:t,typeName:F.ZodEnum},ie(e)))}var fe,mf,K,Ar,B,ht,es,Hw,Ju,Qe,ae,Zw,tt,yf,gf,ts,Yu,X,dt,bf,se,Jw,Yw,Ww,Gw,Qw,Xw,Hu,e_,t_,r_,cn,oi,ui,ci,li,pi,ln,pn,hi,tr,Ct,di,rr,st,hn,Xa,Wu,dn,Ft,Qu,fi,mi,Xu,fn,mn,yn,gn,Or,_t,St,nr,bn,yi,gi,mk,ec,rs,bi,yk,F,gk,bk,wk,_k,vk,xk,Ak,Ok,Pk,Ek,Tk,Sk,Ck,Ik,kk,Rk,jk,Nk,Lk,Dk,Mk,Uk,Fk,qk,Bk,Vk,zk,$k,Kk,Hk,Zk,Jk,Yk,Wk,ns=k(()=>{l();(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let s of i)a[s]=s;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(let o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(let s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(fe||(fe={}));(function(t){t.mergeShapes=(e,r)=>h(h({},e),r)})(mf||(mf={}));K=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ar=t=>{switch(typeof t){case"undefined":return K.undefined;case"string":return K.string;case"number":return isNaN(t)?K.nan:K.number;case"boolean":return K.boolean;case"function":return K.function;case"bigint":return K.bigint;case"symbol":return K.symbol;case"object":return Array.isArray(t)?K.array:t===null?K.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?K.promise:typeof Map!="undefined"&&t instanceof Map?K.map:typeof Set!="undefined"&&t instanceof Set?K.set:typeof Date!="undefined"&&t instanceof Date?K.date:K.object;default:return K.unknown}},B=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ht=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let o=n,u=0;for(;u<s.path.length;){let c=s.path[u];u===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(s))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ht.create=t=>new ht(t);es=(t,e)=>{let r;switch(t.code){case B.invalid_type:t.received===K.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,fe.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:r=`Unrecognized key(s) in object: ${fe.joinValues(t.keys,", ")}`;break;case B.invalid_union:r="Invalid input";break;case B.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${fe.joinValues(t.options)}`;break;case B.invalid_enum_value:r=`Invalid enum value. Expected ${fe.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:r="Invalid function arguments";break;case B.invalid_return_type:r="Invalid function return type";break;case B.invalid_date:r="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:fe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case B.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case B.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case B.custom:r="Invalid input";break;case B.invalid_intersection_types:r="Intersection results could not be merged";break;case B.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:r="Number must be finite";break;default:r=e.defaultError,fe.assertNever(t)}return{message:r}},Hw=es;Ju=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],s=S(h({},i),{path:a}),o="",u=n.filter(c=>!!c).slice().reverse();for(let c of u)o=c(s,{data:e,defaultError:o}).message;return S(h({},i),{path:a,message:i.message||o})};Qe=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ae;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,r){return f(this,null,function*(){let n=[];for(let i of r)n.push({key:yield i.key,value:yield i.value});return t.mergeObjectSync(e,n)})}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return ae;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value!="undefined"||i.alwaysSet)&&(n[a.value]=s.value)}return{status:e.value,value:n}}},ae=Object.freeze({status:"aborted"}),Zw=t=>({status:"dirty",value:t}),tt=t=>({status:"valid",value:t}),yf=t=>t.status==="aborted",gf=t=>t.status==="dirty",ts=t=>t.status==="valid",Yu=t=>typeof Promise!="undefined"&&t instanceof Promise;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));dt=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},bf=(t,e)=>{if(ts(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ht(t.common.issues);return this._error=r,this._error}}};se=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ar(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ar(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qe,ctx:{common:e.parent.common,data:e.data,parsedType:Ar(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Yu(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ar(e)},a=this._parseSync({data:e,path:i.path,parent:i});return bf(i,a)}parseAsync(e,r){return f(this,null,function*(){let n=yield this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error})}safeParseAsync(e,r){return f(this,null,function*(){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ar(e)},i=this._parse({data:e,path:n.path,parent:n}),a=yield Yu(i)?i:Promise.resolve(i);return bf(n,a)})}refine(e,r){let n=i=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let s=e(i),o=()=>a.addIssue(h({code:B.custom},n(i)));return typeof Promise!="undefined"&&s instanceof Promise?s.then(u=>u?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new _t({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return St.create(this,this._def)}nullable(){return nr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rr.create(this,this._def)}promise(){return Or.create(this,this._def)}or(e){return hn.create([this,e],this._def)}and(e){return dn.create(this,e,this._def)}transform(e){return new _t(S(h({},ie(this._def)),{schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){let r=typeof e=="function"?e:()=>e;return new bn(S(h({},ie(this._def)),{innerType:this,defaultValue:r,typeName:F.ZodDefault}))}brand(){return new ec(h({typeName:F.ZodBranded,type:this},ie(this._def)))}catch(e){let r=typeof e=="function"?e:()=>e;return new yi(S(h({},ie(this._def)),{innerType:this,catchValue:r,typeName:F.ZodCatch}))}describe(e){let r=this.constructor;return new r(S(h({},this._def),{description:e}))}pipe(e){return rs.create(this,e)}readonly(){return bi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Jw=/^c[^\s-]{8,}$/i,Yw=/^[a-z][a-z0-9]*$/,Ww=/^[0-9A-HJKMNP-TV-Z]{26}$/,Gw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qw=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",e_=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,t_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,r_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");cn=class t extends se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==K.string){let a=this._getOrReturnCtx(e);return H(a,{code:B.invalid_type,expected:K.string,received:a.parsedType}),ae}let n=new Qe,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:B.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:B.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?H(i,{code:B.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&H(i,{code:B.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Qw.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"email",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Hu||(Hu=new RegExp(Xw,"u")),Hu.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"emoji",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Gw.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"uuid",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Jw.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Yw.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"cuid2",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Ww.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ulid",code:B.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch(s){i=this._getOrReturnCtx(e,i),H(i,{validation:"url",code:B.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"regex",code:B.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),H(i,{code:B.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:B.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),H(i,{code:B.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?r_(a).test(e.data)||(i=this._getOrReturnCtx(e,i),H(i,{code:B.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?n_(e.data,a.version)||(i=this._getOrReturnCtx(e,i),H(i,{validation:"ip",code:B.invalid_string,message:a.message}),n.dirty()):fe.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),h({validation:r,code:B.invalid_string},X.errToObj(n)))}_addCheck(e){return new t(S(h({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(h({kind:"email"},X.errToObj(e)))}url(e){return this._addCheck(h({kind:"url"},X.errToObj(e)))}emoji(e){return this._addCheck(h({kind:"emoji"},X.errToObj(e)))}uuid(e){return this._addCheck(h({kind:"uuid"},X.errToObj(e)))}cuid(e){return this._addCheck(h({kind:"cuid"},X.errToObj(e)))}cuid2(e){return this._addCheck(h({kind:"cuid2"},X.errToObj(e)))}ulid(e){return this._addCheck(h({kind:"ulid"},X.errToObj(e)))}ip(e){return this._addCheck(h({kind:"ip"},X.errToObj(e)))}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck(h({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1},X.errToObj(e==null?void 0:e.message)))}regex(e,r){return this._addCheck(h({kind:"regex",regex:e},X.errToObj(r)))}includes(e,r){return this._addCheck(h({kind:"includes",value:e,position:r==null?void 0:r.position},X.errToObj(r==null?void 0:r.message)))}startsWith(e,r){return this._addCheck(h({kind:"startsWith",value:e},X.errToObj(r)))}endsWith(e,r){return this._addCheck(h({kind:"endsWith",value:e},X.errToObj(r)))}min(e,r){return this._addCheck(h({kind:"min",value:e},X.errToObj(r)))}max(e,r){return this._addCheck(h({kind:"max",value:e},X.errToObj(r)))}length(e,r){return this._addCheck(h({kind:"length",value:e},X.errToObj(r)))}nonempty(e){return this.min(1,X.errToObj(e))}trim(){return new t(S(h({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new t(S(h({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new t(S(h({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};cn.create=t=>{var e;return new cn(h({checks:[],typeName:F.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1},ie(t)))};oi=class t extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==K.number){let a=this._getOrReturnCtx(e);return H(a,{code:B.invalid_type,expected:K.number,received:a.parsedType}),ae}let n,i=new Qe;for(let a of this._def.checks)a.kind==="int"?fe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{code:B.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?i_(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{code:B.not_finite,message:a.message}),i.dirty()):fe.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,X.toString(r))}gt(e,r){return this.setLimit("min",e,!1,X.toString(r))}lte(e,r){return this.setLimit("max",e,!0,X.toString(r))}lt(e,r){return this.setLimit("max",e,!1,X.toString(r))}setLimit(e,r,n,i){return new t(S(h({},this._def),{checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:X.toString(i)}]}))}_addCheck(e){return new t(S(h({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};oi.create=t=>new oi(h({checks:[],typeName:F.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1},ie(t)));ui=class t extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==K.bigint){let a=this._getOrReturnCtx(e);return H(a,{code:B.invalid_type,expected:K.bigint,received:a.parsedType}),ae}let n,i=new Qe;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),H(n,{code:B.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):fe.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,X.toString(r))}gt(e,r){return this.setLimit("min",e,!1,X.toString(r))}lte(e,r){return this.setLimit("max",e,!0,X.toString(r))}lt(e,r){return this.setLimit("max",e,!1,X.toString(r))}setLimit(e,r,n,i){return new t(S(h({},this._def),{checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:X.toString(i)}]}))}_addCheck(e){return new t(S(h({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ui.create=t=>{var e;return new ui(h({checks:[],typeName:F.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1},ie(t)))};ci=class extends se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==K.boolean){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.boolean,received:n.parsedType}),ae}return tt(e.data)}};ci.create=t=>new ci(h({typeName:F.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1},ie(t)));li=class t extends se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==K.date){let a=this._getOrReturnCtx(e);return H(a,{code:B.invalid_type,expected:K.date,received:a.parsedType}),ae}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return H(a,{code:B.invalid_date}),ae}let n=new Qe,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:B.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),H(i,{code:B.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):fe.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t(S(h({},this._def),{checks:[...this._def.checks,e]}))}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};li.create=t=>new li(h({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:F.ZodDate},ie(t)));pi=class extends se{_parse(e){if(this._getType(e)!==K.symbol){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.symbol,received:n.parsedType}),ae}return tt(e.data)}};pi.create=t=>new pi(h({typeName:F.ZodSymbol},ie(t)));ln=class extends se{_parse(e){if(this._getType(e)!==K.undefined){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.undefined,received:n.parsedType}),ae}return tt(e.data)}};ln.create=t=>new ln(h({typeName:F.ZodUndefined},ie(t)));pn=class extends se{_parse(e){if(this._getType(e)!==K.null){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.null,received:n.parsedType}),ae}return tt(e.data)}};pn.create=t=>new pn(h({typeName:F.ZodNull},ie(t)));hi=class extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return tt(e.data)}};hi.create=t=>new hi(h({typeName:F.ZodAny},ie(t)));tr=class extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tt(e.data)}};tr.create=t=>new tr(h({typeName:F.ZodUnknown},ie(t)));Ct=class extends se{_parse(e){let r=this._getOrReturnCtx(e);return H(r,{code:B.invalid_type,expected:K.never,received:r.parsedType}),ae}};Ct.create=t=>new Ct(h({typeName:F.ZodNever},ie(t)));di=class extends se{_parse(e){if(this._getType(e)!==K.undefined){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.void,received:n.parsedType}),ae}return tt(e.data)}};di.create=t=>new di(h({typeName:F.ZodVoid},ie(t)));rr=class t extends se{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==K.array)return H(r,{code:B.invalid_type,expected:K.array,received:r.parsedType}),ae;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(s||o)&&(H(r,{code:s?B.too_big:B.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(H(r,{code:B.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(H(r,{code:B.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,o)=>i.type._parseAsync(new dt(r,s,r.path,o)))).then(s=>Qe.mergeArray(n,s));let a=[...r.data].map((s,o)=>i.type._parseSync(new dt(r,s,r.path,o)));return Qe.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t(S(h({},this._def),{minLength:{value:e,message:X.toString(r)}}))}max(e,r){return new t(S(h({},this._def),{maxLength:{value:e,message:X.toString(r)}}))}length(e,r){return new t(S(h({},this._def),{exactLength:{value:e,message:X.toString(r)}}))}nonempty(e){return this.min(1,e)}};rr.create=(t,e)=>new rr(h({type:t,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray},ie(e)));st=class t extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=fe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==K.object){let c=this._getOrReturnCtx(e);return H(c,{code:B.invalid_type,expected:K.object,received:c.parsedType}),ae}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ct&&this._def.unknownKeys==="strip"))for(let c in i.data)s.includes(c)||o.push(c);let u=[];for(let c of s){let p=a[c],d=i.data[c];u.push({key:{status:"valid",value:c},value:p._parse(new dt(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ct){let c=this._def.unknownKeys;if(c==="passthrough")for(let p of o)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(c==="strict")o.length>0&&(H(i,{code:B.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let p of o){let d=i.data[p];u.push({key:{status:"valid",value:p},value:c._parse(new dt(i,d,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(()=>f(this,null,function*(){let c=[];for(let p of u){let d=yield p.key;c.push({key:d,value:yield p.value,alwaysSet:p.alwaysSet})}return c})).then(c=>Qe.mergeObjectSync(n,c)):Qe.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new t(h(S(h({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(r,n)=>{var i,a,s,o;let u=(s=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=X.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}))}strip(){return new t(S(h({},this._def),{unknownKeys:"strip"}))}passthrough(){return new t(S(h({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new t(S(h({},this._def),{shape:()=>h(h({},this._def.shape()),e)}))}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>h(h({},this._def.shape()),e._def.shape()),typeName:F.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t(S(h({},this._def),{catchall:e}))}pick(e){let r={};return fe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t(S(h({},this._def),{shape:()=>r}))}omit(e){let r={};return fe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t(S(h({},this._def),{shape:()=>r}))}deepPartial(){return un(this)}partial(e){let r={};return fe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t(S(h({},this._def),{shape:()=>r}))}required(e){let r={};return fe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof St;)a=a._def.innerType;r[n]=a}}),new t(S(h({},this._def),{shape:()=>r}))}keyof(){return wf(fe.objectKeys(this.shape))}};st.create=(t,e)=>new st(h({shape:()=>t,unknownKeys:"strip",catchall:Ct.create(),typeName:F.ZodObject},ie(e)));st.strictCreate=(t,e)=>new st(h({shape:()=>t,unknownKeys:"strict",catchall:Ct.create(),typeName:F.ZodObject},ie(e)));st.lazycreate=(t,e)=>new st(h({shape:t,unknownKeys:"strip",catchall:Ct.create(),typeName:F.ZodObject},ie(e)));hn=class extends se{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let o of a)if(o.result.status==="valid")return o.result;for(let o of a)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let s=a.map(o=>new ht(o.ctx.common.issues));return H(r,{code:B.invalid_union,unionErrors:s}),ae}if(r.common.async)return Promise.all(n.map(a=>f(this,null,function*(){let s=S(h({},r),{common:S(h({},r.common),{issues:[]}),parent:null});return{result:yield a._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}}))).then(i);{let a,s=[];for(let u of n){let c=S(h({},r),{common:S(h({},r.common),{issues:[]}),parent:null}),p=u._parseSync({data:r.data,path:r.path,parent:c});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(u=>new ht(u));return H(r,{code:B.invalid_union,unionErrors:o}),ae}}get options(){return this._def.options}};hn.create=(t,e)=>new hn(h({options:t,typeName:F.ZodUnion},ie(e)));Xa=t=>t instanceof fn?Xa(t.schema):t instanceof _t?Xa(t.innerType()):t instanceof mn?[t.value]:t instanceof yn?t.options:t instanceof gn?Object.keys(t.enum):t instanceof bn?Xa(t._def.innerType):t instanceof ln?[void 0]:t instanceof pn?[null]:null,Wu=class t extends se{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==K.object)return H(r,{code:B.invalid_type,expected:K.object,received:r.parsedType}),ae;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(H(r,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let s=Xa(a.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of s){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,a)}}return new t(h({typeName:F.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i},ie(n)))}};dn=class extends se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,s)=>{if(yf(a)||yf(s))return ae;let o=Gu(a.value,s.value);return o.valid?((gf(a)||gf(s))&&r.dirty(),{status:r.value,value:o.data}):(H(n,{code:B.invalid_intersection_types}),ae)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};dn.create=(t,e,r)=>new dn(h({left:t,right:e,typeName:F.ZodIntersection},ie(r)));Ft=class t extends se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==K.array)return H(n,{code:B.invalid_type,expected:K.array,received:n.parsedType}),ae;if(n.data.length<this._def.items.length)return H(n,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&n.data.length>this._def.items.length&&(H(n,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((s,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new dt(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(a).then(s=>Qe.mergeArray(r,s)):Qe.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t(S(h({},this._def),{rest:e}))}};Ft.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ft(h({items:t,typeName:F.ZodTuple,rest:null},ie(e)))};Qu=class t extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==K.object)return H(n,{code:B.invalid_type,expected:K.object,received:n.parsedType}),ae;let i=[],a=this._def.keyType,s=this._def.valueType;for(let o in n.data)i.push({key:a._parse(new dt(n,o,n.path,o)),value:s._parse(new dt(n,n.data[o],n.path,o))});return n.common.async?Qe.mergeObjectAsync(r,i):Qe.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof se?new t(h({keyType:e,valueType:r,typeName:F.ZodRecord},ie(n))):new t(h({keyType:cn.create(),valueType:e,typeName:F.ZodRecord},ie(r)))}},fi=class extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==K.map)return H(n,{code:B.invalid_type,expected:K.map,received:n.parsedType}),ae;let i=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map(([o,u],c)=>({key:i._parse(new dt(n,o,n.path,[c,"key"])),value:a._parse(new dt(n,u,n.path,[c,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(()=>f(this,null,function*(){for(let u of s){let c=yield u.key,p=yield u.value;if(c.status==="aborted"||p.status==="aborted")return ae;(c.status==="dirty"||p.status==="dirty")&&r.dirty(),o.set(c.value,p.value)}return{status:r.value,value:o}}))}else{let o=new Map;for(let u of s){let c=u.key,p=u.value;if(c.status==="aborted"||p.status==="aborted")return ae;(c.status==="dirty"||p.status==="dirty")&&r.dirty(),o.set(c.value,p.value)}return{status:r.value,value:o}}}};fi.create=(t,e,r)=>new fi(h({valueType:e,keyType:t,typeName:F.ZodMap},ie(r)));mi=class t extends se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==K.set)return H(n,{code:B.invalid_type,expected:K.set,received:n.parsedType}),ae;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(H(n,{code:B.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(H(n,{code:B.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function s(u){let c=new Set;for(let p of u){if(p.status==="aborted")return ae;p.status==="dirty"&&r.dirty(),c.add(p.value)}return{status:r.value,value:c}}let o=[...n.data.values()].map((u,c)=>a._parse(new dt(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>s(u)):s(o)}min(e,r){return new t(S(h({},this._def),{minSize:{value:e,message:X.toString(r)}}))}max(e,r){return new t(S(h({},this._def),{maxSize:{value:e,message:X.toString(r)}}))}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};mi.create=(t,e)=>new mi(h({valueType:t,minSize:null,maxSize:null,typeName:F.ZodSet},ie(e)));Xu=class t extends se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==K.function)return H(r,{code:B.invalid_type,expected:K.function,received:r.parsedType}),ae;function n(o,u){return Ju({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zu(),es].filter(c=>!!c),issueData:{code:B.invalid_arguments,argumentsError:u}})}function i(o,u){return Ju({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zu(),es].filter(c=>!!c),issueData:{code:B.invalid_return_type,returnTypeError:u}})}let a={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof Or){let o=this;return tt(function(...u){return f(this,null,function*(){let c=new ht([]),p=yield o._def.args.parseAsync(u,a).catch(w=>{throw c.addIssue(n(u,w)),c}),d=yield Reflect.apply(s,this,p);return yield o._def.returns._def.type.parseAsync(d,a).catch(w=>{throw c.addIssue(i(d,w)),c})})})}else{let o=this;return tt(function(...u){let c=o._def.args.safeParse(u,a);if(!c.success)throw new ht([n(u,c.error)]);let p=Reflect.apply(s,this,c.data),d=o._def.returns.safeParse(p,a);if(!d.success)throw new ht([i(p,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t(S(h({},this._def),{args:Ft.create(e).rest(tr.create())}))}returns(e){return new t(S(h({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t(h({args:e||Ft.create([]).rest(tr.create()),returns:r||tr.create(),typeName:F.ZodFunction},ie(n)))}},fn=class extends se{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};fn.create=(t,e)=>new fn(h({getter:t,typeName:F.ZodLazy},ie(e)));mn=class extends se{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return H(r,{received:r.data,code:B.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:e.data}}get value(){return this._def.value}};mn.create=(t,e)=>new mn(h({value:t,typeName:F.ZodLiteral},ie(e)));yn=class t extends se{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return H(r,{expected:fe.joinValues(n),received:r.parsedType,code:B.invalid_type}),ae}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return H(r,{received:r.data,code:B.invalid_enum_value,options:n}),ae}return tt(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};yn.create=wf;gn=class extends se{_parse(e){let r=fe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==K.string&&n.parsedType!==K.number){let i=fe.objectValues(r);return H(n,{expected:fe.joinValues(i),received:n.parsedType,code:B.invalid_type}),ae}if(r.indexOf(e.data)===-1){let i=fe.objectValues(r);return H(n,{received:n.data,code:B.invalid_enum_value,options:i}),ae}return tt(e.data)}get enum(){return this._def.values}};gn.create=(t,e)=>new gn(h({values:t,typeName:F.ZodNativeEnum},ie(e)));Or=class extends se{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==K.promise&&r.common.async===!1)return H(r,{code:B.invalid_type,expected:K.promise,received:r.parsedType}),ae;let n=r.parsedType===K.promise?r.data:Promise.resolve(r.data);return tt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Or.create=(t,e)=>new Or(h({type:t,typeName:F.ZodPromise},ie(e)));_t=class extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{H(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let s=i.transform(n.data,a);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=o=>{let u=i.refinement(o,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ae:(o.status==="dirty"&&r.dirty(),s(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?ae:(o.status==="dirty"&&r.dirty(),s(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ts(s))return s;let o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>ts(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:r.value,value:o})):s);fe.assertNever(i)}};_t.create=(t,e,r)=>new _t(h({schema:t,typeName:F.ZodEffects,effect:e},ie(r)));_t.createWithPreprocess=(t,e,r)=>new _t(h({schema:e,effect:{type:"preprocess",transform:t},typeName:F.ZodEffects},ie(r)));St=class extends se{_parse(e){return this._getType(e)===K.undefined?tt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};St.create=(t,e)=>new St(h({innerType:t,typeName:F.ZodOptional},ie(e)));nr=class extends se{_parse(e){return this._getType(e)===K.null?tt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};nr.create=(t,e)=>new nr(h({innerType:t,typeName:F.ZodNullable},ie(e)));bn=class extends se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===K.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};bn.create=(t,e)=>new bn(h({innerType:t,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},ie(e)));yi=class extends se{_parse(e){let{ctx:r}=this._processInputParams(e),n=S(h({},r),{common:S(h({},r.common),{issues:[]})}),i=this._def.innerType._parse({data:n.data,path:n.path,parent:h({},n)});return Yu(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ht(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ht(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};yi.create=(t,e)=>new yi(h({innerType:t,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},ie(e)));gi=class extends se{_parse(e){if(this._getType(e)!==K.nan){let n=this._getOrReturnCtx(e);return H(n,{code:B.invalid_type,expected:K.nan,received:n.parsedType}),ae}return{status:"valid",value:e.data}}};gi.create=t=>new gi(h({typeName:F.ZodNaN},ie(t)));mk=Symbol("zod_brand"),ec=class extends se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},rs=class t extends se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(()=>f(this,null,function*(){let a=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ae:a.status==="dirty"?(r.dirty(),Zw(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})}))();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ae:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:F.ZodPipeline})}},bi=class extends se{_parse(e){let r=this._def.innerType._parse(e);return ts(r)&&(r.value=Object.freeze(r.value)),r}};bi.create=(t,e)=>new bi(h({innerType:t,typeName:F.ZodReadonly},ie(e)));yk={object:st.lazycreate};(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(F||(F={}));gk=cn.create,bk=oi.create,wk=gi.create,_k=ui.create,vk=ci.create,xk=li.create,Ak=pi.create,Ok=ln.create,Pk=pn.create,Ek=hi.create,Tk=tr.create,Sk=Ct.create,Ck=di.create,Ik=rr.create,kk=st.create,Rk=st.strictCreate,jk=hn.create,Nk=Wu.create,Lk=dn.create,Dk=Ft.create,Mk=Qu.create,Uk=fi.create,Fk=mi.create,qk=Xu.create,Bk=fn.create,Vk=mn.create,zk=yn.create,$k=gn.create,Kk=Or.create,Hk=_t.create,Zk=St.create,Jk=nr.create,Yk=_t.createWithPreprocess,Wk=rs.create});function _f(){return{}}var tc=k(()=>{l()});function vf(t,e){var n,i;let r={type:"array"};return((i=(n=t.type)==null?void 0:n._def)==null?void 0:i.typeName)!==F.ZodAny&&(r.items=re(t.type._def,S(h({},e),{currentPath:[...e.currentPath,"items"]}))),t.minLength&&ce(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ce(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ce(r,"minItems",t.exactLength.value,t.exactLength.message,e),ce(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}var rc=k(()=>{l();ns();er();Ie()});function xf(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?ce(r,"minimum",n.value,n.message,e):ce(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),ce(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ce(r,"maximum",n.value,n.message,e):ce(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),ce(r,"maximum",n.value,n.message,e));break;case"multipleOf":ce(r,"multipleOf",n.value,n.message,e);break}return r}var nc=k(()=>{l();er()});function Af(){return{type:"boolean"}}var ic=k(()=>{l()});function Of(t,e){return re(t.type._def,e)}var ac=k(()=>{l();Ie()});var Pf,sc=k(()=>{l();Ie();Pf=(t,e)=>re(t.innerType._def,e)});function Ef(t,e){return e.dateStrategy=="integer"?a_(t,e):{type:"string",format:"date-time"}}var a_,oc=k(()=>{l();er();a_=(t,e)=>{let r={type:"integer",format:"unix-time"};for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&ce(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&ce(r,"maximum",n.value,n.message,e);break}return r}});function Tf(t,e){return S(h({},re(t.innerType._def,e)),{default:t.defaultValue()})}var uc=k(()=>{l();Ie()});function Sf(t,e){return e.effectStrategy==="input"?re(t.schema._def,e):{}}var cc=k(()=>{l();Ie()});function Cf(t){return{type:"string",enum:t.values}}var lc=k(()=>{l()});function If(t,e){let r=[re(t.left._def,S(h({},e),{currentPath:[...e.currentPath,"allOf","0"]})),re(t.right._def,S(h({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(s_(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){let s=a,{additionalProperties:u}=s;o=_e(s,["additionalProperties"])}else n=void 0;i.push(o)}}),i.length?h({allOf:i},n):void 0}var s_,pc=k(()=>{l();Ie();s_=t=>"type"in t&&t.type==="string"?!1:"allOf"in t});function kf(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var hc=k(()=>{l()});function is(t,e){let r={type:"string"};function n(i){return e.patternStrategy==="escape"?o_(i):i}if(t.checks)for(let i of t.checks)switch(i.kind){case"min":ce(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e);break;case"max":ce(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Pr(r,"email",i.message,e);break;case"format:idn-email":Pr(r,"idn-email",i.message,e);break;case"pattern:zod":qt(r,wi.email,i.message,e);break}break;case"url":Pr(r,"uri",i.message,e);break;case"uuid":Pr(r,"uuid",i.message,e);break;case"regex":qt(r,i.regex.source,i.message,e);break;case"cuid":qt(r,wi.cuid,i.message,e);break;case"cuid2":qt(r,wi.cuid2,i.message,e);break;case"startsWith":qt(r,"^"+n(i.value),i.message,e);break;case"endsWith":qt(r,n(i.value)+"$",i.message,e);break;case"datetime":Pr(r,"date-time",i.message,e);break;case"length":ce(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e),ce(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"includes":{qt(r,n(i.value),i.message,e);break}case"ip":{i.version!=="v6"&&Pr(r,"ipv4",i.message,e),i.version!=="v4"&&Pr(r,"ipv6",i.message,e);break}case"emoji":qt(r,wi.emoji,i.message,e);break;case"ulid":{qt(r,wi.ulid,i.message,e);break}case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}var wi,o_,Pr,qt,as=k(()=>{l();er();wi={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$"};o_=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Pr=(t,e,r,n)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push(h({format:t.format},t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}})),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push(h({format:e},r&&n.errorMessages&&{errorMessage:{format:r}}))):ce(t,"format",e,r,n)},qt=(t,e,r,n)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push(h({pattern:t.pattern},t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}})),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push(h({pattern:e},r&&n.errorMessages&&{errorMessage:{pattern:r}}))):ce(t,"pattern",e,r,n)}});function ss(t,e){var n,i,a,s,o;if(e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,c)=>{var p;return S(h({},u),{[c]:(p=re(t.valueType._def,S(h({},e),{currentPath:[...e.currentPath,"properties",c]})))!=null?p:{}})},{}),additionalProperties:!1};let r={type:"object",additionalProperties:(i=re(t.valueType._def,S(h({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!=null?i:{}};if(e.target==="openApi3")return r;if(((a=t.keyType)==null?void 0:a._def.typeName)===F.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){let u=Object.entries(is(t.keyType._def,e)).reduce((c,[p,d])=>p==="type"?c:S(h({},c),{[p]:d}),{});return S(h({},r),{propertyNames:u})}else if(((o=t.keyType)==null?void 0:o._def.typeName)===F.ZodEnum)return S(h({},r),{propertyNames:{enum:t.keyType._def.values}});return r}var os=k(()=>{l();ns();Ie();as()});function Rf(t,e){if(e.mapStrategy==="record")return ss(t,e);let r=re(t.keyType._def,S(h({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},n=re(t.valueType._def,S(h({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}var dc=k(()=>{l();Ie();os()});function jf(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}var fc=k(()=>{l()});function Nf(){return{not:{}}}var mc=k(()=>{l()});function Lf(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var yc=k(()=>{l()});function Mf(t,e){if(e.target==="openApi3")return Df(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in _i&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let s=_i[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:r.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return Df(t,e)}var _i,Df,us=k(()=>{l();Ie();_i={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};Df=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>re(n._def,S(h({},e),{currentPath:[...e.currentPath,"anyOf",`${i}`]}))).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0}});function Uf(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:_i[t.innerType._def.typeName],nullable:!0}:{type:[_i[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=re(t.innerType._def,S(h({},e),{currentPath:[...e.currentPath]}));return n&&S(h({},n),{nullable:!0})}let r=re(t.innerType._def,S(h({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return r&&{anyOf:[r,{type:"null"}]}}var gc=k(()=>{l();Ie();us()});function Ff(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",$u(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?ce(r,"minimum",n.value,n.message,e):ce(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),ce(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ce(r,"maximum",n.value,n.message,e):ce(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),ce(r,"maximum",n.value,n.message,e));break;case"multipleOf":ce(r,"multipleOf",n.value,n.message,e);break}return r}var bc=k(()=>{l();er()});function qf(t,e){var n;let r=S(h({type:"object"},Object.entries(t.shape()).reduce((i,[a,s])=>{if(s===void 0||s._def===void 0)return i;let o=re(s._def,S(h({},e),{currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]}));return o===void 0?i:{properties:S(h({},i.properties),{[a]:o}),required:s.isOptional()?i.required:[...i.required,a]}},{properties:{},required:[]})),{additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(n=re(t.catchall._def,S(h({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!=null?n:!0});return r.required.length||delete r.required,r}var wc=k(()=>{l();Ie()});var Bf,_c=k(()=>{l();Ie();Bf=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return re(t.innerType._def,e);let r=re(t.innerType._def,S(h({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return r?{anyOf:[{not:{}},r]}:{}}});var Vf,vc=k(()=>{l();Ie();Vf=(t,e)=>{if(e.pipeStrategy==="input")return re(t.in._def,e);let r=re(t.in._def,S(h({},e),{currentPath:[...e.currentPath,"allOf","0"]})),n=re(t.out._def,S(h({},e),{currentPath:[...e.currentPath,"allOf",r?"1":"0"]}));return{allOf:[r,n].filter(i=>i!==void 0)}}});function zf(t,e){return re(t.type._def,e)}var xc=k(()=>{l();Ie()});function $f(t,e){let n={type:"array",uniqueItems:!0,items:re(t.valueType._def,S(h({},e),{currentPath:[...e.currentPath,"items"]}))};return t.minSize&&ce(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ce(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}var Ac=k(()=>{l();er();Ie()});function Kf(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>re(r._def,S(h({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:re(t.rest._def,S(h({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>re(r._def,S(h({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[])}}var Oc=k(()=>{l();Ie()});function Hf(){return{not:{}}}var Pc=k(()=>{l()});function Zf(){return{}}var Ec=k(()=>{l()});var Jf,Tc=k(()=>{l();Ie();Jf=(t,e)=>re(t.innerType._def,e)});function re(t,e,r=!1){let n=e.seen.get(t);if(n&&!r){let s=u_(n,e);if(s!==void 0)return s}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=l_(t,t.typeName,e);return a&&p_(t,e,a),i.jsonSchema=a,a}var u_,c_,l_,p_,Ie=k(()=>{l();ns();tc();rc();nc();ic();ac();sc();oc();uc();cc();lc();pc();hc();dc();fc();mc();yc();gc();bc();wc();_c();vc();xc();os();Ac();as();Oc();Pc();us();Ec();Tc();u_=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.length===0?"":t.path.length===1?`${t.path[0]}/`:t.path.join("/")};case"relative":return{$ref:c_(e.currentPath,t.path)};case"none":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:void 0;case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:t.jsonSchema}},c_=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},l_=(t,e,r)=>{switch(e){case F.ZodString:return is(t,r);case F.ZodNumber:return Ff(t,r);case F.ZodObject:return qf(t,r);case F.ZodBigInt:return xf(t,r);case F.ZodBoolean:return Af();case F.ZodDate:return Ef(t,r);case F.ZodUndefined:return Hf();case F.ZodNull:return Lf(r);case F.ZodArray:return vf(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return Mf(t,r);case F.ZodIntersection:return If(t,r);case F.ZodTuple:return Kf(t,r);case F.ZodRecord:return ss(t,r);case F.ZodLiteral:return kf(t,r);case F.ZodEnum:return Cf(t);case F.ZodNativeEnum:return jf(t);case F.ZodNullable:return Uf(t,r);case F.ZodOptional:return Bf(t,r);case F.ZodMap:return Rf(t,r);case F.ZodSet:return $f(t,r);case F.ZodLazy:return re(t.getter()._def,r);case F.ZodPromise:return zf(t,r);case F.ZodNaN:case F.ZodNever:return Nf();case F.ZodEffects:return Sf(t,r);case F.ZodAny:return _f();case F.ZodUnknown:return Zf();case F.ZodDefault:return Tf(t,r);case F.ZodBranded:return Of(t,r);case F.ZodReadonly:return Jf(t,r);case F.ZodCatch:return Pf(t,r);case F.ZodPipeline:return Vf(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(n=>{})(e)}},p_=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r)});var Yf,Sc=k(()=>{l();Ku();Yf=t=>{let e=ff(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return S(h({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})}});var wn,Cc=k(()=>{l();Ie();Sc();wn=(t,e)=>{var o;let r=Yf(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,p])=>{var d;return S(h({},u),{[c]:(d=re(p._def,S(h({},r),{currentPath:[...r.basePath,r.definitionPath,c]}),!0))!=null?d:{}})},{}):void 0,i=typeof e=="string"?e:e==null?void 0:e.name,a=(o=re(t._def,i===void 0?r:S(h({},r),{currentPath:[...r.basePath,r.definitionPath,i]}),!1))!=null?o:{},s=i===void 0?n?S(h({},a),{[r.definitionPath]:n}):a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:S(h({},n),{[i]:a})};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),s}});var vi=k(()=>{l();er();Ku();Ie();tc();rc();nc();ic();ac();sc();oc();uc();cc();lc();pc();hc();dc();fc();mc();yc();gc();bc();wc();_c();vc();xc();Tc();os();Ac();as();Oc();Pc();us();Ec();Sc();Cc();Cc()});function Wf(t){return{name:t.name,description:t.description,parameters:wn(t.schema)}}var Gf=k(()=>{l();vi()});function ir(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,basePath:a}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return a}var xi=k(()=>{l()});var Qf={};mt(Qf,{ChatOpenAI:()=>Ai,PromptLayerChatOpenAI:()=>Ic});function h_(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role,t.role}function cs(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!Zr.isInstance(t))throw new Error("Invalid generic chat message");return h_(t)}default:throw new Error(`Unknown message type: ${e}`)}}function d_(t){var e;switch(t.role){case"user":return new gt(t.content||"");case"assistant":return new Ot(t.content||"",{function_call:t.function_call});case"system":return new Hr(t.content||"");default:return new Zr(t.content||"",(e=t.role)!=null?e:"unknown")}}function f_(t,e){var a,s;let r=(a=t.role)!=null?a:e,n=(s=t.content)!=null?s:"",i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new ba({content:n}):r==="assistant"?new wa({content:n,additional_kwargs:i}):r==="system"?new _a({content:n}):r==="function"?new va({content:n,additional_kwargs:i,name:t.name}):new xa({content:n,role:r})}var ls,Ai,Ic,kc=k(()=>{l();ls=Ue(Ur(),1);jt();Kr();hf();ct();Gn();Qa();Gf();xi();ei();Ai=class extends Ga{get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,a,s,o,u,c,p,d,b,w,g,v,T;if(super(e!=null?e:{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(n=e==null?void 0:e.openAIApiKey)!=null?n:ne("OPENAI_API_KEY"),this.azureOpenAIApiKey=(i=e==null?void 0:e.azureOpenAIApiKey)!=null?i:ne("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(a=e==null?void 0:e.azureOpenAIApiInstanceName)!=null?a:ne("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(s=e==null?void 0:e.azureOpenAIApiDeploymentName)!=null?s:ne("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(o=e==null?void 0:e.azureOpenAIApiVersion)!=null?o:ne("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(u=e==null?void 0:e.azureOpenAIBasePath)!=null?u:ne("AZURE_OPENAI_BASE_PATH"),this.modelName=(c=e==null?void 0:e.modelName)!=null?c:this.modelName,this.modelKwargs=(p=e==null?void 0:e.modelKwargs)!=null?p:{},this.timeout=e==null?void 0:e.timeout,this.temperature=(d=e==null?void 0:e.temperature)!=null?d:this.temperature,this.topP=(b=e==null?void 0:e.topP)!=null?b:this.topP,this.frequencyPenalty=(w=e==null?void 0:e.frequencyPenalty)!=null?w:this.frequencyPenalty,this.presencePenalty=(g=e==null?void 0:e.presencePenalty)!=null?g:this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.n=(v=e==null?void 0:e.n)!=null?v:this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.streaming=(T=e==null?void 0:e.streaming)!=null?T:!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig=h(h({apiKey:this.openAIApiKey},r),e==null?void 0:e.configuration)}invocationParams(e){var r,n;return h({model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:(r=e==null?void 0:e.stop)!=null?r:this.stop,stream:this.streaming,functions:(n=e==null?void 0:e.functions)!=null?n:e!=null&&e.tools?e==null?void 0:e.tools.map(Wf):void 0,function_call:e==null?void 0:e.function_call},this.modelKwargs)}_identifyingParams(){return h(h({model_name:this.modelName},this.invocationParams()),this.clientConfig)}_streamResponseChunks(e,r,n){return ve(this,null,function*(){var u,c,p;let i=e.map(v=>({role:cs(v),content:v.content,name:v.name,function_call:v.additional_kwargs.function_call})),a=S(h({},this.invocationParams(r)),{messages:i,stream:!0}),s="assistant",o=this.startStream(a,r);try{for(var d=Oe(o),b,w,g;b=!(w=yield new Y(d.next())).done;b=!1){let v=w.value;let j=(u=JSON.parse(v).choices)==null?void 0:u[0];if(!j)continue;let{delta:I}=j,q=f_(I,s);s=(c=I.role)!=null?c:s;let P=new Aa({message:q,text:q.content});yield P,n==null||n.handleLLMNewToken((p=P.text)!=null?p:"")}}catch(w){g=[w]}finally{try{b&&(w=d.return)&&(yield new Y(w.call(d)))}finally{if(g)throw g[0]}}})}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=tn(i.readable),o;return this.completionWithRetry(e,S(h({},r),{adapter:Ve,responseType:"stream",onmessage:c=>{var p,d;if(!n)if(((d=(p=c.data)==null?void 0:p.trim)==null?void 0:d.call(p))==="[DONE]")n=!0,a.close();else{let b=JSON.parse(c.data);if(b.error)throw n=!0,b.error;a.write(c.data)}}})).catch(c=>{n||(o=c,n=!0,a.close())}),{next(){return f(this,null,function*(){let c=yield s.next();if(o)throw o;return c})},[Symbol.asyncIterator](){return this}}}identifyingParams(){return this._identifyingParams()}_generate(e,r,n){return f(this,null,function*(){var b,w,g,v,T,j,I;let i={},a=this.invocationParams(r),s=e.map(q=>({role:cs(q),content:q.content,name:q.name,function_call:q.additional_kwargs.function_call})),o=a.stream?yield new Promise((q,P)=>{let N,x=!1,O=!1;this.completionWithRetry(S(h({},a),{messages:s}),S(h({signal:r==null?void 0:r.signal},r==null?void 0:r.options),{adapter:Ve,responseType:"stream",onmessage:_=>{var C,L,Z,J,te,$,le,pe,me,be,ot,Sn,ur,Cn,Rr,jr,In;if(((L=(C=_.data)==null?void 0:C.trim)==null?void 0:L.call(C))==="[DONE]"){if(O||x)return;O=!0,q(N)}else{let V=JSON.parse(_.data);if(!V.id)return;if(V!=null&&V.error){if(x)return;x=!0,P(V.error);return}let y=V;N||(N={id:y.id,object:y.object,created:y.created,model:y.model,choices:[]});for(let A of(Z=y.choices)!=null?Z:[])if(A!=null){let E=N.choices.find(M=>M.index===A.index);E||(E={index:A.index,finish_reason:(J=A.finish_reason)!=null?J:void 0},N.choices[A.index]=E),E.message||(E.message={role:(te=A.delta)==null?void 0:te.role,content:""}),A.delta.function_call&&!E.message.function_call&&(E.message.function_call={name:"",arguments:""}),E.message.content+=(le=($=A.delta)==null?void 0:$.content)!=null?le:"",E.message.function_call&&(E.message.function_call.name+=(be=(me=(pe=A.delta)==null?void 0:pe.function_call)==null?void 0:me.name)!=null?be:"",E.message.function_call.arguments+=(ur=(Sn=(ot=A.delta)==null?void 0:ot.function_call)==null?void 0:Sn.arguments)!=null?ur:""),n==null||n.handleLLMNewToken((Rr=(Cn=A.delta)==null?void 0:Cn.content)!=null?Rr:"",{prompt:(jr=r.promptIndex)!=null?jr:0,completion:A.index})}!O&&!x&&((In=y.choices)!=null&&In.every(A=>A.finish_reason!=null))&&(O=!0,q(N))}}})).catch(_=>{x||(x=!0,P(_))})}):yield this.completionWithRetry(S(h({},a),{messages:s}),h({signal:r==null?void 0:r.signal},r==null?void 0:r.options)),{completion_tokens:u,prompt_tokens:c,total_tokens:p}=(b=o.usage)!=null?b:{};u&&(i.completionTokens=((w=i.completionTokens)!=null?w:0)+u),c&&(i.promptTokens=((g=i.promptTokens)!=null?g:0)+c),p&&(i.totalTokens=((v=i.totalTokens)!=null?v:0)+p);let d=[];for(let q of o.choices){let P=(j=(T=q.message)==null?void 0:T.content)!=null?j:"";d.push({text:P,message:d_((I=q.message)!=null?I:{role:"assistant"})})}return{generations:d,llmOutput:{tokenUsage:i}}})}getNumTokensFromMessages(e){return f(this,null,function*(){let r=0,n=0,i=0;Wr(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):Wr(this.modelName).startsWith("gpt-4")&&(n=3,i=1);let a=yield Promise.all(e.map(s=>f(this,null,function*(){let o=yield this.getNumTokens(s.content),u=yield this.getNumTokens(cs(s)),c=s.name!==void 0?i+(yield this.getNumTokens(s.name)):0,p=o+n+u+c;return r+=p,p})));return r+=3,{totalCount:r,countPerMessage:a}})}completionWithRetry(e,r){return f(this,null,function*(){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=ir(i),s=new ls.Configuration(S(h({},this.clientConfig),{basePath:a,baseOptions:h({timeout:this.timeout},this.clientConfig.baseOptions)}));this.client=new ls.OpenAIApi(s)}let n=h(h({adapter:Rt()?void 0:Ve},this.clientConfig.baseOptions),r);return this.azureOpenAIApiKey&&(n.headers=h({"api-key":this.azureOpenAIApiKey},n.headers),n.params=h({"api-version":this.azureOpenAIApiVersion},n.params)),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)})}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>{var i,a,s;return n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=(i=n.tokenUsage.completionTokens)!=null?i:0,r.tokenUsage.promptTokens+=(a=n.tokenUsage.promptTokens)!=null?a:0,r.tokenUsage.totalTokens+=(s=n.tokenUsage.totalTokens)!=null?s:0),r},{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}},Ic=class t extends Ai{constructor(e){var r,n,i;super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=(r=e==null?void 0:e.promptLayerApiKey)!=null?r:typeof process!="undefined"?m==null?void 0:m.PROMPTLAYER_API_KEY:void 0,this.plTags=(n=e==null?void 0:e.plTags)!=null?n:[],this.returnPromptLayerId=(i=e==null?void 0:e.returnPromptLayerId)!=null?i:!1}_generate(e,r,n){return f(this,null,function*(){let i=Date.now(),a;Array.isArray(r)?a={stop:r}:r!=null&&r.timeout&&!r.signal?a=S(h({},r),{signal:AbortSignal.timeout(r.timeout)}):a=r!=null?r:{};let s=yield vt(t.prototype,this,"_generate").call(this,e,a,n),o=Date.now(),u=p=>{let d;if(p._getType()==="human")d={role:"user",content:p.content};else if(p._getType()==="ai")d={role:"assistant",content:p.content};else if(p._getType()==="function")d={role:"assistant",content:p.content};else if(p._getType()==="system")d={role:"system",content:p.content};else if(p._getType()==="generic")d={role:p.role,content:p.content};else throw new Error(`Got unknown type ${p}`);return d},c=(p,d)=>{let b=S(h({},this.invocationParams()),{model:this.modelName});if(d!=null&&d.stop&&Object.keys(b).includes("stop"))throw new Error("`stop` found in both the input and default params.");return p.map(g=>u(g))};for(let p=0;p<s.generations.length;p+=1){let d=s.generations[p],b=c(e,a),w,g=[{content:d.text,role:cs(d.message)}],v=yield on(this.caller,"langchain.PromptLayerChatOpenAI",b,this._identifyingParams(),this.plTags,g,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(v.success===!0&&(w=v.request_id),(!d.generationInfo||typeof d.generationInfo!="object")&&(d.generationInfo={}),d.generationInfo.promptLayerRequestId=w)}return s})}}});var m_,Oi,Xt,si=k(()=>{l();Wn();Gn();Ua();rn();Tt();xr();Gn();m_=()=>!1,Oi=class extends Me{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){var r,n,i;super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=(r=e.verbose)!=null?r:m_(),this.callbacks=e.callbacks,this.tags=(n=e.tags)!=null?n:[],this.metadata=(i=e.metadata)!=null?i:{}}},Xt=class extends Oi{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(i){var a=i,{callbacks:e,callbackManager:r}=a,n=_e(a,["callbacks","callbackManager"]);super(h({callbacks:e!=null?e:r},n)),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Mt(n!=null?n:{})}getNumTokens(e){return f(this,null,function*(){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=yield Ma("modelName"in this?Wr(this.modelName):"gpt2")}catch(n){}return this._encoding&&(r=this._encoding.encode(e).length),r})}static _convertInputToPromptValue(e){return typeof e=="string"?new sn(e):Array.isArray(e)?new ni(e):e}_identifyingParams(){return{}}serialize(){return S(h({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}static deserialize(e){return f(this,null,function*(){let s=e,{_type:r,_model:n}=s,i=_e(s,["_type","_model"]);if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(yield Promise.resolve().then(()=>(kc(),Qf))).ChatOpenAI}[r];if(a===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new a(i)})}}});var Pi,ps,Rc=k(()=>{l();ud();ct();si();en();Qr();Pi=class t extends Xt{constructor(i){var a=i,{cache:e,concurrency:r}=a,n=_e(a,["cache","concurrency"]);super(r?h({maxConcurrency:r},n):n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=Pa.global():this.cache=void 0}invoke(e,r){return f(this,null,function*(){let n=t._convertInputToPromptValue(e);return(yield this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].text})}_streamResponseChunks(e,r,n){return ve(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n!=null&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}_streamIterator(e,r){return ve(this,null,function*(){if(this._streamResponseChunks===t.prototype._streamResponseChunks)yield this.invoke(e,r);else{let o=t._convertInputToPromptValue(e),[u,c]=this._separateRunnableConfigFromCallOptions(r),p=yield new Y(Pe.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose})),d={options:c,invocation_params:this==null?void 0:this.invocationParams(c)},b=yield new Y(p==null?void 0:p.handleLLMStart(this.toJSON(),[o.toString()],void 0,void 0,d)),w=new Dt({text:""});try{try{for(var n=Oe(this._streamResponseChunks(e.toString(),c,b==null?void 0:b[0])),i,a,s;i=!(a=yield new Y(n.next())).done;i=!1){let g=a.value;w?w=w.concat(g):w=g,yield g.text}}catch(a){s=[a]}finally{try{i&&(a=n.return)&&(yield new Y(a.call(n)))}finally{if(s)throw s[0]}}}catch(g){throw yield new Y(Promise.all((b!=null?b:[]).map(v=>v==null?void 0:v.handleLLMError(g)))),g}yield new Y(Promise.all((b!=null?b:[]).map(g=>g==null?void 0:g.handleLLMEnd({generations:[[w]]}))))}})}generatePrompt(e,r,n){return f(this,null,function*(){let i=e.map(a=>a.toString());return this.generate(i,r,n)})}invocationParams(e){return{}}_flattenLLMResult(e){let r=[];for(let n=0;n<e.generations.length;n+=1){let i=e.generations[n];if(n===0)r.push({generations:[i],llmOutput:e.llmOutput});else{let a=e.llmOutput?S(h({},e.llmOutput),{tokenUsage:{}}):void 0;r.push({generations:[i],llmOutput:a})}}return r}_generateUncached(e,r,n){return f(this,null,function*(){let i=yield Pe.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this==null?void 0:this.invocationParams(r)},s=yield i==null?void 0:i.handleLLMStart(this.toJSON(),e,void 0,void 0,a),o;try{o=yield this._generate(e,r,s==null?void 0:s[0])}catch(p){throw yield Promise.all((s!=null?s:[]).map(d=>d==null?void 0:d.handleLLMError(p))),p}let u=this._flattenLLMResult(o);yield Promise.all((s!=null?s:[]).map((p,d)=>p==null?void 0:p.handleLLMEnd(u[d])));let c=(s==null?void 0:s.map(p=>p.runId))||void 0;return Object.defineProperty(o,Yr,{value:c?{runIds:c}:void 0,configurable:!0}),o})}generate(e,r,n){return f(this,null,function*(){var w,g,v;if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=(w=a.callbacks)!=null?w:n,!this.cache)return this._generateUncached(e,s,a);let{cache:o}=this,u=this.serialize();u.stop=(g=s.stop)!=null?g:u.stop;let c=`${Object.entries(u).sort()}`,p=[],d=yield Promise.all(e.map((T,j)=>f(this,null,function*(){let I=yield o.lookup(T,c);return I||p.push(j),I}))),b={};if(p.length>0){let T=yield this._generateUncached(p.map(j=>e[j]),s,a);yield Promise.all(T.generations.map((j,I)=>f(this,null,function*(){let q=p[I];return d[q]=j,o.update(e[q],c,j)}))),b=(v=T.llmOutput)!=null?v:{}}return{generations:d,llmOutput:b}})}call(e,r,n){return f(this,null,function*(){let{generations:i}=yield this.generate([e],r,n);return i[0][0].text})}predict(e,r,n){return f(this,null,function*(){return this.call(e,r,n)})}predictMessages(e,r,n){return f(this,null,function*(){let i=wr(e),a=yield this.call(i,r,n);return new Ot(a)})}_identifyingParams(){return{}}serialize(){return S(h({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}_modelType(){return"base_llm"}static deserialize(e){return f(this,null,function*(){let s=e,{_type:r,_model:n}=s,i=_e(s,["_type","_model"]);if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(yield Promise.resolve().then(()=>(jc(),Xf))).OpenAI}[r];if(a===void 0)throw new Error(`Cannot load  LLM with type ${r}`);return new a(i)})}},ps=class extends Pi{_generate(e,r,n){return f(this,null,function*(){return{generations:yield Promise.all(e.map((a,s)=>this._call(a,S(h({},r),{promptIndex:s}),n).then(o=>[{text:o}])))}})}}});var ds,Er,hs,Nc=k(()=>{l();ds=Ue(Ur(),1);jt();Kr();Rc();ct();Qa();xi();ei();Er=class extends ps{get callKeys(){return[...super.callKeys,"options","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,a,s,o,u,c,p,d,b,w,g,v,T,j;if(super(e!=null?e:{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(n=e==null?void 0:e.openAIApiKey)!=null?n:ne("OPENAI_API_KEY"),this.azureOpenAIApiKey=(i=e==null?void 0:e.azureOpenAIApiKey)!=null?i:ne("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(a=e==null?void 0:e.azureOpenAIApiInstanceName)!=null?a:ne("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(s=(e==null?void 0:e.azureOpenAIApiCompletionsDeploymentName)||(e==null?void 0:e.azureOpenAIApiDeploymentName))!=null?s:ne("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||ne("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(o=e==null?void 0:e.azureOpenAIApiVersion)!=null?o:ne("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(u=e==null?void 0:e.azureOpenAIBasePath)!=null?u:ne("AZURE_OPENAI_BASE_PATH"),this.modelName=(c=e==null?void 0:e.modelName)!=null?c:this.modelName,this.prefixMessages=(p=e==null?void 0:e.prefixMessages)!=null?p:this.prefixMessages,this.modelKwargs=(d=e==null?void 0:e.modelKwargs)!=null?d:{},this.timeout=e==null?void 0:e.timeout,this.temperature=(b=e==null?void 0:e.temperature)!=null?b:this.temperature,this.topP=(w=e==null?void 0:e.topP)!=null?w:this.topP,this.frequencyPenalty=(g=e==null?void 0:e.frequencyPenalty)!=null?g:this.frequencyPenalty,this.presencePenalty=(v=e==null?void 0:e.presencePenalty)!=null?v:this.presencePenalty,this.n=(T=e==null?void 0:e.n)!=null?T:this.n,this.logitBias=e==null?void 0:e.logitBias,this.maxTokens=e==null?void 0:e.maxTokens,this.stop=e==null?void 0:e.stop,this.streaming=(j=e==null?void 0:e.streaming)!=null?j:!1,this.n>1)throw new Error("Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig=h(h({apiKey:this.openAIApiKey},r),e==null?void 0:e.configuration)}invocationParams(e){var r;return h({model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,stop:(r=e==null?void 0:e.stop)!=null?r:this.stop,stream:this.streaming},this.modelKwargs)}_identifyingParams(){return h(h({model_name:this.modelName},this.invocationParams()),this.clientConfig)}identifyingParams(){return h(h({model_name:this.modelName},this.invocationParams()),this.clientConfig)}formatMessages(e){let r={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,r]:[r]}_streamResponseChunks(e,r,n){return ve(this,null,function*(){var s,o,u;let i=S(h({},this.invocationParams(r)),{messages:this.formatMessages(e),stream:!0}),a=this.startStream(i,r);try{for(var c=Oe(a),p,d,b;p=!(d=yield new Y(c.next())).done;p=!1){let w=d.value;let v=(s=JSON.parse(w).choices)==null?void 0:s[0];if(!v)continue;let{delta:T}=v,j=new Dt({text:(o=T.content)!=null?o:""});yield j,n==null||n.handleLLMNewToken((u=j.text)!=null?u:"")}}catch(d){b=[d]}finally{try{p&&(d=c.return)&&(yield new Y(d.call(c)))}finally{if(b)throw b[0]}}})}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=tn(i.readable),o;return this.completionWithRetry(e,S(h({},r),{adapter:Ve,responseType:"stream",onmessage:c=>{var p,d;if(!n)if(((d=(p=c.data)==null?void 0:p.trim)==null?void 0:d.call(p))==="[DONE]")n=!0,a.close();else{let b=JSON.parse(c.data);if(b.error)throw n=!0,b.error;a.write(c.data)}}})).catch(c=>{n||(o=c,n=!0,a.close())}),{next(){return f(this,null,function*(){let c=yield s.next();if(o)throw o;return c})},[Symbol.asyncIterator](){return this}}}_call(e,r,n){return f(this,null,function*(){var s,o;let i=this.invocationParams(r);return(o=(s=(i.stream?yield new Promise((u,c)=>{let p,d=!1,b=!1;this.completionWithRetry(S(h({},i),{messages:this.formatMessages(e)}),S(h({signal:r.signal},r.options),{adapter:Ve,responseType:"stream",onmessage:w=>{var g,v,T,j,I,q,P,N,x,O,_;if(((v=(g=w.data)==null?void 0:g.trim)==null?void 0:v.call(g))==="[DONE]"){if(b||d)return;b=!0,u(p)}else{let C=JSON.parse(w.data);if(C!=null&&C.error){if(d)return;d=!0,c(C.error);return}let L=C;p||(p={id:L.id,object:L.object,created:L.created,model:L.model,choices:[]});for(let Z of L.choices)if(Z!=null){let J=p.choices.find(te=>te.index===Z.index);J||(J={index:Z.index,finish_reason:(T=Z.finish_reason)!=null?T:void 0},p.choices.push(J)),J.message||(J.message={role:(j=Z.delta)==null?void 0:j.role,content:(q=(I=Z.delta)==null?void 0:I.content)!=null?q:""}),J.message.content+=(N=(P=Z.delta)==null?void 0:P.content)!=null?N:"",n==null||n.handleLLMNewToken((O=(x=Z.delta)==null?void 0:x.content)!=null?O:"",{prompt:(_=r.promptIndex)!=null?_:0,completion:Z.index})}!b&&!d&&L.choices.every(Z=>Z.finish_reason!=null)&&(b=!0,u(p))}}})).catch(w=>{d||(d=!0,c(w))})}):yield this.completionWithRetry(S(h({},i),{messages:this.formatMessages(e)}),h({signal:r.signal},r.options))).choices[0].message)==null?void 0:s.content)!=null?o:""})}completionWithRetry(e,r){return f(this,null,function*(){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=ir(i),s=new ds.Configuration(S(h({},this.clientConfig),{basePath:a,baseOptions:h({timeout:this.timeout},this.clientConfig.baseOptions)}));this.client=new ds.OpenAIApi(s)}let n=h(h({adapter:Rt()?void 0:Ve},this.clientConfig.baseOptions),r);return this.azureOpenAIApiKey&&(n.headers=h({"api-key":this.azureOpenAIApiKey},n.headers),n.params=h({"api-version":this.azureOpenAIApiVersion},n.params)),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)})}_llmType(){return"openai"}},hs=class t extends Er{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){var r,n,i;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=(r=e==null?void 0:e.plTags)!=null?r:[],this.returnPromptLayerId=(n=e==null?void 0:e.returnPromptLayerId)!=null?n:!1,this.promptLayerApiKey=(i=e==null?void 0:e.promptLayerApiKey)!=null?i:ne("PROMPTLAYER_API_KEY"),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}completionWithRetry(e,r){return f(this,null,function*(){return e.stream?vt(t.prototype,this,"completionWithRetry").call(this,e,r):yield vt(t.prototype,this,"completionWithRetry").call(this,e)})}_generate(e,r,n){return f(this,null,function*(){let i;return{generations:yield Promise.all(e.map(s=>f(this,null,function*(){let o=Date.now(),u=yield this._call(s,r,n),c=Date.now();i=[{text:u}];let p={text:u},d=yield on(this.caller,"langchain.PromptLayerOpenAIChat",[s],this._identifyingParams(),this.plTags,p,o,c,this.promptLayerApiKey);return this.returnPromptLayerId===!0&&d.success===!0&&(i[0].generationInfo={promptLayerRequestId:d.request_id}),i})))}})}}});var Xf={};mt(Xf,{OpenAI:()=>_n,OpenAIChat:()=>Er,PromptLayerOpenAI:()=>Lc,PromptLayerOpenAIChat:()=>hs});var fs,_n,Lc,jc=k(()=>{l();fs=Ue(Ur(),1);jt();Kr();eu();Rc();Gn();Nc();ct();Qa();xi();ei();Nc();_n=class extends Pi{get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){var n,i,a,s,o,u,c,p,d,b,w,g,v,T,j,I,q,P,N,x;if((n=e==null?void 0:e.modelName)!=null&&n.startsWith("gpt-3.5-turbo")||(i=e==null?void 0:e.modelName)!=null&&i.startsWith("gpt-4")||(a=e==null?void 0:e.modelName)!=null&&a.startsWith("gpt-4-32k"))return new Er(e,r);if(super(e!=null?e:{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(s=e==null?void 0:e.openAIApiKey)!=null?s:ne("OPENAI_API_KEY"),this.azureOpenAIApiKey=(o=e==null?void 0:e.azureOpenAIApiKey)!=null?o:ne("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=(u=e==null?void 0:e.azureOpenAIApiInstanceName)!=null?u:ne("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(c=(e==null?void 0:e.azureOpenAIApiCompletionsDeploymentName)||(e==null?void 0:e.azureOpenAIApiDeploymentName))!=null?c:ne("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||ne("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(p=e==null?void 0:e.azureOpenAIApiVersion)!=null?p:ne("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(d=e==null?void 0:e.azureOpenAIBasePath)!=null?d:ne("AZURE_OPENAI_BASE_PATH"),this.modelName=(b=e==null?void 0:e.modelName)!=null?b:this.modelName,this.modelKwargs=(w=e==null?void 0:e.modelKwargs)!=null?w:{},this.batchSize=(g=e==null?void 0:e.batchSize)!=null?g:this.batchSize,this.timeout=e==null?void 0:e.timeout,this.temperature=(v=e==null?void 0:e.temperature)!=null?v:this.temperature,this.maxTokens=(T=e==null?void 0:e.maxTokens)!=null?T:this.maxTokens,this.topP=(j=e==null?void 0:e.topP)!=null?j:this.topP,this.frequencyPenalty=(I=e==null?void 0:e.frequencyPenalty)!=null?I:this.frequencyPenalty,this.presencePenalty=(q=e==null?void 0:e.presencePenalty)!=null?q:this.presencePenalty,this.n=(P=e==null?void 0:e.n)!=null?P:this.n,this.bestOf=(N=e==null?void 0:e.bestOf)!=null?N:this.bestOf,this.logitBias=e==null?void 0:e.logitBias,this.stop=e==null?void 0:e.stop,this.streaming=(x=e==null?void 0:e.streaming)!=null?x:!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig=h(h({apiKey:this.openAIApiKey},r),e==null?void 0:e.configuration)}invocationParams(e){var r;return h({model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:(r=e==null?void 0:e.stop)!=null?r:this.stop,stream:this.streaming},this.modelKwargs)}_identifyingParams(){return h(h({model_name:this.modelName},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}_generate(e,r,n){return f(this,null,function*(){var c,p,d,b;let i=Jn(e,this.batchSize),a=[],s={},o=this.invocationParams(r);if(o.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=yield fu({prompt:e[0],modelName:this.modelName})}for(let w=0;w<i.length;w+=1){let g=o.stream?yield new Promise((I,q)=>{let P=[],N,x=!1,O=!1;this.completionWithRetry(S(h({},o),{prompt:i[w]}),S(h({signal:r.signal},r.options),{adapter:Ve,responseType:"stream",onmessage:_=>{var C,L,Z,J,te;if(((L=(C=_.data)==null?void 0:C.trim)==null?void 0:L.call(C))==="[DONE]"){if(O||x)return;O=!0,I(S(h({},N),{choices:P}))}else{let $=JSON.parse(_.data);if($!=null&&$.error){if(x)return;x=!0,q($.error);return}let le=$;N||(N={id:le.id,object:le.object,created:le.created,model:le.model});for(let pe of le.choices)if(pe!=null&&pe.index!=null){P[pe.index]||(P[pe.index]={});let me=P[pe.index];me.text=((Z=me.text)!=null?Z:"")+((J=pe.text)!=null?J:""),me.finish_reason=pe.finish_reason,me.logprobs=pe.logprobs,n==null||n.handleLLMNewToken((te=pe.text)!=null?te:"",{prompt:Math.floor(pe.index/this.n),completion:pe.index%this.n})}!O&&!x&&P.every(pe=>pe.finish_reason!=null)&&(O=!0,I(S(h({},N),{choices:P})))}}})).catch(_=>{x||(x=!0,q(_))})}):yield this.completionWithRetry(S(h({},o),{prompt:i[w]}),h({signal:r.signal},r.options));a.push(...g.choices);let{completion_tokens:v,prompt_tokens:T,total_tokens:j}=(c=g.usage)!=null?c:{};v&&(s.completionTokens=((p=s.completionTokens)!=null?p:0)+v),T&&(s.promptTokens=((d=s.promptTokens)!=null?d:0)+T),j&&(s.totalTokens=((b=s.totalTokens)!=null?b:0)+j)}return{generations:Jn(a,this.n).map(w=>w.map(g=>{var v;return{text:(v=g.text)!=null?v:"",generationInfo:{finishReason:g.finish_reason,logprobs:g.logprobs}}})),llmOutput:{tokenUsage:s}}})}_streamResponseChunks(e,r,n){return ve(this,null,function*(){var s,o;let i=S(h({},this.invocationParams(r)),{prompt:e,stream:!0}),a=this.startStream(i,r);try{for(var u=Oe(a),c,p,d;c=!(p=yield new Y(u.next())).done;c=!1){let b=p.value;let g=(s=JSON.parse(b).choices)==null?void 0:s[0];if(!g)continue;let v=new Dt({text:g.text,generationInfo:{finishReason:g.finish_reason,logprobs:g.logprobs}});yield v,n==null||n.handleLLMNewToken((o=v.text)!=null?o:"")}}catch(p){d=[p]}finally{try{c&&(p=u.return)&&(yield new Y(p.call(u)))}finally{if(d)throw d[0]}}})}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=tn(i.readable),o;return this.completionWithRetry(e,S(h({},r),{adapter:Ve,responseType:"stream",onmessage:c=>{var p,d;if(!n)if(((d=(p=c.data)==null?void 0:p.trim)==null?void 0:d.call(p))==="[DONE]")n=!0,a.close();else{let b=JSON.parse(c.data);if(b.error)throw n=!0,b.error;a.write(c.data)}}})).catch(c=>{n||(o=c,n=!0,a.close())}),{next(){return f(this,null,function*(){let c=yield s.next();if(o)throw o;return c})},[Symbol.asyncIterator](){return this}}}completionWithRetry(e,r){return f(this,null,function*(){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=ir(i),s=new fs.Configuration(S(h({},this.clientConfig),{basePath:a,baseOptions:h({timeout:this.timeout},this.clientConfig.baseOptions)}));this.client=new fs.OpenAIApi(s)}let n=h(h({adapter:Rt()?void 0:Ve},this.clientConfig.baseOptions),r);return this.azureOpenAIApiKey&&(n.headers=h({"api-key":this.azureOpenAIApiKey},n.headers),n.params=h({"api-version":this.azureOpenAIApiVersion},n.params)),this.caller.call(this.client.createCompletion.bind(this.client),e,n).then(i=>i.data)})}_llmType(){return"openai"}},Lc=class t extends _n{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){var r,n;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=(r=e==null?void 0:e.plTags)!=null?r:[],this.promptLayerApiKey=(n=e==null?void 0:e.promptLayerApiKey)!=null?n:ne("PROMPTLAYER_API_KEY"),this.returnPromptLayerId=e==null?void 0:e.returnPromptLayerId,!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}completionWithRetry(e,r){return f(this,null,function*(){return e.stream?vt(t.prototype,this,"completionWithRetry").call(this,e,r):yield vt(t.prototype,this,"completionWithRetry").call(this,e)})}_generate(e,r,n){return f(this,null,function*(){let i=Date.now(),a=yield vt(t.prototype,this,"_generate").call(this,e,r,n);for(let s=0;s<a.generations.length;s+=1){let o=Date.now(),u={text:a.generations[s][0].text,llm_output:a.llmOutput},c=yield on(this.caller,"langchain.PromptLayerOpenAI",[e[s]],this._identifyingParams(),this.plTags,u,i,o,this.promptLayerApiKey),p;this.returnPromptLayerId===!0&&(c&&c.success===!0&&(p=c.request_id),a.generations[s][0].generationInfo=S(h({},a.generations[s][0].generationInfo),{promptLayerRequestId:p}))}return a})}}});var tm=Q((MM,em)=>{l();em.exports=function(t,e,r,n,i){var a,s;if(n===void 0)n=0;else if(n=n|0,n<0||n>=t.length)throw new RangeError("invalid lower bound");if(i===void 0)i=t.length-1;else if(i=i|0,i<n||i>=t.length)throw new RangeError("invalid upper bound");for(;n<=i;)if(a=n+(i-n>>>1),s=+r(t[a],e,a,t),s<0)n=a+1;else if(s>0)i=a-1;else return a;return~n}});var rm=Q(Dc=>{"use strict";l();function As(t){if(typeof t!="number")throw new TypeError("Expected a number")}Dc.ascending=(t,e)=>(As(t),As(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e);Dc.descending=(t,e)=>(As(t),As(e),Number.isNaN(t)?1:Number.isNaN(e)?-1:e-t)});var Bt,Ts=k(()=>{l();Bt=class{constructor(e){var r;Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=(r=e.metadata)!=null?r:{}}}});var Ns,ki,Ri=k(()=>{l();rn();Ns=class extends Me{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}invoke(e,r){return f(this,null,function*(){return typeof e=="string"?this._callWithConfig(n=>f(this,null,function*(){return this.parseResult([{text:n}])}),e,S(h({},r),{runType:"parser"})):this._callWithConfig(n=>f(this,null,function*(){return this.parseResult([{message:n,text:n.content}])}),e,S(h({},r),{runType:"parser"}))})}},ki=class extends Ns{parseResult(e,r){return this.parse(e[0].text,r)}parseWithPrompt(e,r,n){return f(this,null,function*(){return this.parse(e,n)})}_type(){throw new Error("_type not implemented")}}});var Ls,om=k(()=>{l();Ri();Ls=class extends ki{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}});var um={};mt(um,{LLMChain:()=>de});var de,$e=k(()=>{l();Ke();Tt();si();om();de=class t extends ge{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){var r,n;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=(r=e.outputKey)!=null?r:this.outputKey,this.outputParser=(n=e.outputParser)!=null?n:new Ls,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){let r=super._selectMemoryInputs(e);for(let n of this.llm.callKeys)n in e&&delete r[n];return r}_getFinalOutput(e,r,n){return f(this,null,function*(){let i;return this.outputParser?i=yield this.outputParser.parseResultWithPrompt(e,r,n==null?void 0:n.getChild()):i=e[0].text,i})}call(e,r){return super.call(e,r)}_call(e,r){return f(this,null,function*(){let n=h({},e),i=h({},this.llmKwargs);for(let o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);let a=yield this.prompt.formatPromptValue(n),{generations:s}=yield this.llm.generatePrompt([a],i,r==null?void 0:r.getChild());return{[this.outputKey]:yield this._getFinalOutput(s[0],a,r)}})}predict(e,r){return f(this,null,function*(){return(yield this.call(e,r))[this.outputKey]})}_chainType(){return"llm"}static deserialize(e){return f(this,null,function*(){let{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new t({llm:yield Xt.deserialize(r),prompt:yield Ut.deserialize(n)})})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}});function Zc(t,e){let r=new Set;for(let n of e)t.has(n)&&r.add(n);return r}function cm(t,e){let r=new Set(t);for(let n of e)r.add(n);return r}function ji(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var lm=k(()=>{l()});var Jc={};mt(Jc,{SequentialChain:()=>Li,SimpleSequentialChain:()=>Ds});function Ni(t){return Array.from(t).map(e=>`"${e}"`).join(", ")}var Li,Ds,Di=k(()=>{l();Ke();lm();Li=class t extends ge{get inputKeys(){return this.inputVariables}get outputKeys(){return this.outputVariables}constructor(e){var r,n;if(super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.inputVariables=e.inputVariables,this.outputVariables=(r=e.outputVariables)!=null?r:[],this.outputVariables.length>0&&e.returnAll)throw new Error("Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.");this.returnAll=(n=e.returnAll)!=null?n:!1,this._validateChains()}_validateChains(){var s,o;if(this.chains.length===0)throw new Error("Sequential chain must have at least one chain.");let e=(o=(s=this.memory)==null?void 0:s.memoryKeys)!=null?o:[],r=new Set(this.inputKeys),n=new Set(e),i=Zc(r,n);if(i.size>0)throw new Error(`The following keys: ${Ni(i)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);let a=cm(r,n);for(let u of this.chains){let c=ji(new Set(u.inputKeys),a);if(u.memory&&(c=ji(c,new Set(u.memory.memoryKeys))),c.size>0)throw new Error(`Missing variables for chain "${u._chainType()}": ${Ni(c)}. Only got the following variables: ${Ni(a)}.`);let p=new Set(u.outputKeys),d=Zc(a,p);if(d.size>0)throw new Error(`The following output variables for chain "${u._chainType()}" are overlapping: ${Ni(d)}. This can lead to unexpected behaviour.`);for(let b of p)a.add(b)}if(this.outputVariables.length===0)if(this.returnAll){let u=ji(a,r);this.outputVariables=Array.from(u)}else this.outputVariables=this.chains[this.chains.length-1].outputKeys;else{let u=ji(new Set(this.outputVariables),new Set(a));if(u.size>0)throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${Ni(u)}.`)}}_call(e,r){return f(this,null,function*(){let n={},i=e,a=0;for(let o of this.chains){a+=1,n=yield o.call(i,r==null?void 0:r.getChild(`step_${a}`));for(let u of Object.keys(n))i[u]=n[u]}let s={};for(let o of this.outputVariables)s[o]=i[o];return s})}_chainType(){return"sequential_chain"}static deserialize(e){return f(this,null,function*(){let r=[],n=e.input_variables,i=e.output_variables,a=e.chains;for(let s of a){let o=yield ge.deserialize(s);r.push(o)}return new t({chains:r,inputVariables:n,outputVariables:i})})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),input_variables:this.inputVariables,output_variables:this.outputVariables,chains:e}}},Ds=class t extends ge{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){var r;super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),Object.defineProperty(this,"trimOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.trimOutputs=(r=e.trimOutputs)!=null?r:!1,this._validateChains()}_validateChains(){for(let e of this.chains){if(e.inputKeys.filter(r=>{var n;return!((n=e.memory)!=null&&n.memoryKeys.includes(r))}).length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${e.inputKeys.length} for ${e._chainType()}.`);if(e.outputKeys.length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${e.outputKeys.length} for ${e._chainType()}.`)}}_call(e,r){return f(this,null,function*(){let n=e[this.inputKey],i=0;for(let a of this.chains)i+=1,n=(yield a.call({[a.inputKeys[0]]:n,signal:e.signal},r==null?void 0:r.getChild(`step_${i}`)))[a.outputKeys[0]],this.trimOutputs&&(n=n.trim()),yield r==null?void 0:r.handleText(n);return{[this.outputKey]:n}})}_chainType(){return"simple_sequential_chain"}static deserialize(e){return f(this,null,function*(){let r=[],n=e.chains;for(let i of n){let a=yield ge.deserialize(i);r.push(a)}return new t({chains:r})})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),chains:e}}}});var Ms={};mt(Ms,{MapReduceDocumentsChain:()=>Tr,RefineDocumentsChain:()=>ar,StuffDocumentsChain:()=>It});var It,Tr,ar,Sr=k(()=>{l();Ke();$e();Ce();It=class t extends ge{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){var r,n;super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=(r=e.documentVariableName)!=null?r:this.documentVariableName,this.inputKey=(n=e.inputKey)!=null?n:this.inputKey}_prepInputs(e){var s;if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let o=e,{[s=this.inputKey]:r}=o,n=_e(o,[Nn(s)]),a=r.map(({pageContent:u})=>u).join(`

`);return S(h({},n),{[this.documentVariableName]:a})}_call(e,r){return f(this,null,function*(){return yield this.llmChain.call(this._prepInputs(e),r==null?void 0:r.getChild("combine_documents"))})}_chainType(){return"stuff_documents_chain"}static deserialize(e){return f(this,null,function*(){if(!e.llm_chain)throw new Error("Missing llm_chain");return new t({llmChain:yield de.deserialize(e.llm_chain)})})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}},Tr=class t extends ge{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){var r,n,i,a,s,o;super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=(r=e.documentVariableName)!=null?r:this.documentVariableName,this.ensureMapStep=(n=e.ensureMapStep)!=null?n:this.ensureMapStep,this.inputKey=(i=e.inputKey)!=null?i:this.inputKey,this.maxTokens=(a=e.maxTokens)!=null?a:this.maxTokens,this.maxIterations=(s=e.maxIterations)!=null?s:this.maxIterations,this.returnIntermediateSteps=(o=e.returnIntermediateSteps)!=null?o:!1}_call(e,r){return f(this,null,function*(){var c;if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let p=e,{[c=this.inputKey]:n}=p,i=_e(p,[Nn(c)]),a=n,s=[];for(let d=0;d<this.maxIterations;d+=1){let b=a.map(T=>h({[this.documentVariableName]:T.pageContent},i));if(d!==0||!this.ensureMapStep){let T=yield this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs(h({[this.combineDocumentChain.inputKey]:a},i)));if((yield this.combineDocumentChain.llmChain.llm.getNumTokens(T))<this.maxTokens)break}let g=yield this.llmChain.apply(b,r?Array.from({length:b.length},(T,j)=>r.getChild(`map_${j+1}`)):void 0),{outputKey:v}=this.llmChain;this.returnIntermediateSteps&&(s=s.concat(g.map(T=>T[v]))),a=g.map(T=>({pageContent:T[v],metadata:{}}))}let o=h({[this.combineDocumentChain.inputKey]:a},i),u=yield this.combineDocumentChain.call(o,r==null?void 0:r.getChild("combine_documents"));return this.returnIntermediateSteps?S(h({},u),{intermediateSteps:s}):u})}_chainType(){return"map_reduce_documents_chain"}static deserialize(e){return f(this,null,function*(){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new t({llmChain:yield de.deserialize(e.llm_chain),combineDocumentChain:yield It.deserialize(e.combine_document_chain)})})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}},ar=class t extends ge{get defaultDocumentPrompt(){return new he({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){var r,n,i,a,s;super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=(r=e.documentVariableName)!=null?r:this.documentVariableName,this.inputKey=(n=e.inputKey)!=null?n:this.inputKey,this.outputKey=(i=e.outputKey)!=null?i:this.outputKey,this.documentPrompt=(a=e.documentPrompt)!=null?a:this.documentPrompt,this.initialResponseName=(s=e.initialResponseName)!=null?s:this.initialResponseName}_constructInitialInputs(e,r){return f(this,null,function*(){let n=h({page_content:e.pageContent},e.metadata),i={};this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]});let a={[this.documentVariableName]:yield this.documentPrompt.format(h({},i))};return h(h({},a),r)})}_constructRefineInputs(e,r){return f(this,null,function*(){let n=h({page_content:e.pageContent},e.metadata),i={};this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]});let a={[this.documentVariableName]:yield this.documentPrompt.format(h({},i))};return h({[this.initialResponseName]:r},a)})}_call(e,r){return f(this,null,function*(){var c;if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let p=e,{[c=this.inputKey]:n}=p,i=_e(p,[Nn(c)]),a=n,s=yield this._constructInitialInputs(a[0],i),o=yield this.llmChain.predict(h({},s),r==null?void 0:r.getChild("answer")),u=[o];for(let d=1;d<a.length;d+=1){let b=yield this._constructRefineInputs(a[d],o),w=h(h({},b),i);o=yield this.refineLLMChain.predict(h({},w),r==null?void 0:r.getChild("refine")),u.push(o)}return{[this.outputKey]:o}})}_chainType(){return"refine_documents_chain"}static deserialize(e){return f(this,null,function*(){let r=e.llm_chain;if(!r)throw new Error("Missing llm_chain");let n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new t({llmChain:yield de.deserialize(r),refineLLMChain:yield de.deserialize(n)})})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}});function Cr(t){return t._modelType()==="base_chat_model"}var Us,Vt,Mi=k(()=>{l();Us=class{getPromptAsync(e,r){return f(this,null,function*(){var i;return this.getPrompt(e).partial((i=r==null?void 0:r.partialVariables)!=null?i:{})})}},Vt=class extends Us{constructor(e,r=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=r}getPrompt(e){for(let[r,n]of this.conditionals)if(r(e))return n;return this.defaultPrompt}}});var __,v_,x_,A_,pm,hm=k(()=>{l();Ce();xr();Mi();__=new he({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),v_=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,x_=[Qt.fromTemplate(v_),bt.fromTemplate("{question}")],A_=wt.fromPromptMessages(x_),pm=new Vt(__,[[Cr,A_]])});var dm=k(()=>{l();Ce();xr();Mi()});var mm=k(()=>{l();Tt()});var ym=k(()=>{l();Ts();Tt()});var gm=k(()=>{l();Tt();xr()});var bm=k(()=>{l();Tt();Ce();Mi();mm();ym();Ya();xr();an();gm()});var O_,P_,E_,T_,S_,wm,C_,I_,k_,R_,j_,_m,vm=k(()=>{l();bm();Mi();O_=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,P_=new he({inputVariables:["question","existing_answer","context"],template:O_}),E_=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,T_=[bt.fromTemplate("{question}"),ai.fromTemplate("{existing_answer}"),bt.fromTemplate(E_)],S_=wt.fromPromptMessages(T_),wm=new Vt(P_,[[Cr,S_]]),C_=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,I_=new he({inputVariables:["context","question"],template:C_}),k_=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,R_=[Qt.fromTemplate(k_),bt.fromTemplate("{question}")],j_=wt.fromPromptMessages(R_),_m=new Vt(I_,[[Cr,j_]])});function vn(t,e={}){let{prompt:r=pm.getPrompt(t),verbose:n}=e,i=new de({prompt:r,llm:t,verbose:n});return new It({llmChain:i,verbose:n})}function Yc(t,e={}){let{questionPrompt:r=_m.getPrompt(t),refinePrompt:n=wm.getPrompt(t),verbose:i}=e,a=new de({prompt:r,llm:t,verbose:i}),s=new de({prompt:n,llm:t,verbose:i});return new ar({llmChain:a,refineLLMChain:s,verbose:i})}var xn=k(()=>{l();$e();Sr();hm();dm();vm()});var xm={};mt(xm,{VectorDBQAChain:()=>Fs});var Fs,Wc=k(()=>{l();Ke();xn();Fs=class t extends ge{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){var r,n,i;super(e),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"vectorstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.vectorstore=e.vectorstore,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=(r=e.inputKey)!=null?r:this.inputKey,this.k=(n=e.k)!=null?n:this.k,this.returnSourceDocuments=(i=e.returnSourceDocuments)!=null?i:this.returnSourceDocuments}_call(e,r){return f(this,null,function*(){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);let n=e[this.inputKey],i=yield this.vectorstore.similaritySearch(n,this.k,e.filter,r==null?void 0:r.getChild("vectorstore")),a={question:n,input_documents:i},s=yield this.combineDocumentsChain.call(a,r==null?void 0:r.getChild("combine_documents"));return this.returnSourceDocuments?S(h({},s),{sourceDocuments:i}):s})}_chainType(){return"vector_db_qa"}static deserialize(e,r){return f(this,null,function*(){if(!("vectorstore"in r))throw new Error("Need to pass in a vectorstore to deserialize VectorDBQAChain");let{vectorstore:n}=r;if(!e.combine_documents_chain)throw new Error("VectorDBQAChain must have combine_documents_chain in serialized data");return new t({combineDocumentsChain:yield ge.deserialize(e.combine_documents_chain),k:e.k,vectorstore:n})})}serialize(){return{_type:this._chainType(),combine_documents_chain:this.combineDocumentsChain.serialize(),k:this.k}}static fromLLM(e,r,n){let i=vn(e);return new this(h({vectorstore:r,combineDocumentsChain:i},n))}}});var Am,Om,N_,Pm,Em=k(()=>{l();Ce();Am=`You are given the below API Documentation:
{api_docs}
Using this documentation, generate the full API url to call for answering the user question.
You should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.

Question:{question}
API url:`,Om=new he({inputVariables:["api_docs","question"],template:Am}),N_=`${Am} {api_url}

Here is the response from the API:

{api_response}

Summarize this response to answer the original question.

Summary:`,Pm=new he({inputVariables:["api_docs","question","api_url","api_response"],template:N_})});var Tm={};mt(Tm,{APIChain:()=>qs});var qs,Gc=k(()=>{l();Ke();$e();Em();qs=class t extends ge{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){var r,n,i;super(e),Object.defineProperty(this,"apiAnswerChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiRequestChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),this.apiRequestChain=e.apiRequestChain,this.apiAnswerChain=e.apiAnswerChain,this.apiDocs=e.apiDocs,this.inputKey=(r=e.inputKey)!=null?r:this.inputKey,this.outputKey=(n=e.outputKey)!=null?n:this.outputKey,this.headers=(i=e.headers)!=null?i:this.headers}_call(e,r){return f(this,null,function*(){let n=e[this.inputKey],i=yield this.apiRequestChain.predict({question:n,api_docs:this.apiDocs},r==null?void 0:r.getChild("request")),s=yield(yield fetch(i,{headers:this.headers})).text(),o=yield this.apiAnswerChain.predict({question:n,api_docs:this.apiDocs,api_url:i,api_response:s},r==null?void 0:r.getChild("response"));return{[this.outputKey]:o}})}_chainType(){return"api_chain"}static deserialize(e){return f(this,null,function*(){let{api_request_chain:r,api_answer_chain:n,api_docs:i}=e;if(!r)throw new Error("LLMChain must have api_request_chain");if(!n)throw new Error("LLMChain must have api_answer_chain");if(!i)throw new Error("LLMChain must have api_docs");return new t({apiAnswerChain:yield de.deserialize(n),apiRequestChain:yield de.deserialize(r),apiDocs:i})})}serialize(){return{_type:this._chainType(),api_answer_chain:this.apiAnswerChain.serialize(),api_request_chain:this.apiRequestChain.serialize(),api_docs:this.apiDocs}}static fromLLMAndAPIDocs(e,r,n={}){let{apiUrlPrompt:i=Om,apiResponsePrompt:a=Pm}=n,s=new de({prompt:i,llm:e}),o=new de({prompt:a,llm:e});return new this(h({apiAnswerChain:o,apiRequestChain:s,apiDocs:r},n))}}});var ge,Ke=k(()=>{l();ct();en();si();ge=class extends Oi{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){let i=e,{memory:a,callbackManager:s}=i,o=_e(i,["memory","callbackManager"]);super(S(h({},o),{callbacks:s!=null?s:o.callbacks})),this.memory=a}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){let r=h({},e);return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}invoke(e,r){return f(this,null,function*(){return this.call(e,r)})}serialize(){throw new Error("Method not implemented.")}run(e,r){return f(this,null,function*(){let n=this.inputKeys.filter(u=>{var c;return!((c=this.memory)!=null&&c.memoryKeys.includes(u))});if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);let a=n.length?{[n[0]]:e}:{},s=yield this.call(a,r),o=Object.keys(s);if(o.length===1)return s[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")})}_formatValues(e){return f(this,null,function*(){let r=h({},e);if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){let n=yield this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(let[i,a]of Object.entries(n))r[i]=a}return r})}call(e,r,n){return f(this,null,function*(){let i=yield this._formatValues(e),a=Za(r),s=yield Pe.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),o=yield s==null?void 0:s.handleChainStart(this.toJSON(),i),u;try{u=yield e.signal?Promise.race([this._call(i,o),new Promise((c,p)=>{var d;(d=e.signal)==null||d.addEventListener("abort",()=>{p(new Error("AbortError"))})})]):this._call(i,o)}catch(c){throw yield o==null?void 0:o.handleChainError(c),c}return this.memory!=null&&(yield this.memory.saveContext(this._selectMemoryInputs(e),u)),yield o==null?void 0:o.handleChainEnd(u),Object.defineProperty(u,Yr,{value:o?{runId:o==null?void 0:o.runId}:void 0,configurable:!0}),u})}apply(e,r){return f(this,null,function*(){return Promise.all(e.map((n,i)=>f(this,null,function*(){return this.call(n,r==null?void 0:r[i])})))})}static deserialize(n){return f(this,arguments,function*(e,r={}){switch(e._type){case"llm_chain":{let{LLMChain:i}=yield Promise.resolve().then(()=>($e(),um));return i.deserialize(e)}case"sequential_chain":{let{SequentialChain:i}=yield Promise.resolve().then(()=>(Di(),Jc));return i.deserialize(e)}case"simple_sequential_chain":{let{SimpleSequentialChain:i}=yield Promise.resolve().then(()=>(Di(),Jc));return i.deserialize(e)}case"stuff_documents_chain":{let{StuffDocumentsChain:i}=yield Promise.resolve().then(()=>(Sr(),Ms));return i.deserialize(e)}case"map_reduce_documents_chain":{let{MapReduceDocumentsChain:i}=yield Promise.resolve().then(()=>(Sr(),Ms));return i.deserialize(e)}case"refine_documents_chain":{let{RefineDocumentsChain:i}=yield Promise.resolve().then(()=>(Sr(),Ms));return i.deserialize(e)}case"vector_db_qa":{let{VectorDBQAChain:i}=yield Promise.resolve().then(()=>(Wc(),xm));return i.deserialize(e,r)}case"api_chain":{let{APIChain:i}=yield Promise.resolve().then(()=>(Gc(),Tm));return i.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}})}}});l();l();jc();l();l();l();l();l();l();l();l();l();l();l();l();l();function ms(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 2*r/n}l();function ys(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*t[a],n+=e[a]*e[a],i+=(t[a]-e[a])*(t[a]-e[a]);return i/(r+n)}l();l();l();l();l();l();l();function gs(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Math.min(t[n],e[n]);return 1-r}l();l();function bs(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(n+i-r)}l();l();l();l();l();function ws(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.abs(t[i]-e[i]),n+=Math.min(t[i],e[i]);return r/n}l();l();l();l();l();l();l();function _s(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 1-r/n}l();l();l();l();l();l();l();l();function vs(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Rn(Math.sqrt(t[n])-Math.sqrt(e[n]),2);return r}l();l();l();function xs(t,e,r){if(r){let n=0,i=0;for(let a=0;a<t.length;a++)n+=t[a]&&e[a],i+=t[a]||e[a];return i===0?1:n/i}else{let n=0,i=0,a=0;for(let s=0;s<t.length;s++)n+=t[s],i+=e[s],a+=Math.min(t[s],e[s]);return 1-(n+i-2*a)/(n+i-a)}}l();l();var Os={};mt(Os,{cosine:()=>Ci,czekanowski:()=>ms,dice:()=>Fc,intersection:()=>qc,kulczynski:()=>Bc,kumarHassebrook:()=>bs,motyka:()=>Vc,pearson:()=>$c,squaredChord:()=>Kc,tanimoto:()=>xs,tree:()=>Uc});l();var Uc={};mt(Uc,{createTree:()=>Ti,getFunction:()=>b_,treeSimilarity:()=>g_});l();l();l();var nm=Ue(tm()),im=Ue(rm());function Ti(t,e={}){var r=t[0];let{minWindow:n=.16,threshold:i=.01,from:a=r[0],to:s=r[r.length-1]}=e;return Ei(t[0],t[1],a,s,n,i)}function Ei(t,e,r,n,i,a){if(n-r<i)return null;var s=(0,nm.default)(t,r,im.ascending);s<0&&(s=~s);for(var o=0,u=0,c=s;c<t.length&&!(t[c]>=n);c++)o+=e[c],u+=t[c]*e[c];return o<a||(u/=o,u-r<1e-6||n-u<1e-6)?null:u-r<i/4?Ei(t,e,u,n,i,a):n-u<i/4?Ei(t,e,r,u,i,a):new Mc(o,u,Ei(t,e,r,u,i,a),Ei(t,e,u,n,i,a))}var Mc=class{constructor(e,r,n,i){this.sum=e,this.center=r,this.left=n,this.right=i}};function Si(t,e,r={}){let{alpha:n=.1,beta:i=.33,gamma:a=.001}=r;if(t===null||e===null)return 0;Array.isArray(t)&&(t=Ti(t)),Array.isArray(e)&&(e=Ti(e));var s=n*Math.min(t.sum,e.sum)/Math.max(t.sum,e.sum)+(1-n)*Math.exp(-a*Math.abs(t.center-e.center));return i*s+(1-i)*(Si(t.left,e.left,r)+Si(t.right,e.right,r))/2}function g_(t,e,r={}){return Si(t,e,r)}function b_(t={}){return(e,r)=>Si(e,r,t)}l();function Ci(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(Math.sqrt(n)*Math.sqrt(i))}l();function Fc(t,e){return 1-ys(t,e)}l();function qc(t,e){return 1-gs(t,e)}l();function Bc(t,e){return 1/ws(t,e)}l();function Vc(t,e){return 1-_s(t,e)}l();l();l();l();var w_=Object.prototype.toString;function am(t){let e=w_.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function sm(t){if(!am(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function zc(t){return sm(t)/t.length}function $c(t,e){let r=zc(t),n=zc(e),i=new Array(t.length),a=new Array(e.length);for(let s=0;s<i.length;s++)i[s]=t[s]-r,a[s]=e[s]-n;return Ci(i,a)}l();function Kc(t,e){return 1-vs(t,e)}l();l();en();rn();var Ps=class extends Me{constructor(e){var r,n,i;super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e==null?void 0:e.callbacks,this.tags=(r=e==null?void 0:e.tags)!=null?r:[],this.metadata=(n=e==null?void 0:e.metadata)!=null?n:{},this.verbose=(i=e==null?void 0:e.verbose)!=null?i:!1}_getRelevantDocuments(e,r){throw new Error("Not implemented!")}invoke(e,r){return f(this,null,function*(){return this.getRelevantDocuments(e,r)})}getRelevantDocuments(e,r){return f(this,null,function*(){let n=Za(r),i=yield Pe.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a=yield i==null?void 0:i.handleRetrieverStart(this.toJSON(),e);try{let s=yield this._getRelevantDocuments(e,a);return yield a==null?void 0:a.handleRetrieverEnd(s),s}catch(s){throw yield a==null?void 0:a.handleRetrieverError(s),s}})}};hr();var Ii=class extends Ps{get lc_namespace(){return["langchain","retrievers","base"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){var r,n;super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=(r=e.k)!=null?r:this.k,this.searchType=(n=e.searchType)!=null?n:this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}_getRelevantDocuments(e,r){return f(this,null,function*(){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,h({k:this.k,filter:this.filter},this.searchKwargs),r==null?void 0:r.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,r==null?void 0:r.getChild("vectorstore"))})}addDocuments(e,r){return f(this,null,function*(){return this.vectorStore.addDocuments(e,r)})}},Es=class extends We{constructor(e,r){super(r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}delete(e){return f(this,null,function*(){throw new Error("Not implemented.")})}similaritySearch(e,r=4,n=void 0,i=void 0){return f(this,null,function*(){return(yield this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),r,n)).map(s=>s[0])})}similaritySearchWithScore(e,r=4,n=void 0,i=void 0){return f(this,null,function*(){return this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),r,n)})}static fromTexts(e,r,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,r,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,r,n,i,a,s){var o;if(typeof e=="number")return new Ii({vectorStore:this,k:e,filter:r,tags:[...i!=null?i:[],this._vectorstoreType()],metadata:a,verbose:s,callbacks:n});{let u={vectorStore:this,k:e==null?void 0:e.k,filter:e==null?void 0:e.filter,tags:[...(o=e==null?void 0:e.tags)!=null?o:[],this._vectorstoreType()],metadata:e==null?void 0:e.metadata,verbose:e==null?void 0:e.verbose,callbacks:e==null?void 0:e.callbacks,searchType:e==null?void 0:e.searchType};return(e==null?void 0:e.searchType)==="mmr"?new Ii(S(h({},u),{searchKwargs:e.searchKwargs})):new Ii(h({},u))}}};Ts();var Ss=class t extends Es{_vectorstoreType(){return"memory"}constructor(e,i={}){var a=i,{similarity:r}=a,n=_e(a,["similarity"]);super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=r!=null?r:Os.cosine}addDocuments(e){return f(this,null,function*(){let r=e.map(({pageContent:n})=>n);return this.addVectors(yield this.embeddings.embedDocuments(r),e)})}addVectors(e,r){return f(this,null,function*(){let n=e.map((i,a)=>({content:r[a].pageContent,embedding:i,metadata:r[a].metadata}));this.memoryVectors=this.memoryVectors.concat(n)})}similaritySearchVectorWithScore(e,r,n){return f(this,null,function*(){let i=u=>{if(!n)return!0;let c=new Bt({metadata:u.metadata,pageContent:u.content});return n(c)},a=this.memoryVectors.filter(i);return a.map((u,c)=>({similarity:this.similarity(e,u.embedding),index:c})).sort((u,c)=>u.similarity>c.similarity?-1:0).slice(0,r).map(u=>[new Bt({metadata:a[u.index].metadata,pageContent:a[u.index].content}),u.similarity])})}static fromTexts(e,r,n,i){return f(this,null,function*(){let a=[];for(let s=0;s<e.length;s+=1){let o=Array.isArray(r)?r[s]:r,u=new Bt({pageContent:e[s],metadata:o});a.push(u)}return t.fromDocuments(a,n,i)})}static fromDocuments(e,r,n){return f(this,null,function*(){let i=new this(r,n);return yield i.addDocuments(e),i})}static fromExistingIndex(e,r){return f(this,null,function*(){return new this(e,r)})}};l();l();var ks=Ue(Ur(),1);jt();Kr();eu();l();Wn();var Cs=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Mt(e!=null?e:{})}};xi();var Is=class extends Cs{constructor(e,r){var u,c,p,d,b,w,g,v,T;super(e!=null?e:{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=(u=e==null?void 0:e.openAIApiKey)!=null?u:ne("OPENAI_API_KEY"),i=(c=e==null?void 0:e.azureOpenAIApiKey)!=null?c:ne("AZURE_OPENAI_API_KEY");if(!i&&!n)throw new Error("OpenAI or Azure OpenAI API key not found");let a=(p=e==null?void 0:e.azureOpenAIApiInstanceName)!=null?p:ne("AZURE_OPENAI_API_INSTANCE_NAME"),s=(d=(e==null?void 0:e.azureOpenAIApiEmbeddingsDeploymentName)||(e==null?void 0:e.azureOpenAIApiDeploymentName))!=null?d:ne("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||ne("AZURE_OPENAI_API_DEPLOYMENT_NAME"),o=(b=e==null?void 0:e.azureOpenAIApiVersion)!=null?b:ne("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=(w=e==null?void 0:e.azureOpenAIBasePath)!=null?w:ne("AZURE_OPENAI_BASE_PATH"),this.modelName=(g=e==null?void 0:e.modelName)!=null?g:this.modelName,this.batchSize=(v=e==null?void 0:e.batchSize)!=null?v:i?1:this.batchSize,this.stripNewLines=(T=e==null?void 0:e.stripNewLines)!=null?T:this.stripNewLines,this.timeout=e==null?void 0:e.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=i,this.azureOpenAIApiInstanceName=a,this.azureOpenAIApiDeploymentName=s,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig=h({apiKey:n},r)}embedDocuments(e){return f(this,null,function*(){let r=Jn(this.stripNewLines?e.map(i=>i.replace(/\n/g," ")):e,this.batchSize),n=[];for(let i=0;i<r.length;i+=1){let a=r[i],{data:s}=yield this.embeddingWithRetry({model:this.modelName,input:a});for(let o=0;o<a.length;o+=1)n.push(s.data[o].embedding)}return n})}embedQuery(e){return f(this,null,function*(){let{data:r}=yield this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replace(/\n/g," "):e});return r.data[0].embedding})}embeddingWithRetry(e){return f(this,null,function*(){if(!this.client){let n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},i=ir(n),a=new ks.Configuration(S(h({},this.clientConfig),{basePath:i,baseOptions:h({timeout:this.timeout,adapter:Rt()?void 0:Ve},this.clientConfig.baseOptions)}));this.client=new ks.OpenAIApi(a)}let r={};return this.azureOpenAIApiKey&&(r.headers=h({"api-key":this.azureOpenAIApiKey},r.headers),r.params=h({"api-version":this.azureOpenAIApiVersion},r.params)),this.caller.call(this.client.createEmbedding.bind(this.client),e,r)})}};l();l();Ts();Ua();l();rn();var Rs=class extends Me{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers"]})}invoke(e,r){return this.transformDocuments(e)}};var Hc=class extends Rs{constructor(e){var r,n,i,a;if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=(r=e==null?void 0:e.chunkSize)!=null?r:this.chunkSize,this.chunkOverlap=(n=e==null?void 0:e.chunkOverlap)!=null?n:this.chunkOverlap,this.keepSeparator=(i=e==null?void 0:e.keepSeparator)!=null?i:this.keepSeparator,this.lengthFunction=(a=e==null?void 0:e.lengthFunction)!=null?a:s=>s.length,this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}transformDocuments(n){return f(this,arguments,function*(e,r={}){return this.splitDocuments(e,r)})}splitOnSeparator(e,r){let n;if(r)if(this.keepSeparator){let i=r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${i})`))}else n=e.split(r);else n=e.split("");return n.filter(i=>i!=="")}createDocuments(i){return f(this,arguments,function*(e,r=[],n={}){let a=r.length>0?r:new Array(e.length).fill({}),{chunkHeader:s="",chunkOverlapHeader:o="(cont'd) ",appendChunkOverlapHeader:u=!1}=n,c=new Array;for(let p=0;p<e.length;p+=1){let d=e[p],b=1,w=null;for(let g of yield this.splitText(d)){let v=s,T=0;if(w){let P=d.indexOf(g),N=d.indexOf(w)+(yield this.lengthFunction(w));T=(d.slice(N,P).match(/\n/g)||[]).length,u&&(v+=o)}b+=T;let j=(g.match(/\n/g)||[]).length,I=a[p].loc&&typeof a[p].loc=="object"?h({},a[p].loc):{};I.lines={from:b,to:b+j};let q=S(h({},a[p]),{loc:I});v+=g,c.push(new Bt({pageContent:v,metadata:q})),b+=j,w=g}}return c})}splitDocuments(n){return f(this,arguments,function*(e,r={}){let i=e.filter(o=>o.pageContent!==void 0),a=i.map(o=>o.pageContent),s=i.map(o=>o.metadata);return this.createDocuments(a,s,r)})}joinDocs(e,r){let n=e.join(r).trim();return n===""?null:n}mergeSplits(e,r){return f(this,null,function*(){let n=[],i=[],a=0;for(let o of e){let u=yield this.lengthFunction(o);if(a+u+(i.length>0?r.length:0)>this.chunkSize&&(a>this.chunkSize,i.length>0)){let c=this.joinDocs(i,r);for(c!==null&&n.push(c);a>this.chunkOverlap||a+u>this.chunkSize&&a>0;)a-=yield this.lengthFunction(i[0]),i.shift()}i.push(o),a+=u}let s=this.joinDocs(i,r);return s!==null&&n.push(s),n})}};var js=class extends Hc{constructor(e){var r,n,i;super(e),Object.defineProperty(this,"encodingName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disallowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.encodingName=(r=e==null?void 0:e.encodingName)!=null?r:"gpt2",this.allowedSpecial=(n=e==null?void 0:e.allowedSpecial)!=null?n:[],this.disallowedSpecial=(i=e==null?void 0:e.disallowedSpecial)!=null?i:"all"}splitText(e){return f(this,null,function*(){this.tokenizer||(this.tokenizer=yield du(this.encodingName));let r=[],n=this.tokenizer.encode(e,this.allowedSpecial,this.disallowedSpecial),i=0,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);for(;i<n.length;)r.push(this.tokenizer.decode(s)),i+=this.chunkSize-this.chunkOverlap,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);return r})}};l();l();Ke();$e();Gc();l();$e();Ce();l();Qr();l();Qr();l();ct();Di();Sr();l();Ce();Ke();$e();xn();l();Ke();Wc();xn();l();$e();Sr();l();Ce();var L_=`Write a concise summary of the following:


"{text}"


CONCISE SUMMARY:`,Ui=new he({template:L_,inputVariables:["text"]});l();Ce();var D_=`Your job is to produce a final summary
We have provided an existing summary up to a certain point: "{existing_answer}"
We have the opportunity to refine the existing summary
(only if needed) with some more context below.
------------
"{text}"
------------

Given the new context, refine the original summary
If the context isn't useful, return the original summary.

REFINED SUMMARY:`,Sm=new he({template:D_,inputVariables:["existing_answer","text"]});var Qc=(t,e={type:"map_reduce"})=>{let{verbose:r}=e;if(e.type==="stuff"){let{prompt:n=Ui}=e,i=new de({prompt:n,llm:t,verbose:r});return new It({llmChain:i,documentVariableName:"text",verbose:r})}if(e.type==="map_reduce"){let{combineMapPrompt:n=Ui,combinePrompt:i=Ui,returnIntermediateSteps:a}=e,s=new de({prompt:n,llm:t,verbose:r}),o=new de({prompt:i,llm:t,verbose:r}),u=new It({llmChain:o,documentVariableName:"text",verbose:r});return new Tr({llmChain:s,combineDocumentChain:u,documentVariableName:"text",returnIntermediateSteps:a,verbose:r})}if(e.type==="refine"){let{refinePrompt:n=Sm,questionPrompt:i=Ui}=e,a=new de({prompt:i,llm:t,verbose:r}),s=new de({prompt:n,llm:t,verbose:r});return new ar({llmChain:a,refineLLMChain:s,documentVariableName:"text",verbose:r})}throw new Error(`Invalid _type: ${e.type}`)};l();Ce();ct();Ke();$e();xn();l();Ke();xn();var An=class extends ge{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){var r,n;super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=(r=e.inputKey)!=null?r:this.inputKey,this.returnSourceDocuments=(n=e.returnSourceDocuments)!=null?n:this.returnSourceDocuments}_call(e,r){return f(this,null,function*(){if(!(this.inputKey in e))throw new Error(`Question key "${this.inputKey}" not found.`);let n=e[this.inputKey],i=yield this.retriever.getRelevantDocuments(n,r==null?void 0:r.getChild("retriever")),a={question:n,input_documents:i},s=yield this.combineDocumentsChain.call(a,r==null?void 0:r.getChild("combine_documents"));return this.returnSourceDocuments?S(h({},s),{sourceDocuments:i}):s})}_chainType(){return"retrieval_qa"}static deserialize(e,r){return f(this,null,function*(){throw new Error("Not implemented")})}serialize(){throw new Error("Not implemented")}static fromLLM(e,r,n){let i=vn(e,{prompt:n==null?void 0:n.prompt});return new this(S(h({},n),{retriever:r,combineDocumentsChain:i}))}};l();Ke();$e();l();l();Ya();Ce();l();var Cm=Ue(Ur(),1);Ke();Kr();Wn();jt();l();Ke();l();$e();l();l();an();$e();Ce();l();l();l();vi();Ri();Ri();l();an();Ce();l();l();Ke();l();vi();Ce();l();Ri();$e();l();vi();Ce();$e();l();l();l();function Jm(t){return typeof t=="undefined"||t===null}function $_(t){return typeof t=="object"&&t!==null}function K_(t){return Array.isArray(t)?t:Jm(t)?[]:[t]}function H_(t,e){var r,n,i,a;if(e)for(a=Object.keys(e),r=0,n=a.length;r<n;r+=1)i=a[r],t[i]=e[i];return t}function Z_(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function J_(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Y_=Jm,W_=$_,G_=K_,Q_=Z_,X_=J_,ev=H_,je={isNothing:Y_,isObject:W_,toArray:G_,repeat:Q_,isNegativeZero:X_,extend:ev};function Ym(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function qi(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Ym(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}qi.prototype=Object.create(Error.prototype);qi.prototype.constructor=qi;qi.prototype.toString=function(e){return this.name+": "+Ym(this,e)};var rt=qi;function Xc(t,e,r,n,i){var a="",s="",o=Math.floor(i/2)-1;return n-e>o&&(a=" ... ",e=n-o+a.length),r-n>o&&(s=" ...",r=n+o-s.length),{str:a+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+a.length}}function el(t,e){return je.repeat(" ",e-t.length)+t}function tv(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],a,s=-1;a=r.exec(t.buffer);)i.push(a.index),n.push(a.index+a[0].length),t.position<=a.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o="",u,c,p=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+p+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)c=Xc(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),d),o=je.repeat(" ",e.indent)+el((t.line-u+1).toString(),p)+" | "+c.str+`
`+o;for(c=Xc(t.buffer,n[s],i[s],t.position,d),o+=je.repeat(" ",e.indent)+el((t.line+1).toString(),p)+" | "+c.str+`
`,o+=je.repeat("-",e.indent+p+3+c.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)c=Xc(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),d),o+=je.repeat(" ",e.indent)+el((t.line+u+1).toString(),p)+" | "+c.str+`
`;return o.replace(/\n$/,"")}var rv=tv,nv=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],iv=["scalar","sequence","mapping"];function av(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function sv(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(nv.indexOf(r)===-1)throw new rt('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=av(e.styleAliases||null),iv.indexOf(this.kind)===-1)throw new rt('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var He=sv;function jm(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=s)}),r[i]=n}),r}function ov(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function rl(t){return this.extend(t)}rl.prototype.extend=function(e){var r=[],n=[];if(e instanceof He)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new rt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof He))throw new rt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new rt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new rt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof He))throw new rt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(rl.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=jm(i,"implicit"),i.compiledExplicit=jm(i,"explicit"),i.compiledTypeMap=ov(i.compiledImplicit,i.compiledExplicit),i};var uv=rl,cv=new He("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),lv=new He("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),pv=new He("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),hv=new uv({explicit:[cv,lv,pv]});function dv(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function fv(){return null}function mv(t){return t===null}var yv=new He("tag:yaml.org,2002:null",{kind:"scalar",resolve:dv,construct:fv,predicate:mv,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function gv(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function bv(t){return t==="true"||t==="True"||t==="TRUE"}function wv(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var _v=new He("tag:yaml.org,2002:bool",{kind:"scalar",resolve:gv,construct:bv,predicate:wv,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function vv(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function xv(t){return 48<=t&&t<=55}function Av(t){return 48<=t&&t<=57}function Ov(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!vv(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!xv(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Av(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Pv(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Ev(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!je.isNegativeZero(t)}var Tv=new He("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ov,construct:Pv,predicate:Ev,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Sv=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Cv(t){return!(t===null||!Sv.test(t)||t[t.length-1]==="_")}function Iv(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var kv=/^[-+]?[0-9]+e/;function Rv(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(je.isNegativeZero(t))return"-0.0";return r=t.toString(10),kv.test(r)?r.replace("e",".e"):r}function jv(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||je.isNegativeZero(t))}var Nv=new He("tag:yaml.org,2002:float",{kind:"scalar",resolve:Cv,construct:Iv,predicate:jv,represent:Rv,defaultStyle:"lowercase"}),Lv=hv.extend({implicit:[yv,_v,Tv,Nv]}),Dv=Lv,Wm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Gm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Mv(t){return t===null?!1:Wm.exec(t)!==null||Gm.exec(t)!==null}function Uv(t){var e,r,n,i,a,s,o,u=0,c=null,p,d,b;if(e=Wm.exec(t),e===null&&(e=Gm.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(p=+e[10],d=+(e[11]||0),c=(p*60+d)*6e4,e[9]==="-"&&(c=-c)),b=new Date(Date.UTC(r,n,i,a,s,o,u)),c&&b.setTime(b.getTime()-c),b}function Fv(t){return t.toISOString()}var qv=new He("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Mv,construct:Uv,instanceOf:Date,represent:Fv});function Bv(t){return t==="<<"||t===null}var Vv=new He("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Bv}),ol=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function zv(t){if(t===null)return!1;var e,r,n=0,i=t.length,a=ol;for(r=0;r<i;r++)if(e=a.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function $v(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,a=ol,s=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|a.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}function Kv(t){var e="",r=0,n,i,a=t.length,s=ol;for(n=0;n<a;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=a%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Hv(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Zv=new He("tag:yaml.org,2002:binary",{kind:"scalar",resolve:zv,construct:$v,predicate:Hv,represent:Kv}),Jv=Object.prototype.hasOwnProperty,Yv=Object.prototype.toString;function Wv(t){if(t===null)return!0;var e=[],r,n,i,a,s,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],s=!1,Yv.call(i)!=="[object Object]")return!1;for(a in i)if(Jv.call(i,a))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function Gv(t){return t!==null?t:[]}var Qv=new He("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Wv,construct:Gv}),Xv=Object.prototype.toString;function ex(t){if(t===null)return!0;var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],Xv.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[e]=[i[0],n[i[0]]]}return!0}function tx(t){if(t===null)return[];var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),a[e]=[i[0],n[i[0]]];return a}var rx=new He("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ex,construct:tx}),nx=Object.prototype.hasOwnProperty;function ix(t){if(t===null)return!0;var e,r=t;for(e in r)if(nx.call(r,e)&&r[e]!==null)return!1;return!0}function ax(t){return t!==null?t:{}}var sx=new He("tag:yaml.org,2002:set",{kind:"mapping",resolve:ix,construct:ax}),Qm=Dv.extend({implicit:[qv,Vv],explicit:[Zv,Qv,rx,sx]}),or=Object.prototype.hasOwnProperty,Bs=1,Xm=2,ey=3,Vs=4,tl=1,ox=2,Nm=3,ux=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cx=/[\x85\u2028\u2029]/,lx=/[,\[\]\{\}]/,ty=/^(?:!|!!|![a-z\-]+!)$/i,ry=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Lm(t){return Object.prototype.toString.call(t)}function kt(t){return t===10||t===13}function kr(t){return t===9||t===32}function nt(t){return t===9||t===32||t===10||t===13}function Pn(t){return t===44||t===91||t===93||t===123||t===125}function px(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function hx(t){return t===120?2:t===117?4:t===85?8:0}function dx(t){return 48<=t&&t<=57?t-48:-1}function Dm(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function fx(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var ny=new Array(256),iy=new Array(256);for(Ir=0;Ir<256;Ir++)ny[Ir]=Dm(Ir)?1:0,iy[Ir]=Dm(Ir);var Ir;function mx(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Qm,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ay(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=rv(r),new rt(e,r)}function G(t,e){throw ay(t,e)}function zs(t,e){t.onWarning&&t.onWarning.call(null,ay(t,e))}var Mm={YAML:function(e,r,n){var i,a,s;e.version!==null&&G(e,"duplication of %YAML directive"),n.length!==1&&G(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&G(e,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),s=parseInt(i[2],10),a!==1&&G(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&zs(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,a;n.length!==2&&G(e,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],ty.test(i)||G(e,"ill-formed tag handle (first argument) of the TAG directive"),or.call(e.tagMap,i)&&G(e,'there is a previously declared suffix for "'+i+'" tag handle'),ry.test(a)||G(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch(s){G(e,"tag prefix is malformed: "+a)}e.tagMap[i]=a}};function sr(t,e,r,n){var i,a,s,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,a=o.length;i<a;i+=1)s=o.charCodeAt(i),s===9||32<=s&&s<=1114111||G(t,"expected valid JSON character");else ux.test(o)&&G(t,"the stream contains non-printable characters");t.result+=o}}function Um(t,e,r,n){var i,a,s,o;for(je.isObject(r)||G(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,o=i.length;s<o;s+=1)a=i[s],or.call(e,a)||(e[a]=r[a],n[a]=!0)}function En(t,e,r,n,i,a,s,o,u){var c,p;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,p=i.length;c<p;c+=1)Array.isArray(i[c])&&G(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Lm(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Lm(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(c=0,p=a.length;c<p;c+=1)Um(t,e,a[c],r);else Um(t,e,a,r);else!t.json&&!or.call(r,i)&&or.call(e,i)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=u||t.position,G(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[i]=a,delete r[i];return e}function ul(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):G(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ke(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;kr(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(kt(i))for(ul(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&zs(t,"deficient indentation"),n}function Hs(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||nt(r)))}function cl(t,e){e===1?t.result+=" ":e>1&&(t.result+=je.repeat(`
`,e-1))}function yx(t,e,r){var n,i,a,s,o,u,c,p,d=t.kind,b=t.result,w;if(w=t.input.charCodeAt(t.position),nt(w)||Pn(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(i=t.input.charCodeAt(t.position+1),nt(i)||r&&Pn(i)))return!1;for(t.kind="scalar",t.result="",a=s=t.position,o=!1;w!==0;){if(w===58){if(i=t.input.charCodeAt(t.position+1),nt(i)||r&&Pn(i))break}else if(w===35){if(n=t.input.charCodeAt(t.position-1),nt(n))break}else{if(t.position===t.lineStart&&Hs(t)||r&&Pn(w))break;if(kt(w))if(u=t.line,c=t.lineStart,p=t.lineIndent,ke(t,!1,-1),t.lineIndent>=e){o=!0,w=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=c,t.lineIndent=p;break}}o&&(sr(t,a,s,!1),cl(t,t.line-u),a=s=t.position,o=!1),kr(w)||(s=t.position+1),w=t.input.charCodeAt(++t.position)}return sr(t,a,s,!1),t.result?!0:(t.kind=d,t.result=b,!1)}function gx(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(sr(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else kt(r)?(sr(t,n,i,!0),cl(t,ke(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Hs(t)?G(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);G(t,"unexpected end of the stream within a single quoted scalar")}function bx(t,e){var r,n,i,a,s,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return sr(t,r,t.position,!0),t.position++,!0;if(o===92){if(sr(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),kt(o))ke(t,!1,e);else if(o<256&&ny[o])t.result+=iy[o],t.position++;else if((s=hx(o))>0){for(i=s,a=0;i>0;i--)o=t.input.charCodeAt(++t.position),(s=px(o))>=0?a=(a<<4)+s:G(t,"expected hexadecimal character");t.result+=fx(a),t.position++}else G(t,"unknown escape sequence");r=n=t.position}else kt(o)?(sr(t,r,n,!0),cl(t,ke(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Hs(t)?G(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}G(t,"unexpected end of the stream within a double quoted scalar")}function wx(t,e){var r=!0,n,i,a,s=t.tag,o,u=t.anchor,c,p,d,b,w,g=Object.create(null),v,T,j,I;if(I=t.input.charCodeAt(t.position),I===91)p=93,w=!1,o=[];else if(I===123)p=125,w=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),I=t.input.charCodeAt(++t.position);I!==0;){if(ke(t,!0,e),I=t.input.charCodeAt(t.position),I===p)return t.position++,t.tag=s,t.anchor=u,t.kind=w?"mapping":"sequence",t.result=o,!0;r?I===44&&G(t,"expected the node content, but found ','"):G(t,"missed comma between flow collection entries"),T=v=j=null,d=b=!1,I===63&&(c=t.input.charCodeAt(t.position+1),nt(c)&&(d=b=!0,t.position++,ke(t,!0,e))),n=t.line,i=t.lineStart,a=t.position,Tn(t,e,Bs,!1,!0),T=t.tag,v=t.result,ke(t,!0,e),I=t.input.charCodeAt(t.position),(b||t.line===n)&&I===58&&(d=!0,I=t.input.charCodeAt(++t.position),ke(t,!0,e),Tn(t,e,Bs,!1,!0),j=t.result),w?En(t,o,g,T,v,j,n,i,a):d?o.push(En(t,null,g,T,v,j,n,i,a)):o.push(v),ke(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(r=!0,I=t.input.charCodeAt(++t.position)):r=!1}G(t,"unexpected end of the stream within a flow collection")}function _x(t,e){var r,n,i=tl,a=!1,s=!1,o=e,u=0,c=!1,p,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)tl===i?i=d===43?Nm:ox:G(t,"repeat of a chomping mode identifier");else if((p=dx(d))>=0)p===0?G(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?G(t,"repeat of an indentation width identifier"):(o=e+p-1,s=!0);else break;if(kr(d)){do d=t.input.charCodeAt(++t.position);while(kr(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!kt(d)&&d!==0)}for(;d!==0;){for(ul(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<o)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>o&&(o=t.lineIndent),kt(d)){u++;continue}if(t.lineIndent<o){i===Nm?t.result+=je.repeat(`
`,a?1+u:u):i===tl&&a&&(t.result+=`
`);break}for(n?kr(d)?(c=!0,t.result+=je.repeat(`
`,a?1+u:u)):c?(c=!1,t.result+=je.repeat(`
`,u+1)):u===0?a&&(t.result+=" "):t.result+=je.repeat(`
`,u):t.result+=je.repeat(`
`,a?1+u:u),a=!0,s=!0,u=0,r=t.position;!kt(d)&&d!==0;)d=t.input.charCodeAt(++t.position);sr(t,r,t.position,!1)}return!0}function Fm(t,e){var r,n=t.tag,i=t.anchor,a=[],s,o=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,G(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!nt(s))));){if(o=!0,t.position++,ke(t,!0,-1)&&t.lineIndent<=e){a.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,Tn(t,e,ey,!1,!0),a.push(t.result),ke(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)G(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=a,!0):!1}function vx(t,e,r){var n,i,a,s,o,u,c=t.tag,p=t.anchor,d={},b=Object.create(null),w=null,g=null,v=null,T=!1,j=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),I=t.input.charCodeAt(t.position);I!==0;){if(!T&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,G(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),a=t.line,(I===63||I===58)&&nt(n))I===63?(T&&(En(t,d,b,w,g,null,s,o,u),w=g=v=null),j=!0,T=!0,i=!0):T?(T=!1,i=!0):G(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=n;else{if(s=t.line,o=t.lineStart,u=t.position,!Tn(t,r,Xm,!1,!0))break;if(t.line===a){for(I=t.input.charCodeAt(t.position);kr(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),nt(I)||G(t,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(En(t,d,b,w,g,null,s,o,u),w=g=v=null),j=!0,T=!1,i=!1,w=t.tag,g=t.result;else if(j)G(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=p,!0}else if(j)G(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=p,!0}if((t.line===a||t.lineIndent>e)&&(T&&(s=t.line,o=t.lineStart,u=t.position),Tn(t,e,Vs,!0,i)&&(T?g=t.result:v=t.result),T||(En(t,d,b,w,g,v,s,o,u),w=g=v=null),ke(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&I!==0)G(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return T&&En(t,d,b,w,g,null,s,o,u),j&&(t.tag=c,t.anchor=p,t.kind="mapping",t.result=d),j}function xx(t){var e,r=!1,n=!1,i,a,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&G(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(a=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):G(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!nt(s);)s===33&&(n?G(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),ty.test(i)||G(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),lx.test(a)&&G(t,"tag suffix cannot contain flow indicator characters")}a&&!ry.test(a)&&G(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch(o){G(t,"tag name is malformed: "+a)}return r?t.tag=a:or.call(t.tagMap,i)?t.tag=t.tagMap[i]+a:i==="!"?t.tag="!"+a:i==="!!"?t.tag="tag:yaml.org,2002:"+a:G(t,'undeclared tag handle "'+i+'"'),!0}function Ax(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&G(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!nt(r)&&!Pn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&G(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Ox(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!nt(n)&&!Pn(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&G(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),or.call(t.anchorMap,r)||G(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ke(t,!0,-1),!0}function Tn(t,e,r,n,i){var a,s,o,u=1,c=!1,p=!1,d,b,w,g,v,T;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=Vs===r||ey===r,n&&ke(t,!0,-1)&&(c=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;xx(t)||Ax(t);)ke(t,!0,-1)?(c=!0,o=a,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):o=!1;if(o&&(o=c||i),(u===1||Vs===r)&&(Bs===r||Xm===r?v=e:v=e+1,T=t.position-t.lineStart,u===1?o&&(Fm(t,T)||vx(t,T,v))||wx(t,v)?p=!0:(s&&_x(t,v)||gx(t,v)||bx(t,v)?p=!0:Ox(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&G(t,"alias node should not have any properties")):yx(t,v,Bs===r)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(p=o&&Fm(t,T))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&G(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,b=t.implicitTypes.length;d<b;d+=1)if(g=t.implicitTypes[d],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(or.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,w=t.typeMap.multi[t.kind||"fallback"],d=0,b=w.length;d<b;d+=1)if(t.tag.slice(0,w[d].tag.length)===w[d].tag){g=w[d];break}g||G(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&G(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):G(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}function Px(t){var e=t.position,r,n,i,a=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ke(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(a=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!nt(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&G(t,"directive name must not be less than one character in length");s!==0;){for(;kr(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!kt(s));break}if(kt(s))break;for(r=t.position;s!==0&&!nt(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&ul(t),or.call(Mm,n)?Mm[n](t,n,i):zs(t,'unknown document directive "'+n+'"')}if(ke(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ke(t,!0,-1)):a&&G(t,"directives end mark is expected"),Tn(t,t.lineIndent-1,Vs,!1,!0),ke(t,!0,-1),t.checkLineBreaks&&cx.test(t.input.slice(e,t.position))&&zs(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Hs(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ke(t,!0,-1));return}if(t.position<t.length-1)G(t,"end of the stream or a document separator is expected");else return}function sy(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new mx(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,G(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Px(r);return r.documents}function Ex(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=sy(t,r);if(typeof e!="function")return n;for(var i=0,a=n.length;i<a;i+=1)e(n[i])}function Tx(t,e){var r=sy(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new rt("expected a single document in the stream, but found more")}}var Sx=Ex,Cx=Tx,oy={loadAll:Sx,load:Cx},uy=Object.prototype.toString,cy=Object.prototype.hasOwnProperty,ll=65279,Ix=9,Bi=10,kx=13,Rx=32,jx=33,Nx=34,nl=35,Lx=37,Dx=38,Mx=39,Ux=42,ly=44,Fx=45,$s=58,qx=61,Bx=62,Vx=63,zx=64,py=91,hy=93,$x=96,dy=123,Kx=124,fy=125,Ze={};Ze[0]="\\0";Ze[7]="\\a";Ze[8]="\\b";Ze[9]="\\t";Ze[10]="\\n";Ze[11]="\\v";Ze[12]="\\f";Ze[13]="\\r";Ze[27]="\\e";Ze[34]='\\"';Ze[92]="\\\\";Ze[133]="\\N";Ze[160]="\\_";Ze[8232]="\\L";Ze[8233]="\\P";var Hx=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Zx=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Jx(t,e){var r,n,i,a,s,o,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,a=n.length;i<a;i+=1)s=n[i],o=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&cy.call(u.styleAliases,o)&&(o=u.styleAliases[o]),r[s]=o;return r}function Yx(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new rt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+je.repeat("0",n-e.length)+e}var Wx=1,Vi=2;function Gx(t){this.schema=t.schema||Qm,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=je.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Jx(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Vi:Wx,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function qm(t,e){for(var r=je.repeat(" ",e),n=0,i=-1,a="",s,o=t.length;n<o;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=o):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}function il(t,e){return`
`+je.repeat(" ",t.indent*e)}function Qx(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Ks(t){return t===Rx||t===Ix}function zi(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ll||65536<=t&&t<=1114111}function Bm(t){return zi(t)&&t!==ll&&t!==kx&&t!==Bi}function Vm(t,e,r){var n=Bm(t),i=n&&!Ks(t);return(r?n:n&&t!==ly&&t!==py&&t!==hy&&t!==dy&&t!==fy)&&t!==nl&&!(e===$s&&!i)||Bm(e)&&!Ks(e)&&t===nl||e===$s&&i}function Xx(t){return zi(t)&&t!==ll&&!Ks(t)&&t!==Fx&&t!==Vx&&t!==$s&&t!==ly&&t!==py&&t!==hy&&t!==dy&&t!==fy&&t!==nl&&t!==Dx&&t!==Ux&&t!==jx&&t!==Kx&&t!==qx&&t!==Bx&&t!==Mx&&t!==Nx&&t!==Lx&&t!==zx&&t!==$x}function e0(t){return!Ks(t)&&t!==$s}function Fi(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function my(t){var e=/^\n* /;return e.test(t)}var yy=1,al=2,gy=3,by=4,On=5;function t0(t,e,r,n,i,a,s,o){var u,c=0,p=null,d=!1,b=!1,w=n!==-1,g=-1,v=Xx(Fi(t,0))&&e0(Fi(t,t.length-1));if(e||s)for(u=0;u<t.length;c>=65536?u+=2:u++){if(c=Fi(t,u),!zi(c))return On;v=v&&Vm(c,p,o),p=c}else{for(u=0;u<t.length;c>=65536?u+=2:u++){if(c=Fi(t,u),c===Bi)d=!0,w&&(b=b||u-g-1>n&&t[g+1]!==" ",g=u);else if(!zi(c))return On;v=v&&Vm(c,p,o),p=c}b=b||w&&u-g-1>n&&t[g+1]!==" "}return!d&&!b?v&&!s&&!i(t)?yy:a===Vi?On:al:r>9&&my(t)?On:s?a===Vi?On:al:b?by:gy}function r0(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Vi?'""':"''";if(!t.noCompatMode&&(Hx.indexOf(e)!==-1||Zx.test(e)))return t.quotingType===Vi?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=n||t.flowLevel>-1&&r>=t.flowLevel;function u(c){return Qx(t,c)}switch(t0(e,o,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case yy:return e;case al:return"'"+e.replace(/'/g,"''")+"'";case gy:return"|"+zm(e,t.indent)+$m(qm(e,a));case by:return">"+zm(e,t.indent)+$m(qm(n0(e,s),a));case On:return'"'+i0(e)+'"';default:throw new rt("impossible error: invalid scalar style")}}()}function zm(t,e){var r=my(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),a=i?"+":n?"":"-";return r+a+`
`}function $m(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function n0(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,Km(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",a,s;s=r.exec(t);){var o=s[1],u=s[2];a=u[0]===" ",n+=o+(!i&&!a&&u!==""?`
`:"")+Km(u,e),i=a}return n}function Km(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,a,s=0,o=0,u="";n=r.exec(t);)o=n.index,o-i>e&&(a=s>i?s:o,u+=`
`+t.slice(i,a),i=a+1),s=o;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function i0(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Fi(t,i),n=Ze[r],!n&&zi(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||Yx(r);return e}function a0(t,e,r){var n="",i=t.tag,a,s,o;for(a=0,s=r.length;a<s;a+=1)o=r[a],t.replacer&&(o=t.replacer.call(r,String(a),o)),(zt(t,e,o,!1,!1)||typeof o=="undefined"&&zt(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Hm(t,e,r,n){var i="",a=t.tag,s,o,u;for(s=0,o=r.length;s<o;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(zt(t,e+1,u,!0,!0,!1,!0)||typeof u=="undefined"&&zt(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=il(t,e)),t.dump&&Bi===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=a,t.dump=i||"[]"}function s0(t,e,r){var n="",i=t.tag,a=Object.keys(r),s,o,u,c,p;for(s=0,o=a.length;s<o;s+=1)p="",n!==""&&(p+=", "),t.condenseFlow&&(p+='"'),u=a[s],c=r[u],t.replacer&&(c=t.replacer.call(r,u,c)),zt(t,e,u,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),zt(t,e,c,!1,!1)&&(p+=t.dump,n+=p));t.tag=i,t.dump="{"+n+"}"}function o0(t,e,r,n){var i="",a=t.tag,s=Object.keys(r),o,u,c,p,d,b;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new rt("sortKeys must be a boolean or a function");for(o=0,u=s.length;o<u;o+=1)b="",(!n||i!=="")&&(b+=il(t,e)),c=s[o],p=r[c],t.replacer&&(p=t.replacer.call(r,c,p)),zt(t,e+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Bi===t.dump.charCodeAt(0)?b+="?":b+="? "),b+=t.dump,d&&(b+=il(t,e)),zt(t,e+1,p,!0,d)&&(t.dump&&Bi===t.dump.charCodeAt(0)?b+=":":b+=": ",b+=t.dump,i+=b));t.tag=a,t.dump=i||"{}"}function Zm(t,e,r){var n,i,a,s,o,u;for(i=r?t.explicitTypes:t.implicitTypes,a=0,s=i.length;a<s;a+=1)if(o=i[a],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(u=t.styleMap[o.tag]||o.defaultStyle,uy.call(o.represent)==="[object Function]")n=o.represent(e,u);else if(cy.call(o.represent,u))n=o.represent[u](e,u);else throw new rt("!<"+o.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function zt(t,e,r,n,i,a,s){t.tag=null,t.dump=r,Zm(t,r,!1)||Zm(t,r,!0);var o=uy.call(t.dump),u=n,c;n&&(n=t.flowLevel<0||t.flowLevel>e);var p=o==="[object Object]"||o==="[object Array]",d,b;if(p&&(d=t.duplicates.indexOf(r),b=d!==-1),(t.tag!==null&&t.tag!=="?"||b||t.indent!==2&&e>0)&&(i=!1),b&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(p&&b&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?(o0(t,e,t.dump,i),b&&(t.dump="&ref_"+d+t.dump)):(s0(t,e,t.dump),b&&(t.dump="&ref_"+d+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Hm(t,e-1,t.dump,i):Hm(t,e,t.dump,i),b&&(t.dump="&ref_"+d+t.dump)):(a0(t,e,t.dump),b&&(t.dump="&ref_"+d+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&r0(t,t.dump,e,a,u);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new rt("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function u0(t,e){var r=[],n=[],i,a;for(sl(t,r,n),i=0,a=n.length;i<a;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(a)}function sl(t,e,r){var n,i,a;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)sl(t[i],e,r);else for(n=Object.keys(t),i=0,a=n.length;i<a;i+=1)sl(t[n[i]],e,r)}function c0(t,e){e=e||{};var r=new Gx(e);r.noRefs||u0(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),zt(r,0,n,!0,!0)?r.dump+`
`:""}var l0=c0,p0={dump:l0};function pl(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var h0=oy.load,x$=oy.loadAll,A$=p0.dump;var O$=pl("safeLoad","load"),P$=pl("safeLoadAll","loadAll"),E$=pl("safeDump","dump");Ke();$e();kc();xr();Di();globalThis.langchain={OpenAI:_n,MemoryVectorStore:Ss,OpenAIEmbeddings:Is,RetrievalQAChain:An,loadSummarizationChain:Qc,loadQARefineChain:Yc,TokenTextSplitter:js};})();
